/*! p5.dom.js v0.2.9 March 3, 2016 */
(function(n,t){typeof define=="function"&&define.amd?define("p5.dom",["p5"],function(n){t(n)}):typeof exports=="object"?t(require("../p5")):t(n.p5)})(this,function(n){function i(t){var i=document;return typeof t=="string"&&t[0]==="#"?(t=t.slice(1),i=document.getElementById(t)||document):t instanceof n.Element?i=t.elt:t instanceof HTMLElement&&(i=t),i}function r(t){if(t.tagName==="INPUT"&&t.type==="checkbox"){var i=new n.Element(t);return i.checked=function(){return arguments.length===0?this.elt.checked:(this.elt.checked=arguments[0]?!0:!1,this)},i}return t.tagName==="VIDEO"||t.tagName==="AUDIO"?new n.MediaElement(t):new n.Element(t)}function t(t,i,r){var f=i._userNode?i._userNode:document.body,u;return f.appendChild(t),u=r?new n.MediaElement(t):new n.Element(t),i._elements.push(u),u}function f(n,i,r,u){var f=document.createElement(i),r=r||"",o,s,h,e;for(typeof r=="string"&&(r=[r]),o=0;o<r.length;o++)s=document.createElement("source"),s.src=r[o],f.appendChild(s);return typeof u!="undefined"&&(h=function(){u();f.removeEventListener("canplaythrough",h)},f.addEventListener("canplaythrough",h)),e=t(f,n,!0),e.loadedmetadata=!1,f.addEventListener("loadedmetadata",function(){e.width=f.videoWidth;e.height=f.videoHeight;e.loadedmetadata=!0}),e}var u,e;n.prototype.select=function(n,t){var u=null,f=i(t);return n[0]==="."?(n=n.slice(1),u=f.getElementsByClassName(n),u=u.length?u[0]:null):n[0]==="#"?(n=n.slice(1),u=f.getElementById(n)):(u=f.getElementsByTagName(n),u=u.length?u[0]:null),u?r(u):null};n.prototype.selectAll=function(n,t){var e=[],u,o=i(t),f,s;if(n[0]==="."?(n=n.slice(1),u=o.getElementsByClassName(n)):u=o.getElementsByTagName(n),u)for(f=0;f<u.length;f++)s=r(u[f]),e.push(s);return e};n.prototype.removeElements=function(){for(var n=0;n<this._elements.length;n++)this._elements[n].elt instanceof HTMLCanvasElement||this._elements[n].remove()};u=["div","p","span"];u.forEach(function(i){var r="create"+i.charAt(0).toUpperCase()+i.slice(1);n.prototype[r]=function(n){var r=document.createElement(i);return r.innerHTML=typeof n===undefined?"":n,t(r,this)}});n.prototype.createImg=function(){var r=document.createElement("img"),n=arguments,i,u=function(){i.width=r.offsetWidth;i.height=r.offsetHeight;n.length>1&&typeof n[1]=="function"?(i.fn=n[1],i.fn()):n.length>1&&typeof n[2]=="function"&&(i.fn=n[2],i.fn())};return r.src=n[0],n.length>1&&typeof n[1]=="string"&&(r.alt=n[1]),r.onload=function(){u()},i=t(r,this)};n.prototype.createA=function(n,i,r){var u=document.createElement("a");return u.href=n,u.innerHTML=i,r&&(u.target=r),t(u,this)};n.prototype.createSlider=function(n,i,r,u){var f=document.createElement("input");return f.type="range",f.min=n,f.max=i,u&&(f.step=u),typeof r=="number"&&(f.value=r),t(f,this)};n.prototype.createButton=function(n,i){var r=document.createElement("button");return r.innerHTML=n,r.value=i,i&&(r.value=i),t(r,this)};n.prototype.createCheckbox=function(){var i=document.createElement("input"),n,u,r;return i.type="checkbox",n=t(i,this),n.checked=function(){return arguments.length===0?n.elt.checked:(n.elt.checked=arguments[0]?!0:!1,n)},this.value=function(t){return n.value=t,this},arguments[0]&&(u=Math.random().toString(36).slice(2),r=document.createElement("label"),i.setAttribute("id",u),r.htmlFor=u,n.value(arguments[0]),r.appendChild(document.createTextNode(arguments[0])),t(r,this)),arguments[1]&&(i.checked=!0),n};n.prototype.createSelect=function(n){var r=document.createElement("select"),i;return n&&r.setAttribute("multiple","true"),i=t(r,this),i.option=function(n,t){var i=document.createElement("option");i.innerHTML=n;i.value=arguments.length>1?t:n;r.appendChild(i)},i.selected=function(t){var r=[],i;if(arguments.length>0){for(i=0;i<this.elt.length;i++)t.toString()===this.elt[i].value&&(this.elt.selectedIndex=i);return this}if(n){for(i=0;i<this.elt.selectedOptions.length;i++)r.push(this.elt.selectedOptions[i].value);return r}return this.elt.value},i};n.prototype.createRadio=function(){var n=document.querySelectorAll("input[type=radio]"),i=0,r;if(n.length>1){console.log(n,n[0].name);var h=n.length,s=n[0].name,f=n[1].name;for(i=1,r=1;r<h;r++)f=n[r].name,s!=f&&i++,s=f}else n.length==1&&(i=1);var e=document.createElement("div"),u=t(e,this),o=-1;return u.option=function(n,t){var r=document.createElement("input"),f,u;return r.type="radio",r.innerHTML=n,r.value=arguments.length>1?t:n,r.setAttribute("name","defaultradio"+i),e.appendChild(r),n&&(o++,f=Math.random().toString(36).slice(2),u=document.createElement("label"),r.setAttribute("id","defaultradio"+i+"-"+o),u.htmlFor="defaultradio"+i+"-"+o,u.appendChild(document.createTextNode(n)),e.appendChild(u)),r},u.selected=function(){var t=this.elt.childNodes.length,n;if(arguments[0]){for(n=0;n<t;n+=2)this.elt.childNodes[n].value==arguments[0]&&(this.elt.childNodes[n].checked=!0);return this}for(n=0;n<t;n+=2)if(this.elt.childNodes[n].checked==!0)return this.elt.childNodes[n].value},u.value=function(){var t=this.elt.childNodes.length,n;if(arguments[0]){for(n=0;n<t;n+=2)this.elt.childNodes[n].value==arguments[0]&&(this.elt.childNodes[n].checked=!0);return this}for(n=0;n<t;n+=2)if(this.elt.childNodes[n].checked==!0)return this.elt.childNodes[n].value;return""},u};n.prototype.createInput=function(n){var i=document.createElement("input");return i.type="text",n&&(i.value=n),t(i,this)};n.prototype.createFileInput=function(i,r){if(window.File&&window.FileReader&&window.FileList&&window.Blob){var u=document.createElement("input");u.type="file";r&&(u.multiple="multiple");function f(t){for(var r,u,e=t.target.files,f=0;f<e.length;f++){r=e[f];u=new FileReader;function o(t){var r=new n.File(t);return function(n){r.data=n.target.result;i(r)}}u.onload=o(r);r.type.indexOf("text")>-1?u.readAsText(r):u.readAsDataURL(r)}}return u.addEventListener("change",f,!1),t(u,this)}console.log("The File APIs are not fully supported in this browser. Cannot create element.")};n.prototype.createVideo=function(n,t){return f(this,"video",n,t)};n.prototype.createAudio=function(n,t){return f(this,"audio",n,t)};n.prototype.VIDEO="video";n.prototype.AUDIO="audio";navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;n.prototype.createCapture=function(){for(var r,u,o=!0,s=!0,f,e,i=0;i<arguments.length;i++)arguments[i]===n.prototype.VIDEO?s=!1:arguments[i]===n.prototype.AUDIO?o=!1:typeof arguments[i]=="object"?f=arguments[i]:typeof arguments[i]=="function"&&(e=arguments[i]);if(navigator.getUserMedia)r=document.createElement("video"),f||(f={video:o,audio:s}),navigator.getUserMedia(f,function(n){r.src=window.URL.createObjectURL(n);r.onloadedmetadata=function(){r.play();e&&e(n)}},function(n){console.log(n)});else throw"getUserMedia not supported in this browser";return u=t(r,this,!0),u.loadedmetadata=!1,r.addEventListener("loadedmetadata",function(){u.width=r.videoWidth;u.height=r.videoHeight;u.loadedmetadata=!0}),u};n.prototype.createElement=function(n,i){var r=document.createElement(n);return typeof i!="undefined"&&(r.innerHTML=i),t(r,this)};n.Element.prototype.addClass=function(n){return this.elt.className=this.elt.className?this.elt.className+" "+n:n,this};n.Element.prototype.removeClass=function(n){var t=new RegExp("(?:^|\\s)"+n+"(?!\\S)");return this.elt.className=this.elt.className.replace(t,""),this.elt.className=this.elt.className.replace(/^\s+|\s+$/g,""),this};n.Element.prototype.child=function(t){return t===null?this.elt.childNodes:(typeof t=="string"?(t[0]==="#"&&(t=t.substring(1)),t=document.getElementById(t)):t instanceof n.Element&&(t=t.elt),this.elt.appendChild(t),this)};n.Element.prototype.center=function(n){var e=this.elt.style.display,t=this.elt.style.display==="none",i=this.parent().style.display==="none",r={x:this.elt.offsetLeft,y:this.elt.offsetTop};t&&this.show();this.elt.style.display="block";this.position(0,0);i&&(this.parent().style.display="block");var u=Math.abs(this.parent().offsetWidth-this.elt.offsetWidth),f=Math.abs(this.parent().offsetHeight-this.elt.offsetHeight),o=r.y,s=r.x;return n==="both"||n===undefined?this.position(u/2,f/2):n==="horizontal"?this.position(u/2,o):n==="vertical"&&this.position(s,f/2),this.style("display",e),t&&this.hide(),i&&(this.parent().style.display="none"),this};n.Element.prototype.html=function(n){return typeof n!="undefined"?(this.elt.innerHTML=n,this):this.elt.innerHTML};n.Element.prototype.position=function(){return arguments.length===0?{x:this.elt.offsetLeft,y:this.elt.offsetTop}:(this.elt.style.position="absolute",this.elt.style.left=arguments[0]+"px",this.elt.style.top=arguments[1]+"px",this.x=arguments[0],this.y=arguments[1],this)};n.Element.prototype._translate=function(){this.elt.style.position="absolute";var n="";return this.elt.style.transform&&(n=this.elt.style.transform.replace(/translate3d\(.*\)/g,""),n=n.replace(/translate[X-Z]?\(.*\)/g,"")),arguments.length===2?this.elt.style.transform="translate("+arguments[0]+"px, "+arguments[1]+"px)":arguments.length>2&&(this.elt.style.transform="translate3d("+arguments[0]+"px,"+arguments[1]+"px,"+arguments[2]+"px)",this.elt.parentElement.style.perspective=arguments.length===3?"1000px":arguments[3]+"px"),this.elt.style.transform+=n,this};n.Element.prototype._rotate=function(){var n="";return this.elt.style.transform&&(n=this.elt.style.transform.replace(/rotate3d\(.*\)/g,""),n=n.replace(/rotate[X-Z]?\(.*\)/g,"")),arguments.length===1?this.elt.style.transform="rotate("+arguments[0]+"deg)":arguments.length===2?this.elt.style.transform="rotate("+arguments[0]+"deg, "+arguments[1]+"deg)":arguments.length===3&&(this.elt.style.transform="rotateX("+arguments[0]+"deg)",this.elt.style.transform+="rotateY("+arguments[1]+"deg)",this.elt.style.transform+="rotateZ("+arguments[2]+"deg)"),this.elt.style.transform+=n,this};n.Element.prototype.style=function(t,i){var l=this,o,s,f,u,r,e,h,c;if(i instanceof n.Color&&(i="rgba("+i.levels[0]+","+i.levels[1]+","+i.levels[2]+","+i.levels[3]/255+")"),typeof i=="undefined"){if(t.indexOf(":")===-1)return o=window.getComputedStyle(l.elt),s=o.getPropertyValue(t),s;for(f=t.split(";"),u=0;u<f.length;u++)r=f[u].split(":"),r[0]&&r[1]&&(this.elt.style[r[0].trim()]=r[1].trim())}else t==="rotate"||t==="translate"||t==="position"?(e=Array.prototype.shift.apply(arguments),h=this[e]||this["_"+e],h.apply(this,arguments)):(this.elt.style[t]=i,(t==="width"||t==="height"||t==="left"||t==="top")&&(c=i.replace(/\D+/g,""),this[t]=parseInt(c,10)));return this};n.Element.prototype.attribute=function(n,t){return typeof t=="undefined"?this.elt.getAttribute(n):(this.elt.setAttribute(n,t),this)};n.Element.prototype.value=function(){return arguments.length>0?(this.elt.value=arguments[0],this):this.elt.type==="range"?parseFloat(this.elt.value):this.elt.value};n.Element.prototype.show=function(){return this.elt.style.display="block",this};n.Element.prototype.hide=function(){return this.elt.style.display="none",this};n.Element.prototype.size=function(t,i){var o,s,f;if(arguments.length===0)return{width:this.elt.offsetWidth,height:this.elt.offsetHeight};var r=t,u=i,e=n.prototype.AUTO;if(r!==e||u!==e){if(r===e?r=i*this.width/this.height:u===e&&(u=t*this.height/this.width),this.elt instanceof HTMLCanvasElement){o={};s=this.elt.getContext("2d");for(f in s)o[f]=s[f];this.elt.setAttribute("width",r*this._pInst._pixelDensity);this.elt.setAttribute("height",u*this._pInst._pixelDensity);this.elt.setAttribute("style","width:"+r+"px; height:"+u+"px");this._pInst.scale(this._pInst._pixelDensity,this._pInst._pixelDensity);for(f in o)this.elt.getContext("2d")[f]=o[f]}else this.elt.style.width=r+"px",this.elt.style.height=u+"px",this.elt.width=r,this.elt.height=u,this.width=r,this.height=u;this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight;this._pInst&&this._pInst._curElement.elt===this.elt&&(this._pInst._setProperty("width",this.elt.offsetWidth),this._pInst._setProperty("height",this.elt.offsetHeight))}return this};n.Element.prototype.remove=function(){for(var n in this._events)this.elt.removeEventListener(n,this._events[n]);this.elt.parentNode&&this.elt.parentNode.removeChild(this.elt);delete this};n.MediaElement=function(t,i){n.Element.call(this,t,i);var r=this;this.elt.crossOrigin="anonymous";this._prevTime=0;this._cueIDCounter=0;this._cues=[];this._pixelDensity=1;Object.defineProperty(r,"src",{get:function(){var n=r.elt.children[0].src,t=r.elt.src===window.location.href?"":r.elt.src;return n===window.location.href?t:n},set:function(n){for(var u,i=0;i<r.elt.children.length;i++)r.elt.removeChild(r.elt.children[i]);u=document.createElement("source");u.src=n;t.appendChild(u);r.elt.src=n}});r._onended=function(){};r.elt.onended=function(){r._onended(r)}};n.MediaElement.prototype=Object.create(n.Element.prototype);n.MediaElement.prototype.play=function(){return this.elt.currentTime===this.elt.duration&&(this.elt.currentTime=0),this.elt.readyState>1?this.elt.play():(this.elt.load(),this.elt.play()),this};n.MediaElement.prototype.stop=function(){return this.elt.pause(),this.elt.currentTime=0,this};n.MediaElement.prototype.pause=function(){return this.elt.pause(),this};n.MediaElement.prototype.loop=function(){return this.elt.setAttribute("loop",!0),this.play(),this};n.MediaElement.prototype.noLoop=function(){return this.elt.setAttribute("loop",!1),this};n.MediaElement.prototype.autoplay=function(n){return this.elt.setAttribute("autoplay",n),this};n.MediaElement.prototype.volume=function(n){if(typeof n=="undefined")return this.elt.volume;this.elt.volume=n};n.MediaElement.prototype.speed=function(n){if(typeof n=="undefined")return this.elt.playbackRate;this.elt.playbackRate=n};n.MediaElement.prototype.time=function(n){if(typeof n=="undefined")return this.elt.currentTime;this.elt.currentTime=n};n.MediaElement.prototype.duration=function(){return this.elt.duration};n.MediaElement.prototype.pixels=[];n.MediaElement.prototype.loadPixels=function(){return this.canvas||(this.canvas=document.createElement("canvas"),this.drawingContext=this.canvas.getContext("2d")),this.loadedmetadata&&(this.canvas.width!==this.elt.videoWidth&&(this.canvas.width=this.elt.videoWidth,this.canvas.height=this.elt.videoHeight,this.width=this.canvas.width,this.height=this.canvas.height),this.drawingContext.drawImage(this.elt,0,0,this.canvas.width,this.canvas.height),n.Renderer2D.prototype.loadPixels.call(this)),this};n.MediaElement.prototype.updatePixels=function(t,i,r,u){return this.loadedmetadata&&n.Renderer2D.prototype.updatePixels.call(this,t,i,r,u),this};n.MediaElement.prototype.get=function(t,i,r,u){return this.loadedmetadata?n.Renderer2D.prototype.get.call(this,t,i,r,u):[0,0,0,255]};n.MediaElement.prototype.set=function(t,i,r){this.loadedmetadata&&n.Renderer2D.prototype.set.call(this,t,i,r)};n.MediaElement.prototype.onended=function(n){return this._onended=n,this};n.MediaElement.prototype.connect=function(t){var i,r;if(typeof n.prototype.getAudioContext=="function")i=n.prototype.getAudioContext(),r=n.soundOut.input;else try{i=t.context;r=i.destination}catch(u){throw"connect() is meant to be used with Web Audio API or p5.sound.js";}this.audioSourceNode||(this.audioSourceNode=i.createMediaElementSource(this.elt),this.audioSourceNode.connect(r));t?t.input?this.audioSourceNode.connect(t.input):this.audioSourceNode.connect(t):this.audioSourceNode.connect(r)};n.MediaElement.prototype.disconnect=function(){if(this.audioSourceNode)this.audioSourceNode.disconnect();else throw"nothing to disconnect";};n.MediaElement.prototype.showControls=function(){this.elt.style["text-align"]="inherit";this.elt.controls=!0};n.MediaElement.prototype.hideControls=function(){this.elt.controls=!1};n.MediaElement.prototype.addCue=function(n,t,i){var r=this._cueIDCounter++,u=new e(t,n,r,i);return this._cues.push(u),this.elt.ontimeupdate||(this.elt.ontimeupdate=this._onTimeUpdate.bind(this)),r};n.MediaElement.prototype.removeCue=function(n){for(var i,t=0;t<this._cues.length;t++)i=this._cues[t],i.id===n&&this.cues.splice(t,1);this._cues.length===0&&(this.elt.ontimeupdate=null)};n.MediaElement.prototype.clearCues=function(){this._cues=[];this.elt.ontimeupdate=null};n.MediaElement.prototype._onTimeUpdate=function(){for(var t,r,i=this.time(),n=0;n<this._cues.length;n++)t=this._cues[n].time,r=this._cues[n].val,this._prevTime<t&&t<=i&&this._cues[n].callback(r);this._prevTime=i};e=function(n,t,i,r){this.callback=n;this.time=t;this.id=i;this.val=r};n.File=function(n,t){this.file=n;this._pInst=t;var i=n.type.split("/");this.type=i[0];this.subtype=i[1];this.name=n.name;this.size=n.size;this.data=undefined}});