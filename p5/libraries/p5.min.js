/*! p5.js v0.4.23 March 04, 2016 */
(function(n){if(typeof exports=="object"&&typeof module!="undefined")module.exports=n();else if(typeof define=="function"&&define.amd)define([],n);else{var t;t=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;t.p5=n()}})(function(){var n;return function t(n,i,r){function u(f,o){var h,c,s;if(!i[f]){if(!n[f]){if(h=typeof require=="function"&&require,!o&&h)return h(f,!0);if(e)return e(f,!0);c=new Error("Cannot find module '"+f+"'");throw c.code="MODULE_NOT_FOUND",c;}s=i[f]={exports:{}};n[f][0].call(s.exports,function(t){var i=n[f][1][t];return u(i?i:t)},s,s.exports,t,n,i,r)}return i[f].exports}for(var e=typeof require=="function"&&require,f=0;f<r.length;f++)u(r[f]);return u}({1:[function(){},{}],2:[function(n,t,i){"use strict";i.argument=function(n,t){if(!n)throw new Error(t);};i.assert=i.argument},{}],3:[function(n,t,i){"use strict";function r(n,t,i,r,u){n.beginPath();n.moveTo(t,i);n.lineTo(r,u);n.stroke()}i.line=r},{}],4:[function(n,t,i){"use strict";function u(n){this.font=n}function f(n){this.cmap=n}function e(n,t){this.encoding=n;this.charset=t}function r(n){var t;switch(n.version){case 1:this.names=i.standardNames.slice();break;case 2:for(this.names=new Array(n.numberOfGlyphs),t=0;t<n.numberOfGlyphs;t++)this.names[t]=n.glyphNameIndex[t]<i.standardNames.length?i.standardNames[n.glyphNameIndex[t]]:n.names[n.glyphNameIndex[t]-i.standardNames.length];break;case 2.5:for(this.names=new Array(n.numberOfGlyphs),t=0;t<n.numberOfGlyphs;t++)this.names[t]=i.standardNames[t+n.glyphNameIndex[t]];break;case 3:this.names=[]}}function o(n){for(var r,e,i,u=n.tables.cmap.glyphIndexMap,f=Object.keys(u),t=0;t<f.length;t+=1)r=f[t],e=u[r],i=n.glyphs.get(e),i.addUnicode(parseInt(r));for(t=0;t<n.glyphs.length;t+=1)i=n.glyphs.get(t),i.name=n.cffEncoding?n.cffEncoding.charset[t]:n.glyphNames.glyphIndexToName(t)}u.prototype.charToGlyphIndex=function(n){var f=n.charCodeAt(0),r=this.font.glyphs,t,u,i;if(r){for(t=0;t<r.length;t+=1)for(u=r.get(t),i=0;i<u.unicodes.length;i+=1)if(u.unicodes[i]===f)return t}else return null};f.prototype.charToGlyphIndex=function(n){return this.cmap.glyphIndexMap[n.charCodeAt(0)]||0};e.prototype.charToGlyphIndex=function(n){var t=n.charCodeAt(0),i=this.encoding[t];return this.charset.indexOf(i)};r.prototype.nameToGlyphIndex=function(n){return this.names.indexOf(n)};r.prototype.glyphIndexToName=function(n){return this.names[n]};i.cffStandardStrings=[".notdef","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","endash","dagger","daggerdbl","periodcentered","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","questiondown","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","ring","cedilla","hungarumlaut","ogonek","caron","emdash","AE","ordfeminine","Lslash","Oslash","OE","ordmasculine","ae","dotlessi","lslash","oslash","oe","germandbls","onesuperior","logicalnot","mu","trademark","Eth","onehalf","plusminus","Thorn","onequarter","divide","brokenbar","degree","thorn","threequarters","twosuperior","registered","minus","eth","multiply","threesuperior","copyright","Aacute","Acircumflex","Adieresis","Agrave","Aring","Atilde","Ccedilla","Eacute","Ecircumflex","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Ntilde","Oacute","Ocircumflex","Odieresis","Ograve","Otilde","Scaron","Uacute","Ucircumflex","Udieresis","Ugrave","Yacute","Ydieresis","Zcaron","aacute","acircumflex","adieresis","agrave","aring","atilde","ccedilla","eacute","ecircumflex","edieresis","egrave","iacute","icircumflex","idieresis","igrave","ntilde","oacute","ocircumflex","odieresis","ograve","otilde","scaron","uacute","ucircumflex","udieresis","ugrave","yacute","ydieresis","zcaron","exclamsmall","Hungarumlautsmall","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","266 ff","onedotenleader","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","commasuperior","threequartersemdash","periodsuperior","questionsmall","asuperior","bsuperior","centsuperior","dsuperior","esuperior","isuperior","lsuperior","msuperior","nsuperior","osuperior","rsuperior","ssuperior","tsuperior","ff","ffi","ffl","parenleftinferior","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","exclamdownsmall","centoldstyle","Lslashsmall","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","Dotaccentsmall","Macronsmall","figuredash","hypheninferior","Ogoneksmall","Ringsmall","Cedillasmall","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","zerosuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall","001.000","001.001","001.002","001.003","Black","Bold","Book","Light","Medium","Regular","Roman","Semibold"];i.cffStandardEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quoteright","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","quoteleft","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdown","cent","sterling","fraction","yen","florin","section","currency","quotesingle","quotedblleft","guillemotleft","guilsinglleft","guilsinglright","fi","fl","","endash","dagger","daggerdbl","periodcentered","","paragraph","bullet","quotesinglbase","quotedblbase","quotedblright","guillemotright","ellipsis","perthousand","","questiondown","","grave","acute","circumflex","tilde","macron","breve","dotaccent","dieresis","","ring","cedilla","","hungarumlaut","ogonek","caron","emdash","","","","","","","","","","","","","","","","","AE","","ordfeminine","","","","","Lslash","Oslash","OE","ordmasculine","","","","","","ae","","","","dotlessi","","","lslash","oslash","oe","germandbls"];i.cffExpertEncoding=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","space","exclamsmall","Hungarumlautsmall","","dollaroldstyle","dollarsuperior","ampersandsmall","Acutesmall","parenleftsuperior","parenrightsuperior","twodotenleader","onedotenleader","comma","hyphen","period","fraction","zerooldstyle","oneoldstyle","twooldstyle","threeoldstyle","fouroldstyle","fiveoldstyle","sixoldstyle","sevenoldstyle","eightoldstyle","nineoldstyle","colon","semicolon","commasuperior","threequartersemdash","periodsuperior","questionsmall","","asuperior","bsuperior","centsuperior","dsuperior","esuperior","","","isuperior","","","lsuperior","msuperior","nsuperior","osuperior","","","rsuperior","ssuperior","tsuperior","","ff","fi","fl","ffi","ffl","parenleftinferior","","parenrightinferior","Circumflexsmall","hyphensuperior","Gravesmall","Asmall","Bsmall","Csmall","Dsmall","Esmall","Fsmall","Gsmall","Hsmall","Ismall","Jsmall","Ksmall","Lsmall","Msmall","Nsmall","Osmall","Psmall","Qsmall","Rsmall","Ssmall","Tsmall","Usmall","Vsmall","Wsmall","Xsmall","Ysmall","Zsmall","colonmonetary","onefitted","rupiah","Tildesmall","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","exclamdownsmall","centoldstyle","Lslashsmall","","","Scaronsmall","Zcaronsmall","Dieresissmall","Brevesmall","Caronsmall","","Dotaccentsmall","","","Macronsmall","","","figuredash","hypheninferior","","","Ogoneksmall","Ringsmall","Cedillasmall","","","","onequarter","onehalf","threequarters","questiondownsmall","oneeighth","threeeighths","fiveeighths","seveneighths","onethird","twothirds","","","zerosuperior","onesuperior","twosuperior","threesuperior","foursuperior","fivesuperior","sixsuperior","sevensuperior","eightsuperior","ninesuperior","zeroinferior","oneinferior","twoinferior","threeinferior","fourinferior","fiveinferior","sixinferior","seveninferior","eightinferior","nineinferior","centinferior","dollarinferior","periodinferior","commainferior","Agravesmall","Aacutesmall","Acircumflexsmall","Atildesmall","Adieresissmall","Aringsmall","AEsmall","Ccedillasmall","Egravesmall","Eacutesmall","Ecircumflexsmall","Edieresissmall","Igravesmall","Iacutesmall","Icircumflexsmall","Idieresissmall","Ethsmall","Ntildesmall","Ogravesmall","Oacutesmall","Ocircumflexsmall","Otildesmall","Odieresissmall","OEsmall","Oslashsmall","Ugravesmall","Uacutesmall","Ucircumflexsmall","Udieresissmall","Yacutesmall","Thornsmall","Ydieresissmall"];i.standardNames=[".notdef",".null","nonmarkingreturn","space","exclam","quotedbl","numbersign","dollar","percent","ampersand","quotesingle","parenleft","parenright","asterisk","plus","comma","hyphen","period","slash","zero","one","two","three","four","five","six","seven","eight","nine","colon","semicolon","less","equal","greater","question","at","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","bracketleft","backslash","bracketright","asciicircum","underscore","grave","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","braceleft","bar","braceright","asciitilde","Adieresis","Aring","Ccedilla","Eacute","Ntilde","Odieresis","Udieresis","aacute","agrave","acircumflex","adieresis","atilde","aring","ccedilla","eacute","egrave","ecircumflex","edieresis","iacute","igrave","icircumflex","idieresis","ntilde","oacute","ograve","ocircumflex","odieresis","otilde","uacute","ugrave","ucircumflex","udieresis","dagger","degree","cent","sterling","section","bullet","paragraph","germandbls","registered","copyright","trademark","acute","dieresis","notequal","AE","Oslash","infinity","plusminus","lessequal","greaterequal","yen","mu","partialdiff","summation","product","pi","integral","ordfeminine","ordmasculine","Omega","ae","oslash","questiondown","exclamdown","logicalnot","radical","florin","approxequal","Delta","guillemotleft","guillemotright","ellipsis","nonbreakingspace","Agrave","Atilde","Otilde","OE","oe","endash","emdash","quotedblleft","quotedblright","quoteleft","quoteright","divide","lozenge","ydieresis","Ydieresis","fraction","currency","guilsinglleft","guilsinglright","fi","fl","daggerdbl","periodcentered","quotesinglbase","quotedblbase","perthousand","Acircumflex","Ecircumflex","Aacute","Edieresis","Egrave","Iacute","Icircumflex","Idieresis","Igrave","Oacute","Ocircumflex","apple","Ograve","Uacute","Ucircumflex","Ugrave","dotlessi","circumflex","tilde","macron","breve","dotaccent","ring","cedilla","hungarumlaut","ogonek","caron","Lslash","lslash","Scaron","scaron","Zcaron","zcaron","brokenbar","Eth","eth","Yacute","yacute","Thorn","thorn","minus","multiply","onesuperior","twosuperior","threesuperior","onehalf","onequarter","threequarters","franc","Gbreve","gbreve","Idotaccent","Scedilla","scedilla","Cacute","cacute","Ccaron","ccaron","dcroat"];i.DefaultEncoding=u;i.CmapEncoding=f;i.CffEncoding=e;i.GlyphNames=r;i.addGlyphNames=o},{}],5:[function(n,t,i){"use strict";function r(n){n=n||{};this.familyName=n.familyName||" ";this.styleName=n.styleName||" ";this.designer=n.designer||" ";this.designerURL=n.designerURL||" ";this.manufacturer=n.manufacturer||" ";this.manufacturerURL=n.manufacturerURL||" ";this.license=n.license||" ";this.licenseURL=n.licenseURL||" ";this.version=n.version||"Version 0.1";this.description=n.description||" ";this.copyright=n.copyright||" ";this.trademark=n.trademark||" ";this.unitsPerEm=n.unitsPerEm||1e3;this.ascender=n.ascender;this.descender=n.descender;this.supported=!0;this.glyphs=new o.GlyphSet(this,n.glyphs||[]);this.encoding=new e.DefaultEncoding(this);this.tables={}}var u=n("./path"),f=n("./tables/sfnt"),e=n("./encoding"),o=n("./glyphset");r.prototype.hasChar=function(n){return this.encoding.charToGlyphIndex(n)!==null};r.prototype.charToGlyphIndex=function(n){return this.encoding.charToGlyphIndex(n)};r.prototype.charToGlyph=function(n){var i=this.charToGlyphIndex(n),t=this.glyphs.get(i);return t||(t=this.glyphs.get(0)),t};r.prototype.stringToGlyphs=function(n){for(var r,i=[],t=0;t<n.length;t+=1)r=n[t],i.push(this.charToGlyph(r));return i};r.prototype.nameToGlyphIndex=function(n){return this.glyphNames.nameToGlyphIndex(n)};r.prototype.nameToGlyph=function(n){var i=this.nametoGlyphIndex(n),t=this.glyphs.get(i);return t||(t=this.glyphs.get(0)),t};r.prototype.glyphIndexToName=function(n){return this.glyphNames.glyphIndexToName?this.glyphNames.glyphIndexToName(n):""};r.prototype.getKerningValue=function(n,t){n=n.index||n;t=t.index||t;var i=this.getGposKerningValue;return i?i(n,t):this.kerningPairs[n+","+t]||0};r.prototype.forEachGlyph=function(n,t,i,r,u,f){var e,o,c;if(this.supported){t=t!==undefined?t:0;i=i!==undefined?i:0;r=r!==undefined?r:72;u=u||{};var l=u.kerning===undefined?!0:u.kerning,h=1/this.unitsPerEm*r,s=this.stringToGlyphs(n);for(e=0;e<s.length;e+=1)o=s[e],f(o,t,i,r,u),o.advanceWidth&&(t+=o.advanceWidth*h),l&&e<s.length-1&&(c=this.getKerningValue(o,s[e+1]),t+=c*h)}};r.prototype.getPath=function(n,t,i,r,f){var e=new u.Path;return this.forEachGlyph(n,t,i,r,f,function(n,t,i,r){var u=n.getPath(t,i,r);e.extend(u)}),e};r.prototype.draw=function(n,t,i,r,u,f){this.getPath(t,i,r,u,f).draw(n)};r.prototype.drawPoints=function(n,t,i,r,u,f){this.forEachGlyph(t,i,r,u,f,function(t,i,r,u){t.drawPoints(n,i,r,u)})};r.prototype.drawMetrics=function(n,t,i,r,u,f){this.forEachGlyph(t,i,r,u,f,function(t,i,r,u){t.drawMetrics(n,i,r,u)})};r.prototype.validate=function(){function i(n,t){n||r.push(t)}function n(n){i(t[n]&&t[n].trim().length>0,"No "+n+" specified.")}var r=[],t=this;n("familyName");n("weightName");n("manufacturer");n("copyright");n("version");i(this.unitsPerEm>0,"No unitsPerEm specified.")};r.prototype.toTables=function(){return f.fontToTable(this)};r.prototype.toBuffer=function(){for(var r=this.toTables(),t=r.encode(),i=new ArrayBuffer(t.length),u=new Uint8Array(i),n=0;n<t.length;n++)u[n]=t[n];return i};r.prototype.download=function(){var t=this.familyName.replace(/\s/g,"")+"-"+this.styleName+".otf",n=this.toBuffer();window.requestFileSystem=window.requestFileSystem||window.webkitRequestFileSystem;window.requestFileSystem(window.TEMPORARY,n.byteLength,function(i){i.root.getFile(t,{create:!0},function(t){t.createWriter(function(i){var r=new DataView(n),u=new Blob([r],{type:"font/opentype"});i.write(u);i.addEventListener("writeend",function(){location.href=t.toURL()},!1)})})},function(n){throw n;})};i.Font=r},{"./encoding":4,"./glyphset":7,"./path":10,"./tables/sfnt":25}],6:[function(n,t,i){"use strict";function o(n,t){var i=t||{commands:[]};return{configurable:!0,get:function(){return typeof i=="function"&&(i=i()),i},set:function(n){i=n}}}function r(n){this.bindConstructorValues(n)}var f=n("./check"),u=n("./draw"),e=n("./path");r.prototype.bindConstructorValues=function(n){this.index=n.index||0;this.name=n.name||null;this.unicode=n.unicode||undefined;this.unicodes=n.unicodes||n.unicode!==undefined?[n.unicode]:[];n.xMin&&(this.xMin=n.xMin);n.yMin&&(this.yMin=n.yMin);n.xMax&&(this.xMax=n.xMax);n.yMax&&(this.yMax=n.yMax);n.advanceWidth&&(this.advanceWidth=n.advanceWidth);Object.defineProperty(this,"path",o(this,n.path))};r.prototype.addUnicode=function(n){this.unicodes.length===0&&(this.unicode=n);this.unicodes.push(n)};r.prototype.getPath=function(n,t,i){var o,r;n=n!==undefined?n:0;t=t!==undefined?t:0;i=i!==undefined?i:72;var u=1/this.path.unitsPerEm*i,f=new e.Path,s=this.path.commands;for(o=0;o<s.length;o+=1)r=s[o],r.type==="M"?f.moveTo(n+r.x*u,t+-r.y*u):r.type==="L"?f.lineTo(n+r.x*u,t+-r.y*u):r.type==="Q"?f.quadraticCurveTo(n+r.x1*u,t+-r.y1*u,n+r.x*u,t+-r.y*u):r.type==="C"?f.curveTo(n+r.x1*u,t+-r.y1*u,n+r.x2*u,t+-r.y2*u,n+r.x*u,t+-r.y*u):r.type==="Z"&&f.closePath();return f};r.prototype.getContours=function(){var i,n,t,r;if(this.points===undefined)return[];for(i=[],n=[],t=0;t<this.points.length;t+=1)r=this.points[t],n.push(r),r.lastPointOfContour&&(i.push(n),n=[]);return f.argument(n.length===0,"There are still points left in the current contour."),i};r.prototype.getMetrics=function(){for(var n,t,f=this.path.commands,i=[],r=[],u=0;u<f.length;u+=1)n=f[u],n.type!=="Z"&&(i.push(n.x),r.push(n.y)),(n.type==="Q"||n.type==="C")&&(i.push(n.x1),r.push(n.y1)),n.type==="C"&&(i.push(n.x2),r.push(n.y2));return t={xMin:Math.min.apply(null,i),yMin:Math.min.apply(null,r),xMax:Math.max.apply(null,i),yMax:Math.max.apply(null,r),leftSideBearing:0},t.rightSideBearing=this.advanceWidth-t.leftSideBearing-(t.xMax-t.xMin),t};r.prototype.draw=function(n,t,i,r){this.getPath(t,i,r).draw(n)};r.prototype.drawPoints=function(n,t,i,r){function o(t,i,r,u){var e=Math.PI*2,f;for(n.beginPath(),f=0;f<t.length;f+=1)n.moveTo(i+t[f].x*u,r+t[f].y*u),n.arc(i+t[f].x*u,r+t[f].y*u,2,0,e,!1);n.closePath();n.fill()}var f,u;t=t!==undefined?t:0;i=i!==undefined?i:0;r=r!==undefined?r:24;var s=1/this.path.unitsPerEm*r,h=[],e=[],c=this.path;for(f=0;f<c.commands.length;f+=1)u=c.commands[f],u.x!==undefined&&h.push({x:u.x,y:-u.y}),u.x1!==undefined&&e.push({x:u.x1,y:-u.y1}),u.x2!==undefined&&e.push({x:u.x2,y:-u.y2});n.fillStyle="blue";o(h,t,i,s);n.fillStyle="red";o(e,t,i,s)};r.prototype.drawMetrics=function(n,t,i,r){var f;t=t!==undefined?t:0;i=i!==undefined?i:0;r=r!==undefined?r:24;f=1/this.path.unitsPerEm*r;n.lineWidth=1;n.strokeStyle="black";u.line(n,t,-1e4,t,1e4);u.line(n,-1e4,i,1e4,i);var e=this.xMin||0,o=this.yMin||0,s=this.xMax||0,h=this.yMax||0,c=this.advanceWidth||0;n.strokeStyle="blue";u.line(n,t+e*f,-1e4,t+e*f,1e4);u.line(n,t+s*f,-1e4,t+s*f,1e4);u.line(n,-1e4,i+-o*f,1e4,i+-o*f);u.line(n,-1e4,i+-h*f,1e4,i+-h*f);n.strokeStyle="green";u.line(n,t+c*f,-1e4,t+c*f,1e4)};i.Glyph=r},{"./check":2,"./draw":3,"./path":10}],7:[function(n,t,i){"use strict";function u(n,t){if(this.font=n,this.glyphs={},Array.isArray(t))for(var i=0;i<t.length;i++)this.glyphs[i]=t[i];this.length=t&&t.length||0}function f(n,t){return new r.Glyph({index:t,font:n})}function e(n,t,i,u,f,e){return function(){var o=new r.Glyph({index:t,font:n});return o.path=function(){i(o,u,f);var t=e(n.glyphs,o);return t.unitsPerEm=n.unitsPerEm,t},o}}function o(n,t,i,u){return function(){var f=new r.Glyph({index:t,font:n});return f.path=function(){var t=i(n,f,u);return t.unitsPerEm=n.unitsPerEm,t},f}}var r=n("./glyph");u.prototype.get=function(n){return typeof this.glyphs[n]=="function"&&(this.glyphs[n]=this.glyphs[n]()),this.glyphs[n]};u.prototype.push=function(n,t){this.glyphs[n]=t;this.length++};i.GlyphSet=u;i.glyphLoader=f;i.ttfGlyphLoader=e;i.cffGlyphLoader=o},{"./glyph":6}],8:[function(n,t,i){"use strict";function tt(n){for(var i=new ArrayBuffer(n.length),r=new Uint8Array(i),t=0;t<n.length;t+=1)r[t]=n[t];return i}function it(t,i){var r=n("fs");r.readFile(t,function(n,t){if(n)return i(n.message);i(null,tt(t))})}function rt(n,t){var i=new XMLHttpRequest;i.open("get",n,!0);i.responseType="arraybuffer";i.onload=function(){return i.status!==200?t("Font could not be loaded: "+i.statusText):t(null,i.response)};i.send()}function e(n){var ot,st,tt,it,rt,ut,ft,t=new f.Font,i=new DataView(n,0),o=r.getFixed(i,0),ht,s,et,ct,e,lt,at;if(o===1)t.outlinesFormat="truetype";else if(o=r.getTag(i,0),o==="OTTO")t.outlinesFormat="cff";else throw new Error("Unsupported OpenType version "+o);for(ht=r.getUShort(i,4),s=12,et=0;et<ht;et+=1){ct=r.getTag(i,s);e=r.getULong(i,s+8);switch(ct){case"cmap":t.tables.cmap=h.parse(i,e);t.encoding=new u.CmapEncoding(t.tables.cmap);t.encoding||(t.supported=!1);break;case"head":t.tables.head=v.parse(i,e);t.unitsPerEm=t.tables.head.unitsPerEm;ot=t.tables.head.indexToLocFormat;break;case"hhea":t.tables.hhea=y.parse(i,e);t.ascender=t.tables.hhea.ascender;t.descender=t.tables.hhea.descender;t.numberOfHMetrics=t.tables.hhea.numberOfHMetrics;break;case"hmtx":st=e;break;case"maxp":t.tables.maxp=k.parse(i,e);t.numGlyphs=t.tables.maxp.numGlyphs;break;case"name":t.tables.name=d.parse(i,e);t.familyName=t.tables.name.fontFamily;t.styleName=t.tables.name.fontSubfamily;break;case"OS/2":t.tables.os2=g.parse(i,e);break;case"post":t.tables.post=nt.parse(i,e);t.glyphNames=new u.GlyphNames(t.tables.post);break;case"glyf":tt=e;break;case"loca":it=e;break;case"CFF ":rt=e;break;case"kern":ut=e;break;case"GPOS":ft=e}s+=16}return tt&&it?(lt=ot===0,at=b.parse(i,it,t.numGlyphs,lt),t.glyphs=l.parse(i,tt,at,t),p.parse(i,st,t.numberOfHMetrics,t.numGlyphs,t.glyphs),u.addGlyphNames(t)):rt?(c.parse(i,rt,t),u.addGlyphNames(t)):t.supported=!1,t.supported&&(t.kerningPairs=ut?w.parse(i,ut):{},ft&&a.parse(i,ft,t)),t}function ut(n,t){var i=typeof window=="undefined",r=i?it:rt;r(n,function(n,i){if(n)return t(n);var r=e(i);return r.supported?t(null,r):t("Font is not supported (is this a Postscript font?)")})}var u=n("./encoding"),f=n("./font"),o=n("./glyph"),r=n("./parse"),s=n("./path"),h=n("./tables/cmap"),c=n("./tables/cff"),l=n("./tables/glyf"),a=n("./tables/gpos"),v=n("./tables/head"),y=n("./tables/hhea"),p=n("./tables/hmtx"),w=n("./tables/kern"),b=n("./tables/loca"),k=n("./tables/maxp"),d=n("./tables/name"),g=n("./tables/os2"),nt=n("./tables/post");i._parse=r;i.Font=f.Font;i.Glyph=o.Glyph;i.Path=s.Path;i.parse=e;i.load=ut},{"./encoding":4,"./font":5,"./glyph":6,"./parse":9,"./path":10,"./tables/cff":12,"./tables/cmap":13,"./tables/glyf":14,"./tables/gpos":15,"./tables/head":16,"./tables/hhea":17,"./tables/hmtx":18,"./tables/kern":19,"./tables/loca":20,"./tables/maxp":21,"./tables/name":22,"./tables/os2":23,"./tables/post":24,fs:1}],9:[function(n,t,i){"use strict";function r(n,t){this.data=n;this.offset=t;this.relativeOffset=0}i.getByte=function(n,t){return n.getUint8(t)};i.getCard8=i.getByte;i.getUShort=function(n,t){return n.getUint16(t,!1)};i.getCard16=i.getUShort;i.getShort=function(n,t){return n.getInt16(t,!1)};i.getULong=function(n,t){return n.getUint32(t,!1)};i.getFixed=function(n,t){var i=n.getInt16(t,!1),r=n.getUint16(t+2,!1);return i+r/65535};i.getTag=function(n,t){for(var r="",i=t;i<t+4;i+=1)r+=String.fromCharCode(n.getInt8(i));return r};i.getOffset=function(n,t,i){for(var r=0,u=0;u<i;u+=1)r<<=8,r+=n.getUint8(t+u);return r};i.getBytes=function(n,t,i){for(var u=[],r=t;r<i;r+=1)u.push(n.getUint8(r));return u};i.bytesToString=function(n){for(var i="",t=0;t<n.length;t+=1)i+=String.fromCharCode(n[t]);return i};var u={byte:1,uShort:2,short:2,uLong:4,fixed:4,longDateTime:8,tag:4};r.prototype.parseByte=function(){var n=this.data.getUint8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};r.prototype.parseChar=function(){var n=this.data.getInt8(this.offset+this.relativeOffset);return this.relativeOffset+=1,n};r.prototype.parseCard8=r.prototype.parseByte;r.prototype.parseUShort=function(){var n=this.data.getUint16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};r.prototype.parseCard16=r.prototype.parseUShort;r.prototype.parseSID=r.prototype.parseUShort;r.prototype.parseOffset16=r.prototype.parseUShort;r.prototype.parseShort=function(){var n=this.data.getInt16(this.offset+this.relativeOffset);return this.relativeOffset+=2,n};r.prototype.parseF2Dot14=function(){var n=this.data.getInt16(this.offset+this.relativeOffset)/16384;return this.relativeOffset+=2,n};r.prototype.parseULong=function(){var n=i.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};r.prototype.parseFixed=function(){var n=i.getFixed(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n};r.prototype.parseOffset16List=r.prototype.parseUShortList=function(n){for(var r=new Array(n),f=this.data,u=this.offset+this.relativeOffset,t=0;t<n;t++)r[t]=i.getUShort(f,u),u+=2;return this.relativeOffset+=n*2,r};r.prototype.parseString=function(n){var r=this.data,u=this.offset+this.relativeOffset,i="",t;for(this.relativeOffset+=n,t=0;t<n;t++)i+=String.fromCharCode(r.getUint8(u+t));return i};r.prototype.parseTag=function(){return this.parseString(4)};r.prototype.parseLongDateTime=function(){var n=i.getULong(this.data,this.offset+this.relativeOffset+4);return this.relativeOffset+=8,n};r.prototype.parseFixed=function(){var n=i.getULong(this.data,this.offset+this.relativeOffset);return this.relativeOffset+=4,n/65536};r.prototype.parseVersion=function(){var n=i.getUShort(this.data,this.offset+this.relativeOffset),t=i.getUShort(this.data,this.offset+this.relativeOffset+2);return this.relativeOffset+=4,n+t/40960};r.prototype.skip=function(n,t){t===undefined&&(t=1);this.relativeOffset+=u[n]*t};i.Parser=r},{}],10:[function(n,t,i){"use strict";function r(){this.commands=[];this.fill="black";this.stroke=null;this.strokeWidth=1}r.prototype.moveTo=function(n,t){this.commands.push({type:"M",x:n,y:t})};r.prototype.lineTo=function(n,t){this.commands.push({type:"L",x:n,y:t})};r.prototype.curveTo=r.prototype.bezierCurveTo=function(n,t,i,r,u,f){this.commands.push({type:"C",x1:n,y1:t,x2:i,y2:r,x:u,y:f})};r.prototype.quadTo=r.prototype.quadraticCurveTo=function(n,t,i,r){this.commands.push({type:"Q",x1:n,y1:t,x:i,y:r})};r.prototype.close=r.prototype.closePath=function(){this.commands.push({type:"Z"})};r.prototype.extend=function(n){n.commands&&(n=n.commands);Array.prototype.push.apply(this.commands,n)};r.prototype.draw=function(n){var i,t;for(n.beginPath(),i=0;i<this.commands.length;i+=1)t=this.commands[i],t.type==="M"?n.moveTo(t.x,t.y):t.type==="L"?n.lineTo(t.x,t.y):t.type==="C"?n.bezierCurveTo(t.x1,t.y1,t.x2,t.y2,t.x,t.y):t.type==="Q"?n.quadraticCurveTo(t.x1,t.y1,t.x,t.y):t.type==="Z"&&n.closePath();this.fill&&(n.fillStyle=this.fill,n.fill());this.stroke&&(n.strokeStyle=this.stroke,n.lineWidth=this.strokeWidth,n.stroke())};r.prototype.toPathData=function(n){function f(t){return Math.round(t)===t?""+Math.round(t):t.toFixed(n)}function r(){for(var i,t="",n=0;n<arguments.length;n+=1)i=arguments[n],i>=0&&n>0&&(t+=" "),t+=f(i);return t}var i,u,t;for(n=n!==undefined?n:2,i="",u=0;u<this.commands.length;u+=1)t=this.commands[u],t.type==="M"?i+="M"+r(t.x,t.y):t.type==="L"?i+="L"+r(t.x,t.y):t.type==="C"?i+="C"+r(t.x1,t.y1,t.x2,t.y2,t.x,t.y):t.type==="Q"?i+="Q"+r(t.x1,t.y1,t.x,t.y):t.type==="Z"&&(i+="Z");return i};r.prototype.toSVG=function(n){var t='<path d="';return t+=this.toPathData(n),t+='"',this.fill&this.fill!=="black"&&(t+=this.fill===null?' fill="none"':' fill="'+this.fill+'"'),this.stroke&&(t+=' stroke="'+this.stroke+'" stroke-width="'+this.strokeWidth+'"'),t+"/>"};i.Path=r},{}],11:[function(n,t,i){"use strict";function r(n,t,i){for(var f,e,u,o,r=0;r<t.length;r+=1)f=t[r],this[f.name]=f.value;if(this.tableName=n,this.fields=t,i)for(e=Object.keys(i),r=0;r<e.length;r+=1)u=e[r],o=i[u],this[u]!==undefined&&(this[u]=o)}var u=n("./check"),f=n("./types").encode,e=n("./types").sizeOf;r.prototype.sizeOf=function(){for(var t,n,f,i=0,r=0;r<this.fields.length;r+=1)t=this.fields[r],n=this[t.name],n===undefined&&(n=t.value),typeof n.sizeOf=="function"?i+=n.sizeOf():(f=e[t.type],u.assert(typeof f=="function","Could not find sizeOf function for field"+t.name),i+=f(n));return i};r.prototype.encode=function(){return f.TABLE(this)};i.Table=r},{"./check":2,"./types":26}],12:[function(n,t,i){"use strict";function h(n,t){if(n===t)return!0;if(Array.isArray(n)&&Array.isArray(t)){if(n.length!==t.length)return!1;for(var i=0;i<n.length;i+=1)if(!h(n[i],t[i]))return!1;return!0}return!1}function e(n,t,i){var f=[],a=[],e=r.getCard16(n,t),u,o,c,s,l,h;if(e!==0){for(s=r.getByte(n,t+2),o=t+(e+1)*s+2,l=t+3,u=0;u<e+1;u+=1)f.push(r.getOffset(n,l,s)),l+=s;c=o+f[e]}else c=t+2;for(u=0;u<f.length-1;u+=1)h=r.getBytes(n,o+f[u],o+f[u+1]),i&&(h=i(h)),a.push(h);return{objects:a,startOffset:t,endOffset:c}}function g(n){for(var t="",i=15,r=["0","1","2","3","4","5","6","7","8","9",".","E","E-",null,"-"];;){var u=n.parseByte(),f=u>>4,e=u&15;if(f===i)break;if(t+=r[f],e===i)break;t+=r[e]}return parseFloat(t)}function nt(n,t){var i,r,u,f;if(t===28)return i=n.parseByte(),r=n.parseByte(),i<<8|r;if(t===29)return i=n.parseByte(),r=n.parseByte(),u=n.parseByte(),f=n.parseByte(),i<<24|r<<16|u<<8|f;if(t===30)return g(n);if(t>=32&&t<=246)return t-139;if(t>=247&&t<=250)return i=n.parseByte(),(t-247)*256+i+108;if(t>=251&&t<=254)return i=n.parseByte(),-(t-251)*256-i-108;throw new Error("Invalid b0 "+t);}function tt(n){for(var r,u,f,t={},i=0;i<n.length;i+=1){if(r=n[i][0],u=n[i][1],f=u.length===1?u[0]:u,t.hasOwnProperty(r))throw new Error("Object "+t+" already has key "+r);t[r]=f}return t}function c(n,t,i){var u;t=t!==undefined?t:0;var f=new r.Parser(n,t),o=[],e=[];for(i=i!==undefined?i:n.length;f.relativeOffset<i;)u=f.parseByte(),u<=21?(u===12&&(u=1200+f.parseByte()),o.push([u,e]),e=[]):e.push(nt(f,u));return tt(o)}function o(n,t){return t<=390?f.cffStandardStrings[t]:n[t-391]}function l(n,t,i){for(var r,u,e={},f=0;f<t.length;f+=1)r=t[f],u=n[r.op],u===undefined&&(u=r.value!==undefined?r.value:null),r.type==="SID"&&(u=o(i,u)),e[r.name]=u;return e}function it(n,t){var i={};return i.formatMajor=r.getCard8(n,t),i.formatMinor=r.getCard8(n,t+1),i.size=r.getCard8(n,t+2),i.offsetSize=r.getCard8(n,t+3),i.startOffset=t,i.endOffset=t+4,i}function rt(n,t){var i=c(n,0,n.byteLength);return l(i,a,t)}function ut(n,t,i,r){var u=c(n,t,i);return l(u,v,r)}function ft(n,t,i,u){var f,e,l,h=new r.Parser(n,t),s,c;if(i-=1,s=[".notdef"],c=h.parseCard8(),c===0)for(f=0;f<i;f+=1)e=h.parseSID(),s.push(o(u,e));else if(c===1)while(s.length<=i)for(e=h.parseSID(),l=h.parseCard8(),f=0;f<=l;f+=1)s.push(o(u,e)),e+=1;else if(c===2)while(s.length<=i)for(e=h.parseSID(),l=h.parseCard16(),f=0;f<=l;f+=1)s.push(o(u,e)),e+=1;else throw new Error("Unknown charset format "+c);return s}function et(n,t,i){var u,o,h={},e=new r.Parser(n,t),c=e.parseCard8(),a,v,l,y,s;if(c===0)for(a=e.parseCard8(),u=0;u<a;u+=1)o=e.parseCard8(),h[o]=u;else if(c===1)for(v=e.parseCard8(),o=1,u=0;u<v;u+=1)for(l=e.parseCard8(),y=e.parseCard8(),s=l;s<=l+y;s+=1)h[s]=o,o+=1;else throw new Error("Unknown encoding format "+c);return new f.CffEncoding(h,i)}function ot(n,t,i){function p(n,t){y&&c.closePath();c.moveTo(n,t);y=!0}function v(){var t;t=r.length%2!=0;t&&!l&&(a=r.shift()+n.nominalWidthX);b+=r.length>>1;r.length=0;l=!0}function w(i){for(var ft,ot,ht,ct,st,et,nt,ut,tt,it,d,rt,k=0,g;k<i.length;){g=i[k];k+=1;switch(g){case 1:v();break;case 3:v();break;case 4:r.length>1&&!l&&(a=r.shift()+n.nominalWidthX,l=!0);f+=r.pop();p(u,f);break;case 5:while(r.length>0)u+=r.shift(),f+=r.shift(),c.lineTo(u,f);break;case 6:while(r.length>0){if(u+=r.shift(),c.lineTo(u,f),r.length===0)break;f+=r.shift();c.lineTo(u,f)}break;case 7:while(r.length>0){if(f+=r.shift(),c.lineTo(u,f),r.length===0)break;u+=r.shift();c.lineTo(u,f)}break;case 8:while(r.length>0)o=u+r.shift(),s=f+r.shift(),h=o+r.shift(),e=s+r.shift(),u=h+r.shift(),f=e+r.shift(),c.curveTo(o,s,h,e,u,f);break;case 10:st=r.pop()+n.subrsBias;et=n.subrs[st];et&&w(et);break;case 11:return;case 12:g=i[k];k+=1;switch(g){case 35:o=u+r.shift();s=f+r.shift();h=o+r.shift();e=s+r.shift();nt=h+r.shift();ut=e+r.shift();tt=nt+r.shift();it=ut+r.shift();d=tt+r.shift();rt=it+r.shift();u=d+r.shift();f=rt+r.shift();r.shift();c.curveTo(o,s,h,e,nt,ut);c.curveTo(tt,it,d,rt,u,f);break;case 34:o=u+r.shift();s=f;h=o+r.shift();e=s+r.shift();nt=h+r.shift();ut=e;tt=nt+r.shift();it=e;d=tt+r.shift();rt=f;u=d+r.shift();c.curveTo(o,s,h,e,nt,ut);c.curveTo(tt,it,d,rt,u,f);break;case 36:o=u+r.shift();s=f+r.shift();h=o+r.shift();e=s+r.shift();nt=h+r.shift();ut=e;tt=nt+r.shift();it=e;d=tt+r.shift();rt=it+r.shift();u=d+r.shift();c.curveTo(o,s,h,e,nt,ut);c.curveTo(tt,it,d,rt,u,f);break;case 37:o=u+r.shift();s=f+r.shift();h=o+r.shift();e=s+r.shift();nt=h+r.shift();ut=e+r.shift();tt=nt+r.shift();it=ut+r.shift();d=tt+r.shift();rt=it+r.shift();Math.abs(d-u)>Math.abs(rt-f)?u=d+r.shift():f=rt+r.shift();c.curveTo(o,s,h,e,nt,ut);c.curveTo(tt,it,d,rt,u,f);break;default:console.log("Glyph "+t.index+": unknown operator 1200"+g);r.length=0}break;case 14:r.length>0&&!l&&(a=r.shift()+n.nominalWidthX,l=!0);y&&(c.closePath(),y=!1);break;case 18:v();break;case 19:case 20:v();k+=b+7>>3;break;case 21:r.length>2&&!l&&(a=r.shift()+n.nominalWidthX,l=!0);f+=r.pop();u+=r.pop();p(u,f);break;case 22:r.length>1&&!l&&(a=r.shift()+n.nominalWidthX,l=!0);u+=r.pop();p(u,f);break;case 23:v();break;case 24:while(r.length>2)o=u+r.shift(),s=f+r.shift(),h=o+r.shift(),e=s+r.shift(),u=h+r.shift(),f=e+r.shift(),c.curveTo(o,s,h,e,u,f);u+=r.shift();f+=r.shift();c.lineTo(u,f);break;case 25:while(r.length>6)u+=r.shift(),f+=r.shift(),c.lineTo(u,f);o=u+r.shift();s=f+r.shift();h=o+r.shift();e=s+r.shift();u=h+r.shift();f=e+r.shift();c.curveTo(o,s,h,e,u,f);break;case 26:for(r.length%2&&(u+=r.shift());r.length>0;)o=u,s=f+r.shift(),h=o+r.shift(),e=s+r.shift(),u=h,f=e+r.shift(),c.curveTo(o,s,h,e,u,f);break;case 27:for(r.length%2&&(f+=r.shift());r.length>0;)o=u+r.shift(),s=f,h=o+r.shift(),e=s+r.shift(),u=h+r.shift(),f=e,c.curveTo(o,s,h,e,u,f);break;case 28:ft=i[k];ot=i[k+1];r.push((ft<<24|ot<<16)>>16);k+=2;break;case 29:st=r.pop()+n.gsubrsBias;et=n.gsubrs[st];et&&w(et);break;case 30:while(r.length>0){if(o=u,s=f+r.shift(),h=o+r.shift(),e=s+r.shift(),u=h+r.shift(),f=e+(r.length===1?r.shift():0),c.curveTo(o,s,h,e,u,f),r.length===0)break;o=u+r.shift();s=f;h=o+r.shift();e=s+r.shift();f=e+r.shift();u=h+(r.length===1?r.shift():0);c.curveTo(o,s,h,e,u,f)}break;case 31:while(r.length>0){if(o=u+r.shift(),s=f,h=o+r.shift(),e=s+r.shift(),f=e+r.shift(),u=h+(r.length===1?r.shift():0),c.curveTo(o,s,h,e,u,f),r.length===0)break;o=u;s=f+r.shift();h=o+r.shift();e=s+r.shift();u=h+r.shift();f=e+(r.length===1?r.shift():0);c.curveTo(o,s,h,e,u,f)}break;default:g<32?console.log("Glyph "+t.index+": unknown operator "+g):g<247?r.push(g-139):g<251?(ft=i[k],k+=1,r.push((g-247)*256+ft+108)):g<255?(ft=i[k],k+=1,r.push(-(g-251)*256-ft-108)):(ft=i[k],ot=i[k+1],ht=i[k+2],ct=i[k+3],k+=4,r.push((ft<<24|ot<<16|ht<<8|ct)/65536))}}}var o,s,h,e,c=new d.Path,r=[],b=0,l=!1,a=n.defaultWidthX,y=!1,u=0,f=0;return w(i),t.advanceWidth=a,c}function y(n){return n.length<1240?107:n.length<33900?1131:32768}function st(n,t,i){var w,u,a,h,b,k,v,l,o,d;i.tables.cff={};var g=it(n,t),nt=e(n,g.endOffset,r.bytesToString),p=e(n,nt.endOffset),c=e(n,p.endOffset,r.bytesToString),tt=e(n,c.endOffset);for(i.gsubrs=tt.objects,i.gsubrsBias=y(i.gsubrs),w=new DataView(new Uint8Array(p.objects[0]).buffer),u=rt(w,c.objects),i.tables.cff.topDict=u,a=t+u["private"][1],h=ut(n,a,u["private"][0],c.objects),i.defaultWidthX=h.defaultWidthX,i.nominalWidthX=h.nominalWidthX,h.subrs!==0?(b=a+h.subrs,k=e(n,b),i.subrs=k.objects,i.subrsBias=y(i.subrs)):(i.subrs=[],i.subrsBias=0),v=e(n,t+u.charStrings),i.nGlyphs=v.objects.length,l=ft(n,t+u.charset,i.nGlyphs,c.objects),i.cffEncoding=u.encoding===0?new f.CffEncoding(f.cffStandardEncoding,l):u.encoding===1?new f.CffEncoding(f.cffExpertEncoding,l):et(n,t+u.encoding,l),i.encoding=i.encoding||i.cffEncoding,i.glyphs=new s.GlyphSet(i),o=0;o<i.nGlyphs;o+=1)d=v.objects[o],i.glyphs.push(o,s.cffGlyphLoader(i,o,ot,d))}function p(n,t){var r,i=f.cffStandardStrings.indexOf(n);return i>=0&&(r=i),i=t.indexOf(n),i>=0?r=i+f.cffStandardStrings.length:(r=f.cffStandardStrings.length+t.length,t.push(n)),r}function ht(){return new u.Table("Header",[{name:"major",type:"Card8",value:1},{name:"minor",type:"Card8",value:0},{name:"hdrSize",type:"Card8",value:4},{name:"major",type:"Card8",value:1}])}function ct(n){var i=new u.Table("Name INDEX",[{name:"names",type:"INDEX",value:[]}]),t;for(i.names=[],t=0;t<n.length;t+=1)i.names.push({name:"name_"+t,type:"NAME",value:n[t]});return i}function w(n,t,i){for(var r,u,e={},f=0;f<n.length;f+=1)r=n[f],u=t[r.name],u===undefined||h(u,r.value)||(r.type==="SID"&&(u=p(u,i)),e[r.op]={name:r.name,type:r.type,value:u});return e}function b(n,t){var i=new u.Table("Top DICT",[{name:"dict",type:"DICT",value:{}}]);return i.dict=w(a,n,t),i}function k(n){var t=new u.Table("Top DICT INDEX",[{name:"topDicts",type:"INDEX",value:[]}]);return t.topDicts=[{name:"topDict_0",type:"TABLE",value:n}],t}function lt(n){var i=new u.Table("String INDEX",[{name:"strings",type:"INDEX",value:[]}]),t;for(i.strings=[],t=0;t<n.length;t+=1)i.strings.push({name:"string_"+t,type:"STRING",value:n[t]});return i}function at(){return new u.Table("Global Subr INDEX",[{name:"subrs",type:"INDEX",value:[]}])}function vt(n,t){for(var f,e,r=new u.Table("Charsets",[{name:"format",type:"Card8",value:0}]),i=0;i<n.length;i+=1)f=n[i],e=p(f,t),r.fields.push({name:"glyph_"+i,type:"SID",value:e});return r}function yt(n){var i=[],c=n.path,r,u,h,f,e,t,o,s;for(i.push({name:"width",type:"NUMBER",value:n.advanceWidth}),r=0,u=0,h=0;h<c.commands.length;h+=1)if(t=c.commands[h],t.type==="Q"&&(o=1/3,s=2/3,t={type:"C",x:t.x,y:t.y,x1:o*r+s*t.x1,y1:o*u+s*t.y1,x2:o*t.x+s*t.x1,y2:o*t.y+s*t.y1}),t.type==="M")f=Math.round(t.x-r),e=Math.round(t.y-u),i.push({name:"dx",type:"NUMBER",value:f}),i.push({name:"dy",type:"NUMBER",value:e}),i.push({name:"rmoveto",type:"OP",value:21}),r=Math.round(t.x),u=Math.round(t.y);else if(t.type==="L")f=Math.round(t.x-r),e=Math.round(t.y-u),i.push({name:"dx",type:"NUMBER",value:f}),i.push({name:"dy",type:"NUMBER",value:e}),i.push({name:"rlineto",type:"OP",value:5}),r=Math.round(t.x),u=Math.round(t.y);else if(t.type==="C"){var l=Math.round(t.x1-r),a=Math.round(t.y1-u),v=Math.round(t.x2-t.x1),y=Math.round(t.y2-t.y1);f=Math.round(t.x-t.x2);e=Math.round(t.y-t.y2);i.push({name:"dx1",type:"NUMBER",value:l});i.push({name:"dy1",type:"NUMBER",value:a});i.push({name:"dx2",type:"NUMBER",value:v});i.push({name:"dy2",type:"NUMBER",value:y});i.push({name:"dx",type:"NUMBER",value:f});i.push({name:"dy",type:"NUMBER",value:e});i.push({name:"rrcurveto",type:"OP",value:8});r=Math.round(t.x);u=Math.round(t.y)}return i.push({name:"endchar",type:"OP",value:14}),i}function pt(n){for(var i,f,r=new u.Table("CharStrings INDEX",[{name:"charStrings",type:"INDEX",value:[]}]),t=0;t<n.length;t+=1)i=n.get(t),f=yt(i),r.charStrings.push({name:i.name,type:"CHARSTRING",value:f});return r}function wt(n,t){var i=new u.Table("Private DICT",[{name:"dict",type:"DICT",value:{}}]);return i.dict=w(v,n,t),i}function bt(n){var t=new u.Table("Private DICT INDEX",[{name:"privateDicts",type:"INDEX",value:[]}]);return t.privateDicts=[{name:"privateDict_0",type:"TABLE",value:n}],t}function kt(n,t){for(var f,e,l,a,i=new u.Table("CFF ",[{name:"header",type:"TABLE"},{name:"nameIndex",type:"TABLE"},{name:"topDictIndex",type:"TABLE"},{name:"stringIndex",type:"TABLE"},{name:"globalSubrIndex",type:"TABLE"},{name:"charsets",type:"TABLE"},{name:"charStringsIndex",type:"TABLE"},{name:"privateDictIndex",type:"TABLE"}]),s=1/t.unitsPerEm,r={version:t.version,fullName:t.fullName,familyName:t.familyName,weight:t.weightName,fontMatrix:[s,0,0,s,0,0],charset:999,encoding:0,charStrings:999,"private":[0,999]},h=[],c,o=1;o<n.length;o+=1)c=n.get(o),h.push(c.name);return f=[],i.header=ht(),i.nameIndex=ct([t.postScriptName]),e=b(r,f),i.topDictIndex=k(e),i.globalSubrIndex=at(),i.charsets=vt(h,f),i.charStringsIndex=pt(n),l=wt({},f),i.privateDictIndex=bt(l),i.stringIndex=lt(f),a=i.header.sizeOf()+i.nameIndex.sizeOf()+i.topDictIndex.sizeOf()+i.stringIndex.sizeOf()+i.globalSubrIndex.sizeOf(),r.charset=a,r.encoding=0,r.charStrings=r.charset+i.charsets.sizeOf(),r.private[1]=r.charStrings+i.charStringsIndex.sizeOf(),e=b(r,f),i.topDictIndex=k(e),i}var f=n("../encoding"),s=n("../glyphset"),r=n("../parse"),d=n("../path"),u=n("../table"),a=[{name:"version",op:0,type:"SID"},{name:"notice",op:1,type:"SID"},{name:"copyright",op:1200,type:"SID"},{name:"fullName",op:2,type:"SID"},{name:"familyName",op:3,type:"SID"},{name:"weight",op:4,type:"SID"},{name:"isFixedPitch",op:1201,type:"number",value:0},{name:"italicAngle",op:1202,type:"number",value:0},{name:"underlinePosition",op:1203,type:"number",value:-100},{name:"underlineThickness",op:1204,type:"number",value:50},{name:"paintType",op:1205,type:"number",value:0},{name:"charstringType",op:1206,type:"number",value:2},{name:"fontMatrix",op:1207,type:["real","real","real","real","real","real"],value:[.001,0,0,.001,0,0]},{name:"uniqueId",op:13,type:"number"},{name:"fontBBox",op:5,type:["number","number","number","number"],value:[0,0,0,0]},{name:"strokeWidth",op:1208,type:"number",value:0},{name:"xuid",op:14,type:[],value:null},{name:"charset",op:15,type:"offset",value:0},{name:"encoding",op:16,type:"offset",value:0},{name:"charStrings",op:17,type:"offset",value:0},{name:"private",op:18,type:["number","offset"],value:[0,0]}],v=[{name:"subrs",op:19,type:"offset",value:0},{name:"defaultWidthX",op:20,type:"number",value:0},{name:"nominalWidthX",op:21,type:"number",value:0}];i.parse=st;i.make=kt},{"../encoding":4,"../glyphset":7,"../parse":9,"../path":10,"../table":11}],13:[function(n,t,i){"use strict";function e(n,t){var f,i={},e,y,a,o,s,c;for(i.version=r.getUShort(n,t),u.argument(i.version===0,"cmap table version should be 0."),i.numTables=r.getUShort(n,t+2),e=-1,f=0;f<i.numTables;f+=1)if(y=r.getUShort(n,t+4+f*8),a=r.getUShort(n,t+4+f*8+2),y===3&&(a===1||a===0)){e=r.getULong(n,t+4+f*8+4);break}if(e===-1)return null;o=new r.Parser(n,t+e);i.format=o.parseUShort();u.argument(i.format===4,"Only format 4 cmap tables are supported.");i.length=o.parseUShort();i.language=o.parseUShort();i.segCount=s=o.parseUShort()>>1;o.skip("uShort",3);i.glyphIndexMap={};var k=new r.Parser(n,t+e+14),d=new r.Parser(n,t+e+16+s*2),g=new r.Parser(n,t+e+16+s*4),v=new r.Parser(n,t+e+16+s*6),l=t+e+16+s*8;for(f=0;f<s-1;f+=1){var h,nt=k.parseUShort(),p=d.parseUShort(),w=g.parseShort(),b=v.parseUShort();for(c=p;c<=nt;c+=1)b!==0?(l=v.offset+v.relativeOffset-2,l+=b,l+=(c-p)*2,h=r.getUShort(n,l),h!==0&&(h=h+w&65535)):h=c+w&65535,i.glyphIndexMap[c]=h}return i}function o(n,t,i){n.segments.push({end:t,start:t,delta:-(t-i),offset:0})}function s(n){n.segments.push({end:65535,start:65535,delta:1,offset:0})}function h(n){var i,t=new f.Table("cmap",[{name:"version",type:"USHORT",value:0},{name:"numTables",type:"USHORT",value:1},{name:"platformID",type:"USHORT",value:3},{name:"encodingID",type:"USHORT",value:1},{name:"offset",type:"ULONG",value:12},{name:"format",type:"USHORT",value:4},{name:"length",type:"USHORT",value:0},{name:"language",type:"USHORT",value:0},{name:"segCountX2",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),y,u,e,r;for(t.segments=[],i=0;i<n.length;i+=1){for(y=n.get(i),u=0;u<y.unicodes.length;u+=1)o(t,y.unicodes[u],i);t.segments=t.segments.sort(function(n,t){return n.start-t.start})}s(t);e=t.segments.length;t.segCountX2=e*2;t.searchRange=Math.pow(2,Math.floor(Math.log(e)/Math.log(2)))*2;t.entrySelector=Math.log(t.searchRange/2)/Math.log(2);t.rangeShift=t.segCountX2-t.searchRange;var h=[],c=[],l=[],a=[],v=[];for(i=0;i<e;i+=1)r=t.segments[i],h=h.concat({name:"end_"+i,type:"USHORT",value:r.end}),c=c.concat({name:"start_"+i,type:"USHORT",value:r.start}),l=l.concat({name:"idDelta_"+i,type:"SHORT",value:r.delta}),a=a.concat({name:"idRangeOffset_"+i,type:"USHORT",value:r.offset}),r.glyphId!==undefined&&(v=v.concat({name:"glyph_"+i,type:"USHORT",value:r.glyphId}));return t.fields=t.fields.concat(h),t.fields.push({name:"reservedPad",type:"USHORT",value:0}),t.fields=t.fields.concat(c),t.fields=t.fields.concat(l),t.fields=t.fields.concat(a),t.fields=t.fields.concat(v),t.length=14+h.length*2+2+c.length*2+l.length*2+a.length*2+v.length*2,t}var u=n("../check"),r=n("../parse"),f=n("../table");i.parse=e;i.make=h},{"../check":2,"../parse":9,"../table":11}],14:[function(n,t,i){"use strict";function f(n,t,i,r,u){var f;return(t&r)>0?(f=n.parseByte(),(t&u)==0&&(f=-f),f=i+f):f=(t&u)>0?i:i+n.parseShort(),f}function s(n,t,i){var r=new e.Parser(t,i),h,c,o,v,a,d,p,y,l,w,b,k,s;if(n.numberOfContours=r.parseShort(),n.xMin=r.parseShort(),n.yMin=r.parseShort(),n.xMax=r.parseShort(),n.yMax=r.parseShort(),n.numberOfContours>0){for(v=n.endPointIndices=[],o=0;o<n.numberOfContours;o+=1)v.push(r.parseUShort());for(n.instructionLength=r.parseUShort(),n.instructions=[],o=0;o<n.instructionLength;o+=1)n.instructions.push(r.parseByte());for(a=v[v.length-1]+1,h=[],o=0;o<a;o+=1)if(c=r.parseByte(),h.push(c),(c&8)>0)for(d=r.parseByte(),p=0;p<d;p+=1)h.push(c),o+=1;if(u.argument(h.length===a,"Bad flags."),v.length>0){if(y=[],a>0){for(o=0;o<a;o+=1)c=h[o],l={},l.onCurve=!!(c&1),l.lastPointOfContour=v.indexOf(o)>=0,y.push(l);for(w=0,o=0;o<a;o+=1)c=h[o],l=y[o],l.x=f(r,c,w,2,16),w=l.x;for(b=0,o=0;o<a;o+=1)c=h[o],l=y[o],l.y=f(r,c,b,4,32),b=l.y}n.points=y}else n.points=[]}else if(n.numberOfContours===0)n.points=[];else for(n.isComposite=!0,n.points=[],n.components=[],k=!0;k;)h=r.parseUShort(),s={glyphIndex:r.parseUShort(),xScale:1,scale01:0,scale10:0,yScale:1,dx:0,dy:0},(h&1)>0?(s.dx=r.parseShort(),s.dy=r.parseShort()):(s.dx=r.parseChar(),s.dy=r.parseChar()),(h&8)>0?s.xScale=s.yScale=r.parseF2Dot14():(h&64)>0?(s.xScale=r.parseF2Dot14(),s.yScale=r.parseF2Dot14()):(h&128)>0&&(s.xScale=r.parseF2Dot14(),s.scale01=r.parseF2Dot14(),s.scale10=r.parseF2Dot14(),s.yScale=r.parseF2Dot14()),n.components.push(s),k=!!(h&32)}function h(n,t){for(var i,f,u=[],r=0;r<n.length;r+=1)i=n[r],f={x:t.xScale*i.x+t.scale01*i.y+t.dx,y:t.scale10*i.x+t.yScale*i.y+t.dy,onCurve:i.onCurve,lastPointOfContour:i.lastPointOfContour},u.push(f);return u}function c(n){for(var r,f=[],t=[],i=0;i<n.length;i+=1)r=n[i],t.push(r),r.lastPointOfContour&&(f.push(t),t=[]);return u.argument(t.length===0,"There are still points left in the current contour."),f}function l(n){var u=new o.Path,a,l,s,i,f,y;if(!n)return u;for(a=c(n),l=0;l<a.length;l+=1){var e=a[l],t=e[0],h=e[e.length-1],r,v;for(t.onCurve?(r=null,v=!0):(t=h.onCurve?h:{x:(t.x+h.x)/2,y:(t.y+h.y)/2},r=t,v=!1),u.moveTo(t.x,t.y),s=v?1:0;s<e.length;s+=1)if(i=e[s],f=s===0?t:e[s-1],f.onCurve&&i.onCurve)u.lineTo(i.x,i.y);else if(f.onCurve&&!i.onCurve)r=i;else if(f.onCurve||i.onCurve)if(!f.onCurve&&i.onCurve)u.quadraticCurveTo(r.x,r.y,i.x,i.y),r=null;else throw new Error("Invalid state.");else y={x:(f.x+i.x)/2,y:(f.y+i.y)/2},u.quadraticCurveTo(f.x,f.y,y.x,y.y),r=i;t!==h&&(r?u.quadraticCurveTo(r.x,r.y,t.x,t.y):u.lineTo(t.x,t.y))}return u.closePath(),u}function a(n,t){var i,r,u,f;if(t.isComposite)for(i=0;i<t.components.length;i+=1)r=t.components[i],u=n.get(r.glyphIndex),u.points&&(f=h(u.points,r),t.points=t.points.concat(f));return l(t.points)}function v(n,t,i,u){for(var e=new r.GlyphSet(u),o,h,f=0;f<i.length-1;f+=1)o=i[f],h=i[f+1],o!==h?e.push(f,r.ttfGlyphLoader(u,f,s,n,t+o,a)):e.push(f,r.glyphLoader(u,f));return e}var u=n("../check"),r=n("../glyphset"),e=n("../parse"),o=n("../path");i.parse=v},{"../check":2,"../glyphset":7,"../parse":9,"../path":10}],15:[function(n,t,i){"use strict";function u(n,t){for(var i=new r.Parser(n,t),e=i.parseUShort(),u=[],f=0;f<e;f++)u[i.parseTag()]={offset:i.parseUShort()};return u}function o(n,t){var i=new r.Parser(n,t),e=i.parseUShort(),o=i.parseUShort(),f,u;if(e===1)return i.parseUShortList(o);if(e===2){for(f=[];o--;){var s=i.parseUShort(),h=i.parseUShort(),c=i.parseUShort();for(u=s;u<=h;u++)f[c++]=u}return f}}function f(n,t){var i=new r.Parser(n,t),e=i.parseUShort(),u;if(e===1){var h=i.parseUShort(),c=i.parseUShort(),l=i.parseUShortList(c);return function(n){return l[n-h]||0}}if(e===2){var a=i.parseUShort(),f=[],o=[],s=[];for(u=0;u<a;u++)f[u]=i.parseUShort(),o[u]=i.parseUShort(),s[u]=i.parseUShort();return function(n){for(var t=0,r=f.length-1,i;t<r;)i=t+r+1>>1,n<f[i]?r=i-1:t=i;return f[t]<=n&&n<=o[t]?s[t]||0:0}}}function s(n,t){var i=new r.Parser(n,t),w=i.parseUShort(),ut=i.parseUShort(),l=o(n,t+ut),a=i.parseUShort(),v=i.parseUShort(),h,b,k,e,y,s,nt,tt,u,rt,c,p;if(a===4&&v===0){if(k={},w===1){var d=i.parseUShort(),g=[],ft=i.parseOffset16List(d);for(e=0;e<d;e++){if(y=ft[e],s=k[y],!s)for(s={},i.relativeOffset=y,nt=i.parseUShort();nt--;)tt=i.parseUShort(),a&&(h=i.parseShort()),v&&(b=i.parseShort()),s[tt]=h;g[l[e]]=s}return function(n,t){var i=g[n];if(i)return i[t]}}if(w===2){var et=i.parseUShort(),ot=i.parseUShort(),st=i.parseUShort(),ht=i.parseUShort(),ct=f(n,t+et),lt=f(n,t+ot),it=[];for(u=0;u<st;u++)for(rt=it[u]=[],c=0;c<ht;c++)a&&(h=i.parseShort()),v&&(b=i.parseShort()),rt[c]=h;for(p={},u=0;u<l.length;u++)p[l[u]]=1;return function(n,t){if(p[n]){var r=ct(n),u=lt(t),i=it[r];if(i)return i[u]}}}}}function h(n,t){var i=new r.Parser(n,t),e=i.parseUShort(),o=i.parseUShort(),l=o&16,h=i.parseUShort(),a=i.parseOffset16List(h),c={lookupType:e,lookupFlag:o,markFilteringSet:l?i.parseUShort():-1},u,f;if(e===2){for(u=[],f=0;f<h;f++)u.push(s(n,t+a[f]));c.getKerningValue=function(n,t){for(var r,i=u.length;i--;)if(r=u[i](n,t),r!==undefined)return r;return 0}}return c}function c(n,t,i){var f=new r.Parser(n,t),a=f.parseFixed(),s,o,c;e.argument(a===1,"Unsupported GPOS table version.");u(n,t+f.parseUShort());u(n,t+f.parseUShort());s=f.parseUShort();f.relativeOffset=s;var l=f.parseUShort(),v=f.parseOffset16List(l),y=t+s;for(o=0;o<l;o++)c=h(n,y+v[o]),c.lookupType!==2||i.getGposKerningValue||(i.getGposKerningValue=c.getKerningValue)}var e=n("../check"),r=n("../parse");i.parse=c},{"../check":2,"../parse":9}],16:[function(n,t,i){"use strict";function e(n,t){var i={},f=new u.Parser(n,t);return i.version=f.parseVersion(),i.fontRevision=Math.round(f.parseFixed()*1e3)/1e3,i.checkSumAdjustment=f.parseULong(),i.magicNumber=f.parseULong(),r.argument(i.magicNumber===1594834165,"Font header has wrong magic number."),i.flags=f.parseUShort(),i.unitsPerEm=f.parseUShort(),i.created=f.parseLongDateTime(),i.modified=f.parseLongDateTime(),i.xMin=f.parseShort(),i.yMin=f.parseShort(),i.xMax=f.parseShort(),i.yMax=f.parseShort(),i.macStyle=f.parseUShort(),i.lowestRecPPEM=f.parseUShort(),i.fontDirectionHint=f.parseShort(),i.indexToLocFormat=f.parseShort(),i.glyphDataFormat=f.parseShort(),i}function o(n){return new f.Table("head",[{name:"version",type:"FIXED",value:65536},{name:"fontRevision",type:"FIXED",value:65536},{name:"checkSumAdjustment",type:"ULONG",value:0},{name:"magicNumber",type:"ULONG",value:1594834165},{name:"flags",type:"USHORT",value:0},{name:"unitsPerEm",type:"USHORT",value:1e3},{name:"created",type:"LONGDATETIME",value:0},{name:"modified",type:"LONGDATETIME",value:0},{name:"xMin",type:"SHORT",value:0},{name:"yMin",type:"SHORT",value:0},{name:"xMax",type:"SHORT",value:0},{name:"yMax",type:"SHORT",value:0},{name:"macStyle",type:"USHORT",value:0},{name:"lowestRecPPEM",type:"USHORT",value:0},{name:"fontDirectionHint",type:"SHORT",value:2},{name:"indexToLocFormat",type:"SHORT",value:0},{name:"glyphDataFormat",type:"SHORT",value:0}],n)}var r=n("../check"),u=n("../parse"),f=n("../table");i.parse=e;i.make=o},{"../check":2,"../parse":9,"../table":11}],17:[function(n,t,i){"use strict";function f(n,t){var i={},u=new r.Parser(n,t);return i.version=u.parseVersion(),i.ascender=u.parseShort(),i.descender=u.parseShort(),i.lineGap=u.parseShort(),i.advanceWidthMax=u.parseUShort(),i.minLeftSideBearing=u.parseShort(),i.minRightSideBearing=u.parseShort(),i.xMaxExtent=u.parseShort(),i.caretSlopeRise=u.parseShort(),i.caretSlopeRun=u.parseShort(),i.caretOffset=u.parseShort(),u.relativeOffset+=8,i.metricDataFormat=u.parseShort(),i.numberOfHMetrics=u.parseUShort(),i}function e(n){return new u.Table("hhea",[{name:"version",type:"FIXED",value:65536},{name:"ascender",type:"FWORD",value:0},{name:"descender",type:"FWORD",value:0},{name:"lineGap",type:"FWORD",value:0},{name:"advanceWidthMax",type:"UFWORD",value:0},{name:"minLeftSideBearing",type:"FWORD",value:0},{name:"minRightSideBearing",type:"FWORD",value:0},{name:"xMaxExtent",type:"FWORD",value:0},{name:"caretSlopeRise",type:"SHORT",value:1},{name:"caretSlopeRun",type:"SHORT",value:0},{name:"caretOffset",type:"SHORT",value:0},{name:"reserved1",type:"SHORT",value:0},{name:"reserved2",type:"SHORT",value:0},{name:"reserved3",type:"SHORT",value:0},{name:"reserved4",type:"SHORT",value:0},{name:"metricDataFormat",type:"SHORT",value:0},{name:"numberOfHMetrics",type:"USHORT",value:0}],n)}var r=n("../parse"),u=n("../table");i.parse=f;i.make=e},{"../parse":9,"../table":11}],18:[function(n,t,i){"use strict";function f(n,t,i,u,f){for(var o,s,h,c=new r.Parser(n,t),e=0;e<u;e+=1)e<i&&(s=c.parseUShort(),h=c.parseShort()),o=f.get(e),o.advanceWidth=s,o.leftSideBearing=h}function e(n){for(var i=new u.Table("hmtx",[]),t=0;t<n.length;t+=1){var r=n.get(t),f=r.advanceWidth||0,e=r.leftSideBearing||0;i.fields.push({name:"advanceWidth_"+t,type:"USHORT",value:f});i.fields.push({name:"leftSideBearing_"+t,type:"SHORT",value:e})}return i}var r=n("../parse"),u=n("../table");i.parse=f;i.make=e},{"../parse":9,"../table":11}],19:[function(n,t,i){"use strict";function f(n,t){var e={},i=new u.Parser(n,t),h=i.parseUShort(),o,s,f;for(r.argument(h===0,"Unsupported kern table version."),i.skip("uShort",1),o=i.parseUShort(),r.argument(o===0,"Unsupported kern sub-table version."),i.skip("uShort",2),s=i.parseUShort(),i.skip("uShort",3),f=0;f<s;f+=1){var c=i.parseUShort(),l=i.parseUShort(),a=i.parseShort();e[c+","+l]=a}return e}var r=n("../check"),u=n("../parse");i.parse=f},{"../check":2,"../parse":9}],20:[function(n,t,i){"use strict";function u(n,t,i,u){for(var e,f=new r.Parser(n,t),h=u?f.parseUShort:f.parseULong,o=[],s=0;s<i+1;s+=1)e=h.call(f),u&&(e*=2),o.push(e);return o}var r=n("../parse");i.parse=u},{"../parse":9}],21:[function(n,t,i){"use strict";function f(n,t){var i={},u=new r.Parser(n,t);return i.version=u.parseVersion(),i.numGlyphs=u.parseUShort(),i.version===1&&(i.maxPoints=u.parseUShort(),i.maxContours=u.parseUShort(),i.maxCompositePoints=u.parseUShort(),i.maxCompositeContours=u.parseUShort(),i.maxZones=u.parseUShort(),i.maxTwilightPoints=u.parseUShort(),i.maxStorage=u.parseUShort(),i.maxFunctionDefs=u.parseUShort(),i.maxInstructionDefs=u.parseUShort(),i.maxStackElements=u.parseUShort(),i.maxSizeOfInstructions=u.parseUShort(),i.maxComponentElements=u.parseUShort(),i.maxComponentDepth=u.parseUShort()),i}function e(n){return new u.Table("maxp",[{name:"version",type:"FIXED",value:20480},{name:"numGlyphs",type:"USHORT",value:n}])}var r=n("../parse"),u=n("../table");i.parse=f;i.make=e},{"../parse":9,"../table":11}],22:[function(n,t,i){"use strict";function s(n,t){var u={},i=new f.Parser(n,t),o,s,v,e,h;u.format=i.parseUShort();var y=i.parseUShort(),p=i.offset+i.parseUShort(),c=0;for(o=0;o<y;o++){var w=i.parseUShort(),b=i.parseUShort(),k=i.parseUShort(),d=i.parseUShort(),l=r[d],g=i.parseUShort(),a=i.parseUShort();if(w===3&&b===1&&k===1033){for(s=[],v=g/2,e=0;e<v;e++,a+=2)s[e]=f.getShort(n,p+a);h=String.fromCharCode.apply(null,s);l?u[l]=h:(c++,u["unknown"+c]=h)}}return u.format===1&&(u.langTagCount=i.parseUShort()),u}function o(n,t,i,r,u,f){return new e.Table("NameRecord",[{name:"platformID",type:"USHORT",value:n},{name:"encodingID",type:"USHORT",value:t},{name:"languageID",type:"USHORT",value:i},{name:"nameID",type:"USHORT",value:r},{name:"length",type:"USHORT",value:u},{name:"offset",type:"USHORT",value:f}])}function h(n,t,i,r){var f=u.STRING(i);return n.records.push(o(1,0,0,t,f.length,r)),n.strings.push(f),r+f.length}function c(n,t,i,r){var f=u.UTF16(i);return n.records.push(o(3,1,1033,t,f.length,r)),n.strings.push(f),r+f.length}function l(n){var i=new e.Table("name",[{name:"format",type:"USHORT",value:0},{name:"count",type:"USHORT",value:0},{name:"stringOffset",type:"USHORT",value:0}]),u,t,f;for(i.records=[],i.strings=[],u=0,t=0;t<r.length;t+=1)n[r[t]]!==undefined&&(f=n[r[t]],u=h(i,t,f,u));for(t=0;t<r.length;t+=1)n[r[t]]!==undefined&&(f=n[r[t]],u=c(i,t,f,u));for(i.count=i.records.length,i.stringOffset=6+i.count*12,t=0;t<i.records.length;t+=1)i.fields.push({name:"record_"+t,type:"TABLE",value:i.records[t]});for(t=0;t<i.strings.length;t+=1)i.fields.push({name:"string_"+t,type:"LITERAL",value:i.strings[t]});return i}var u=n("../types").encode,f=n("../parse"),e=n("../table"),r=["copyright","fontFamily","fontSubfamily","uniqueID","fullName","version","postScriptName","trademark","manufacturer","designer","description","manufacturerURL","designerURL","licence","licenceURL","reserved","preferredFamily","preferredSubfamily","compatibleFullName","sampleText","postScriptFindFontName","wwsFamily","wwsSubfamily"];i.parse=s;i.make=l},{"../parse":9,"../table":11,"../types":26}],23:[function(n,t,i){"use strict";function e(n){for(var i,t=0;t<r.length;t+=1)if(i=r[t],n>=i.begin&&n<i.end)return t;return-1}function o(n,t){var i={},r=new u.Parser(n,t),f;for(i.version=r.parseUShort(),i.xAvgCharWidth=r.parseShort(),i.usWeightClass=r.parseUShort(),i.usWidthClass=r.parseUShort(),i.fsType=r.parseUShort(),i.ySubscriptXSize=r.parseShort(),i.ySubscriptYSize=r.parseShort(),i.ySubscriptXOffset=r.parseShort(),i.ySubscriptYOffset=r.parseShort(),i.ySuperscriptXSize=r.parseShort(),i.ySuperscriptYSize=r.parseShort(),i.ySuperscriptXOffset=r.parseShort(),i.ySuperscriptYOffset=r.parseShort(),i.yStrikeoutSize=r.parseShort(),i.yStrikeoutPosition=r.parseShort(),i.sFamilyClass=r.parseShort(),i.panose=[],f=0;f<10;f++)i.panose[f]=r.parseByte();return i.ulUnicodeRange1=r.parseULong(),i.ulUnicodeRange2=r.parseULong(),i.ulUnicodeRange3=r.parseULong(),i.ulUnicodeRange4=r.parseULong(),i.achVendID=String.fromCharCode(r.parseByte(),r.parseByte(),r.parseByte(),r.parseByte()),i.fsSelection=r.parseUShort(),i.usFirstCharIndex=r.parseUShort(),i.usLastCharIndex=r.parseUShort(),i.sTypoAscender=r.parseShort(),i.sTypoDescender=r.parseShort(),i.sTypoLineGap=r.parseShort(),i.usWinAscent=r.parseUShort(),i.usWinDescent=r.parseUShort(),i.version>=1&&(i.ulCodePageRange1=r.parseULong(),i.ulCodePageRange2=r.parseULong()),i.version>=2&&(i.sxHeight=r.parseShort(),i.sCapHeight=r.parseShort(),i.usDefaultChar=r.parseUShort(),i.usBreakChar=r.parseUShort(),i.usMaxContent=r.parseUShort()),i}function s(n){return new f.Table("OS/2",[{name:"version",type:"USHORT",value:3},{name:"xAvgCharWidth",type:"SHORT",value:0},{name:"usWeightClass",type:"USHORT",value:0},{name:"usWidthClass",type:"USHORT",value:0},{name:"fsType",type:"USHORT",value:0},{name:"ySubscriptXSize",type:"SHORT",value:650},{name:"ySubscriptYSize",type:"SHORT",value:699},{name:"ySubscriptXOffset",type:"SHORT",value:0},{name:"ySubscriptYOffset",type:"SHORT",value:140},{name:"ySuperscriptXSize",type:"SHORT",value:650},{name:"ySuperscriptYSize",type:"SHORT",value:699},{name:"ySuperscriptXOffset",type:"SHORT",value:0},{name:"ySuperscriptYOffset",type:"SHORT",value:479},{name:"yStrikeoutSize",type:"SHORT",value:49},{name:"yStrikeoutPosition",type:"SHORT",value:258},{name:"sFamilyClass",type:"SHORT",value:0},{name:"bFamilyType",type:"BYTE",value:0},{name:"bSerifStyle",type:"BYTE",value:0},{name:"bWeight",type:"BYTE",value:0},{name:"bProportion",type:"BYTE",value:0},{name:"bContrast",type:"BYTE",value:0},{name:"bStrokeVariation",type:"BYTE",value:0},{name:"bArmStyle",type:"BYTE",value:0},{name:"bLetterform",type:"BYTE",value:0},{name:"bMidline",type:"BYTE",value:0},{name:"bXHeight",type:"BYTE",value:0},{name:"ulUnicodeRange1",type:"ULONG",value:0},{name:"ulUnicodeRange2",type:"ULONG",value:0},{name:"ulUnicodeRange3",type:"ULONG",value:0},{name:"ulUnicodeRange4",type:"ULONG",value:0},{name:"achVendID",type:"CHARARRAY",value:"XXXX"},{name:"fsSelection",type:"USHORT",value:0},{name:"usFirstCharIndex",type:"USHORT",value:0},{name:"usLastCharIndex",type:"USHORT",value:0},{name:"sTypoAscender",type:"SHORT",value:0},{name:"sTypoDescender",type:"SHORT",value:0},{name:"sTypoLineGap",type:"SHORT",value:0},{name:"usWinAscent",type:"USHORT",value:0},{name:"usWinDescent",type:"USHORT",value:0},{name:"ulCodePageRange1",type:"ULONG",value:0},{name:"ulCodePageRange2",type:"ULONG",value:0},{name:"sxHeight",type:"SHORT",value:0},{name:"sCapHeight",type:"SHORT",value:0},{name:"usDefaultChar",type:"USHORT",value:0},{name:"usBreakChar",type:"USHORT",value:0},{name:"usMaxContext",type:"USHORT",value:0}],n)}var u=n("../parse"),f=n("../table"),r=[{begin:0,end:127},{begin:128,end:255},{begin:256,end:383},{begin:384,end:591},{begin:592,end:687},{begin:688,end:767},{begin:768,end:879},{begin:880,end:1023},{begin:11392,end:11519},{begin:1024,end:1279},{begin:1328,end:1423},{begin:1424,end:1535},{begin:42240,end:42559},{begin:1536,end:1791},{begin:1984,end:2047},{begin:2304,end:2431},{begin:2432,end:2559},{begin:2560,end:2687},{begin:2688,end:2815},{begin:2816,end:2943},{begin:2944,end:3071},{begin:3072,end:3199},{begin:3200,end:3327},{begin:3328,end:3455},{begin:3584,end:3711},{begin:3712,end:3839},{begin:4256,end:4351},{begin:6912,end:7039},{begin:4352,end:4607},{begin:7680,end:7935},{begin:7936,end:8191},{begin:8192,end:8303},{begin:8304,end:8351},{begin:8352,end:8399},{begin:8400,end:8447},{begin:8448,end:8527},{begin:8528,end:8591},{begin:8592,end:8703},{begin:8704,end:8959},{begin:8960,end:9215},{begin:9216,end:9279},{begin:9280,end:9311},{begin:9312,end:9471},{begin:9472,end:9599},{begin:9600,end:9631},{begin:9632,end:9727},{begin:9728,end:9983},{begin:9984,end:10175},{begin:12288,end:12351},{begin:12352,end:12447},{begin:12448,end:12543},{begin:12544,end:12591},{begin:12592,end:12687},{begin:43072,end:43135},{begin:12800,end:13055},{begin:13056,end:13311},{begin:44032,end:55215},{begin:55296,end:57343},{begin:67840,end:67871},{begin:19968,end:40959},{begin:57344,end:63743},{begin:12736,end:12783},{begin:64256,end:64335},{begin:64336,end:65023},{begin:65056,end:65071},{begin:65040,end:65055},{begin:65104,end:65135},{begin:65136,end:65279},{begin:65280,end:65519},{begin:65520,end:65535},{begin:3840,end:4095},{begin:1792,end:1871},{begin:1920,end:1983},{begin:3456,end:3583},{begin:4096,end:4255},{begin:4608,end:4991},{begin:5024,end:5119},{begin:5120,end:5759},{begin:5760,end:5791},{begin:5792,end:5887},{begin:6016,end:6143},{begin:6144,end:6319},{begin:10240,end:10495},{begin:40960,end:42127},{begin:5888,end:5919},{begin:66304,end:66351},{begin:66352,end:66383},{begin:66560,end:66639},{begin:118784,end:119039},{begin:119808,end:120831},{begin:1044480,end:1048573},{begin:65024,end:65039},{begin:917504,end:917631},{begin:6400,end:6479},{begin:6480,end:6527},{begin:6528,end:6623},{begin:6656,end:6687},{begin:11264,end:11359},{begin:11568,end:11647},{begin:19904,end:19967},{begin:43008,end:43055},{begin:65536,end:65663},{begin:65856,end:65935},{begin:66432,end:66463},{begin:66464,end:66527},{begin:66640,end:66687},{begin:66688,end:66735},{begin:67584,end:67647},{begin:68096,end:68191},{begin:119552,end:119647},{begin:73728,end:74751},{begin:119648,end:119679},{begin:7040,end:7103},{begin:7168,end:7247},{begin:7248,end:7295},{begin:43136,end:43231},{begin:43264,end:43311},{begin:43312,end:43359},{begin:43520,end:43615},{begin:65936,end:65999},{begin:66e3,end:66047},{begin:66208,end:66271},{begin:127024,end:127135}];i.unicodeRanges=r;i.getUnicodeRange=e;i.parse=o;i.make=s},{"../parse":9,"../table":11}],24:[function(n,t,i){"use strict";function e(n,t){var i={},f=new u.Parser(n,t),e,o;i.version=f.parseVersion();i.italicAngle=f.parseFixed();i.underlinePosition=f.parseShort();i.underlineThickness=f.parseShort();i.isFixedPitch=f.parseULong();i.minMemType42=f.parseULong();i.maxMemType42=f.parseULong();i.minMemType1=f.parseULong();i.maxMemType1=f.parseULong();switch(i.version){case 1:i.names=r.standardNames.slice();break;case 2:for(i.numberOfGlyphs=f.parseUShort(),i.glyphNameIndex=new Array(i.numberOfGlyphs),e=0;e<i.numberOfGlyphs;e++)i.glyphNameIndex[e]=f.parseUShort();for(i.names=[],e=0;e<i.numberOfGlyphs;e++)i.glyphNameIndex[e]>=r.standardNames.length&&(o=f.parseChar(),i.names.push(f.parseString(o)));break;case 2.5:for(i.numberOfGlyphs=f.parseUShort(),i.offset=new Array(i.numberOfGlyphs),e=0;e<i.numberOfGlyphs;e++)i.offset[e]=f.parseChar()}return i}function o(){return new f.Table("post",[{name:"version",type:"FIXED",value:196608},{name:"italicAngle",type:"FIXED",value:0},{name:"underlinePosition",type:"FWORD",value:0},{name:"underlineThickness",type:"FWORD",value:0},{name:"isFixedPitch",type:"ULONG",value:0},{name:"minMemType42",type:"ULONG",value:0},{name:"maxMemType42",type:"ULONG",value:0},{name:"minMemType1",type:"ULONG",value:0},{name:"maxMemType1",type:"ULONG",value:0}])}var r=n("../encoding"),u=n("../parse"),f=n("../table");i.parse=e;i.make=o},{"../encoding":4,"../parse":9,"../table":11}],25:[function(n,t,i){"use strict";function o(n){return Math.log(n)/Math.log(2)|0}function r(n){for(var i,t;n.length%4!=0;)n.push(0);for(i=0,t=0;t<n.length;t+=4)i+=(n[t]<<24)+(n[t+1]<<16)+(n[t+2]<<8)+n[t+3];return i%Math.pow(2,32)}function s(n,t,i,r){return new f.Table("Table Record",[{name:"tag",type:"TAG",value:n!==undefined?n:""},{name:"checkSum",type:"ULONG",value:t!==undefined?t:0},{name:"offset",type:"ULONG",value:i!==undefined?i:0},{name:"length",type:"ULONG",value:r!==undefined?r:0}])}function h(n){var t=new f.Table("sfnt",[{name:"version",type:"TAG",value:"OTTO"},{name:"numTables",type:"USHORT",value:0},{name:"searchRange",type:"USHORT",value:0},{name:"entrySelector",type:"USHORT",value:0},{name:"rangeShift",type:"USHORT",value:0}]),l,c,i,v,y;t.tables=n;t.numTables=n.length;l=Math.pow(2,o(t.numTables));t.searchRange=16*l;t.entrySelector=o(l);t.rangeShift=t.numTables*16-t.searchRange;for(var a=[],h=[],e=t.sizeOf()+s().sizeOf()*t.numTables;e%4!=0;)e+=1,h.push({name:"padding",type:"BYTE",value:0});for(c=0;c<n.length;c+=1)for(i=n[c],u.argument(i.tableName.length===4,"Table name"+i.tableName+" is invalid."),v=i.sizeOf(),y=s(i.tableName,r(i.encode()),e,v),a.push({name:y.tag+" Table Record",type:"TABLE",value:y}),h.push({name:i.tableName+" table",type:"TABLE",value:i}),e+=v,u.argument(!isNaN(e),"Something went wrong calculating the offset.");e%4!=0;)e+=1,h.push({name:"padding",type:"BYTE",value:0});return a.sort(function(n,t){return n.value.tag>t.value.tag?1:-1}),t.fields=t.fields.concat(a),t.fields=t.fields.concat(h),t}function c(n,t,i){for(var u,f,r=0;r<t.length;r+=1)if(u=n.charToGlyphIndex(t[r]),u>0)return f=n.glyphs.get(u),f.getMetrics();return i}function d(n){for(var i=0,t=0;t<n.length;t+=1)i+=n[t];return i/n.length}function g(n){for(var s,o,i,f,t,et=[],ot=[],st=[],ht=[],nt=[],tt=[],ct=[],g,it=0,lt=0,at=0,vt=0,yt=0,u=0;u<n.glyphs.length;u+=1){if(s=n.glyphs.get(u),o=s.unicode|0,(g>o||g===null)&&(g=o),it<o&&(it=o),i=e.getUnicodeRange(o),i<32)lt|=1<<i;else if(i<64)at|=1<<i-32;else if(i<96)vt|=1<<i-64;else if(i<123)yt|=1<<i-96;else throw new Error("Unicode ranges bits > 123 are reserved for internal usage");s.name!==".notdef"&&(f=s.getMetrics(),et.push(f.xMin),ot.push(f.yMin),st.push(f.xMax),ht.push(f.yMax),tt.push(f.leftSideBearing),ct.push(f.rightSideBearing),nt.push(s.advanceWidth))}t={xMin:Math.min.apply(null,et),yMin:Math.min.apply(null,ot),xMax:Math.max.apply(null,st),yMax:Math.max.apply(null,ht),advanceWidthMax:Math.max.apply(null,nt),advanceWidthAvg:d(nt),minLeftSideBearing:Math.min.apply(null,tt),maxLeftSideBearing:Math.max.apply(null,tt),minRightSideBearing:Math.min.apply(null,ct)};t.ascender=n.ascender!==undefined?n.ascender:t.yMax;t.descender=n.descender!==undefined?n.descender:t.yMin;var bt=v.make({unitsPerEm:n.unitsPerEm,xMin:t.xMin,yMin:t.yMin,xMax:t.xMax,yMax:t.yMax}),kt=y.make({ascender:t.ascender,descender:t.descender,advanceWidthMax:t.advanceWidthMax,minLeftSideBearing:t.minLeftSideBearing,minRightSideBearing:t.minRightSideBearing,xMaxExtent:t.maxLeftSideBearing+(t.xMax-t.xMin),numberOfHMetrics:n.glyphs.length}),dt=w.make(n.glyphs.length),gt=e.make({xAvgCharWidth:Math.round(t.advanceWidthAvg),usWeightClass:500,usWidthClass:5,usFirstCharIndex:g,usLastCharIndex:it,ulUnicodeRange1:lt,ulUnicodeRange2:at,ulUnicodeRange3:vt,ulUnicodeRange4:yt,sTypoAscender:t.ascender,sTypoDescender:t.descender,sTypoLineGap:0,usWinAscent:t.ascender,usWinDescent:-t.descender,sxHeight:c(n,"xyvw",{yMax:0}).yMax,sCapHeight:c(n,"HIKLEFJMNTZBDPRAGOQSUVWXY",t).yMax,usBreakChar:n.hasChar(" ")?32:0}),ni=p.make(n.glyphs),ti=l.make(n.glyphs),rt=n.familyName+" "+n.styleName,pt=n.familyName.replace(/\s/g,"")+"-"+n.styleName,ii=b.make({copyright:n.copyright,fontFamily:n.familyName,fontSubfamily:n.styleName,uniqueID:n.manufacturer+":"+rt,fullName:rt,version:n.version,postScriptName:pt,trademark:n.trademark,manufacturer:n.manufacturer,designer:n.designer,description:n.description,manufacturerURL:n.manufacturerURL,designerURL:n.designerURL,license:n.license,licenseURL:n.licenseURL,preferredFamily:n.familyName,preferredSubfamily:n.styleName}),ri=k.make(),ui=a.make(n.glyphs,{version:n.version,fullName:rt,familyName:n.familyName,weightName:n.styleName,postScriptName:pt,unitsPerEm:n.unitsPerEm}),fi=[bt,kt,dt,gt,ii,ti,ri,ui,ni],ut=h(fi),ei=ut.encode(),oi=r(ei),ft=ut.fields,wt=!1;for(u=0;u<ft.length;u+=1)if(ft[u].name==="head table"){ft[u].value.checkSumAdjustment=2981146554-oi;wt=!0;break}if(!wt)throw new Error("Could not find head table with checkSum to adjust.");return ut}var u=n("../check"),f=n("../table"),l=n("./cmap"),a=n("./cff"),v=n("./head"),y=n("./hhea"),p=n("./hmtx"),w=n("./maxp"),b=n("./name"),e=n("./os2"),k=n("./post");i.computeCheckSum=r;i.make=h;i.fontToTable=g},{"../check":2,"../table":11,"./cff":12,"./cmap":13,"./head":16,"./hhea":17,"./hmtx":18,"./maxp":21,"./name":22,"./os2":23,"./post":24}],26:[function(n,t,i){"use strict";function f(n){return function(){return n}}var o=n("./check"),s=32768,h=2147483648,r={},u={},e;r.BYTE=function(n){return o.argument(n>=0&&n<=255,"Byte value should be between 0 and 255."),[n]};u.BYTE=f(1);r.CHAR=function(n){return[n.charCodeAt(0)]};u.BYTE=f(1);r.CHARARRAY=function(n){for(var i=[],t=0;t<n.length;t+=1)i.push(n.charCodeAt(t));return i};u.CHARARRAY=function(n){return n.length};r.USHORT=function(n){return[n>>8&255,n&255]};u.USHORT=f(2);r.SHORT=function(n){return n>=s&&(n=-(2*s-n)),[n>>8&255,n&255]};u.SHORT=f(2);r.UINT24=function(n){return[n>>16&255,n>>8&255,n&255]};u.UINT24=f(3);r.ULONG=function(n){return[n>>24&255,n>>16&255,n>>8&255,n&255]};u.ULONG=f(4);r.LONG=function(n){return n>=h&&(n=-(2*h-n)),[n>>24&255,n>>16&255,n>>8&255,n&255]};u.LONG=f(4);r.FIXED=r.ULONG;u.FIXED=u.ULONG;r.FWORD=r.SHORT;u.FWORD=u.SHORT;r.UFWORD=r.USHORT;u.UFWORD=u.USHORT;r.LONGDATETIME=function(){return[0,0,0,0,0,0,0,0]};u.LONGDATETIME=f(8);r.TAG=function(n){return o.argument(n.length===4,"Tag should be exactly 4 ASCII characters."),[n.charCodeAt(0),n.charCodeAt(1),n.charCodeAt(2),n.charCodeAt(3)]};u.TAG=f(4);r.Card8=r.BYTE;u.Card8=u.BYTE;r.Card16=r.USHORT;u.Card16=u.USHORT;r.OffSize=r.BYTE;u.OffSize=u.BYTE;r.SID=r.USHORT;u.SID=u.USHORT;r.NUMBER=function(n){return n>=-107&&n<=107?[n+139]:n>=108&&n<=1131?(n=n-108,[(n>>8)+247,n&255]):n>=-1131&&n<=-108?(n=-n-108,[(n>>8)+251,n&255]):n>=-32768&&n<=32767?r.NUMBER16(n):r.NUMBER32(n)};u.NUMBER=function(n){return r.NUMBER(n).length};r.NUMBER16=function(n){return[28,n>>8&255,n&255]};u.NUMBER16=f(2);r.NUMBER32=function(n){return[29,n>>24&255,n>>16&255,n>>8&255,n&255]};u.NUMBER32=f(4);r.REAL=function(n){var r=n.toString(),f=/\.(\d*?)(?:9{5,20}|0{5,20})\d{0,2}(?:e(.+)|$)/.exec(r),o,i,t,e,u,s;for(f&&(o=parseFloat("1e"+((f[2]?+f[2]:0)+f[1].length)),r=(Math.round(n*o)/o).toString()),i="",t=0,e=r.length;t<e;t+=1)u=r[t],i+=u==="e"?r[++t]==="-"?"c":"b":u==="."?"a":u==="-"?"e":u;for(i+=i.length&1?"f":"ff",s=[30],t=0,e=i.length;t<e;t+=2)s.push(parseInt(i.substr(t,2),16));return s};u.REAL=function(n){return r.REAL(n).length};r.NAME=r.CHARARRAY;u.NAME=u.CHARARRAY;r.STRING=r.CHARARRAY;u.STRING=u.CHARARRAY;r.UTF16=function(n){for(var t=[],i=0;i<n.length;i+=1)t.push(0),t.push(n.charCodeAt(i));return t};u.UTF16=function(n){return n.length*2};r.INDEX=function(n){for(var u=1,f=[u],e=[],o=0,i,c,t=0;t<n.length;t+=1)i=r.OBJECT(n[t]),Array.prototype.push.apply(e,i),o+=i.length,u+=i.length,f.push(u);if(e.length===0)return[0,0];var s=[],h=1+Math.floor(Math.log(o)/Math.log(2))/8|0,l=[undefined,r.BYTE,r.USHORT,r.UINT24,r.ULONG][h];for(t=0;t<f.length;t+=1)c=l(f[t]),Array.prototype.push.apply(s,c);return Array.prototype.concat(r.Card16(n.length),r.OffSize(h),s,e)};u.INDEX=function(n){return r.INDEX(n).length};r.DICT=function(n){for(var u,f,t=[],e=Object.keys(n),o=e.length,i=0;i<o;i+=1)u=parseInt(e[i],0),f=n[u],t=t.concat(r.OPERAND(f.value,f.type)),t=t.concat(r.OPERATOR(u));return t};u.DICT=function(n){return r.DICT(n).length};r.OPERATOR=function(n){return n<1200?[n]:[12,n-1200]};r.OPERAND=function(n,t){var i=[],u;if(Array.isArray(t))for(u=0;u<t.length;u+=1)o.argument(n.length===t.length,"Not enough arguments given for type"+t),i=i.concat(r.OPERAND(n[u],t[u]));else if(t==="SID")i=i.concat(r.NUMBER(n));else if(t==="offset")i=i.concat(r.NUMBER32(n));else if(t==="number")i=i.concat(r.NUMBER(n));else if(t==="real")i=i.concat(r.REAL(n));else throw new Error("Unknown operand type "+t);return i};r.OP=r.BYTE;u.OP=u.BYTE;e=typeof WeakMap=="function"&&new WeakMap;r.CHARSTRING=function(n){var t,f,i,u;if(e&&e.has(n))return e.get(n);for(t=[],f=n.length,i=0;i<f;i+=1)u=n[i],t=t.concat(r[u.type](u.value));return e&&e.set(n,t),t};u.CHARSTRING=function(n){return r.CHARSTRING(n).length};r.OBJECT=function(n){var t=r[n.type];return o.argument(t!==undefined,"No encoding function for type "+n.type),t(n.value)};r.TABLE=function(n){for(var t,e,i,s,u=[],h=n.fields.length,f=0;f<h;f+=1)t=n.fields[f],e=r[t.type],o.argument(e!==undefined,"No encoding function for field type "+t.type),i=n[t.name],i===undefined&&(i=t.value),s=e(i),u=u.concat(s);return u};r.LITERAL=function(n){return n};u.LITERAL=function(n){return n.length};i.decode={};i.encode=r;i.sizeOf=u},{"./check":2}],27:[function(t,i){
/*!
  * Reqwest! A general purpose XHR connection manager
  * license MIT (c) Dustin Diaz 2014
  * https://github.com/ded/reqwest
  */
!function(t,r,u){typeof i!="undefined"&&i.exports?i.exports=u():typeof n=="function"&&n.amd?n(u):r[t]=u()}("reqwest",this,function(){function ot(n){var t=tt.exec(n.url);return t=t&&t[1]||window.location.protocol,nt.test(t)?it.test(n.request.status):!!n.request.response}function st(n,t,r){return function(){if(n._aborted)return r(n.request);if(n._timedOut)return r(n.request,"Request is aborted: timeout");n.request&&n.request[i]==4&&(n.request.onreadystatechange=ft,ot(n)?t(n.request):r(n.request))}}function ht(n,t){var i=t.headers||{},r,f;i.Accept=i.Accept||u.accept[t.type]||u.accept["*"];f=typeof FormData=="function"&&t.data instanceof FormData;t.crossOrigin||i[p]||(i[p]=u.requestedWith);i[y]||f||(i[y]=t.contentType||u.contentType);for(r in i)i.hasOwnProperty(r)&&"setRequestHeader"in n&&n.setRequestHeader(r,i[r])}function ct(n,t){typeof t.withCredentials!="undefined"&&typeof n.withCredentials!="undefined"&&(n.withCredentials=!!t.withCredentials)}function lt(n){r=n}function b(n,t){return n+(/\?/.test(n)?"&":"?")+t}function at(u,e,o,s){var y=rt++,p=u.jsonpCallback||"callback",c=u.jsonpCallbackName||n.getcallbackPrefix(y),w=new RegExp("((^|\\?|&)"+p+")=([^&]+)"),l=s.match(w),h=a.createElement("script"),v=0,k=navigator.userAgent.indexOf("MSIE 10.0")!==-1;return l?l[3]==="?"?s=s.replace(w,"$1="+c):c=l[3]:s=b(s,p+"="+c),t[c]=lt,h.type="text/javascript",h.src=s,h.async=!0,typeof h.onreadystatechange=="undefined"||k||(h.htmlFor=h.id="_reqwest_"+y),h.onload=h.onreadystatechange=function(){if(h[i]&&h[i]!=="complete"&&h[i]!=="loaded"||v)return!1;h.onload=h.onreadystatechange=null;h.onclick&&h.onclick();e(r);r=undefined;f.removeChild(h);v=1},f.appendChild(h),{abort:function(){h.onload=h.onreadystatechange=null;o({},"Request is aborted: timeout",{});r=undefined;f.removeChild(h);v=1}}}function vt(i,r){var u=this.o,h=(u.method||"GET").toUpperCase(),s=typeof u=="string"?u:u.url,e=u.processData!==!1&&u.data&&typeof u.data!="string"?n.toQueryString(u.data):u.data||null,f,c=!1;return((u.type=="jsonp"||h=="GET")&&e&&(s=b(s,e),e=null),u.type=="jsonp")?at(u,i,r,s):(f=u.xhr&&u.xhr(u)||et(u),f.open(h,s,u.async===!1?!1:!0),ht(f,u),ct(f,u),t[o]&&f instanceof t[o]?(f.onload=i,f.onerror=r,f.onprogress=function(){},c=!0):f.onreadystatechange=st(this,i,r),u.before&&u.before(f),c?setTimeout(function(){f.send(e)},200):f.send(e),f)}function h(n,t){this.o=n;this.fn=t;k.apply(this,arguments)}function yt(n){return n.match("json")?"json":n.match("javascript")?"js":n.match("text")?"html":n.match("xml")?"xml":void 0}function k(n,i){function u(t){for(n.timeout&&clearTimeout(r.timeout),r.timeout=null;r._completeHandlers.length>0;)r._completeHandlers.shift()(t)}function e(e){var s=n.type||e&&yt(e.getResponseHeader("Content-Type")),h,o;e=s!=="jsonp"?r.request:e;h=w.dataFilter(e.responseText,s);o=h;try{e.responseText=o}catch(l){}if(o)switch(s){case"json":try{e=t.JSON?t.JSON.parse(o):eval("("+o+")")}catch(c){return f(e,"Could not parse JSON in response",c)}break;case"js":e=eval(o);break;case"html":e=o;break;case"xml":e=e.responseXML&&e.responseXML.parseError&&e.responseXML.parseError.errorCode&&e.responseXML.parseError.reason?null:e.responseXML}for(r._responseArgs.resp=e,r._fulfilled=!0,i(e),r._successHandler(e);r._fulfillmentHandlers.length>0;)e=r._fulfillmentHandlers.shift()(e);u(e)}function o(){r._timedOut=!0;r.request.abort()}function f(n,t,i){for(n=r.request,r._responseArgs.resp=n,r._responseArgs.msg=t,r._responseArgs.t=i,r._erred=!0;r._errorHandlers.length>0;)r._errorHandlers.shift()(n,t,i);u(n)}this.url=typeof n=="string"?n:n.url;this.timeout=null;this._fulfilled=!1;this._successHandler=function(){};this._fulfillmentHandlers=[];this._errorHandlers=[];this._completeHandlers=[];this._erred=!1;this._responseArgs={};var r=this;i=i||function(){};n.timeout&&(this.timeout=setTimeout(function(){o()},n.timeout));n.success&&(this._successHandler=function(){n.success.apply(n,arguments)});n.error&&this._errorHandlers.push(function(){n.error.apply(n,arguments)});n.complete&&this._completeHandlers.push(function(){n.complete.apply(n,arguments)});this.request=vt.call(this,e,f)}function n(n,t){return new h(n,t)}function c(n){return n?n.replace(/\r?\n/g,"\r\n"):""}function d(n,t){var r=n.name,s=n.tagName.toLowerCase(),e=function(n){n&&!n.disabled&&t(r,c(n.attributes.value&&n.attributes.value.specified?n.value:n.text))},u,o,f,i;if(!n.disabled&&r)switch(s){case"input":/reset|button|image|file/i.test(n.type)||(u=/checkbox/i.test(n.type),o=/radio/i.test(n.type),f=n.value,(u||o)&&!n.checked||t(r,c(u&&f===""?"on":f)));break;case"textarea":t(r,c(n.value));break;case"select":if(n.type.toLowerCase()==="select-one")e(n.selectedIndex>=0?n.options[n.selectedIndex]:null);else for(i=0;n.length&&i<n.length;i++)n.options[i].selected&&e(n.options[i])}}function g(){for(var i=this,n,r=function(n,t){for(var u,f,r=0;r<t.length;r++)for(f=n[v](t[r]),u=0;u<f.length;u++)d(f[u],i)},t=0;t<arguments.length;t++)n=arguments[t],/input|select|textarea/i.test(n.tagName)&&d(n,i),r(n,["input","select","textarea"])}function pt(){return n.toQueryString(n.serializeArray.apply(null,arguments))}function wt(){var n={};return g.apply(function(t,i){t in n?(n[t]&&!s(n[t])&&(n[t]=[n[t]]),n[t].push(i)):n[t]=i},arguments),n}function l(n,t,i,r){var e,u,f;if(s(t))for(u=0;t&&u<t.length;u++)f=t[u],i||/\[\]$/.test(n)?r(n,f):l(n+"["+(typeof f=="object"?u:"")+"]",f,i,r);else if(t&&t.toString()==="[object Object]")for(e in t)l(n+"["+e+"]",t[e],i,r);else r(n,t)}var t=window,a=document,nt=/^http/,tt=/(^\w+):\/\//,it=/^(20\d|1223)$/,v="getElementsByTagName",i="readyState",y="Content-Type",p="X-Requested-With",f=a[v]("head")[0],rt=0,ut="reqwest_"+ +new Date,r,e="XMLHttpRequest",o="XDomainRequest",ft=function(){},s=typeof Array.isArray=="function"?Array.isArray:function(n){return n instanceof Array},u={contentType:"application/x-www-form-urlencoded",requestedWith:e,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},et=function(n){if(n.crossOrigin===!0){var i=t[e]?new XMLHttpRequest:null;if(i&&"withCredentials"in i)return i;if(t[o])return new XDomainRequest;throw new Error("Browser does not support cross-origin requests");}else return t[e]?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP")},w={dataFilter:function(n){return n}};return h.prototype={abort:function(){this._aborted=!0;this.request.abort()},retry:function(){k.call(this,this.o,this.fn)},then:function(n,t){return n=n||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=n(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(n),this._errorHandlers.push(t)),this},always:function(n){return this._fulfilled||this._erred?n(this._responseArgs.resp):this._completeHandlers.push(n),this},fail:function(n){return this._erred?n(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(n),this},"catch":function(n){return this.fail(n)}},n.serializeArray=function(){var n=[];return g.apply(function(t,i){n.push({name:t,value:i})},arguments),n},n.serialize=function(){if(arguments.length===0)return"";var t,r,i=Array.prototype.slice.call(arguments,0);return t=i.pop(),t&&t.nodeType&&i.push(t)&&(t=null),t&&(t=t.type),r=t=="map"?wt:t=="array"?n.serializeArray:pt,r.apply(null,i)},n.toQueryString=function(n,t){var r,i,o=t||!1,u=[],f=encodeURIComponent,e=function(n,t){t="function"==typeof t?t():t==null?"":t;u[u.length]=f(n)+"="+f(t)};if(s(n))for(i=0;n&&i<n.length;i++)e(n[i].name,n[i].value);else for(r in n)n.hasOwnProperty(r)&&l(r,n[r],o,e);return u.join("&").replace(/%20/g,"+")},n.getcallbackPrefix=function(){return ut},n.compat=function(n,t){return n&&(n.type&&(n.method=n.type)&&delete n.type,n.dataType&&(n.type=n.dataType),n.jsonpCallback&&(n.jsonpCallbackName=n.jsonpCallback)&&delete n.jsonpCallback,n.jsonp&&(n.jsonpCallback=n.jsonp)),new h(n,t)},n.ajaxSetup=function(n){n=n||{};for(var t in n)w[t]=n[t]},n})},{}],28:[function(n,t){"use strict";var i=n("../core/core");n("./p5.Geometry3D");i.prototype.plane=function(n,t){var u,o,s;n=n||50;t=t||50;var f=typeof arguments[2]===Number?arguments[2]:1,e=typeof arguments[3]===Number?arguments[3]:1,r="plane|"+n+"|"+t+"|"+f+"|"+e;this._renderer.geometryInHash(r)||(u=new i.Geometry3D,o=function(r,u){var f=2*n*r-n,e=2*t*u-t;return new i.Vector(f,e,0)},u.parametricGeometry(o,f,e),s=u.generateObj(),this._renderer.initBuffer(r,[s]));this._renderer.drawBuffer(r)};i.prototype.sphere=function(n,t){var u,o,s;n=n||50;var f=t||24,e=t||16,r="sphere|"+n+"|"+f+"|"+e;return this._renderer.geometryInHash(r)||(u=new i.Geometry3D,o=function(t,r){var f=2*Math.PI*t,u=Math.PI*r-Math.PI/2,e=n*Math.cos(u)*Math.sin(f),o=n*Math.sin(u),s=n*Math.cos(u)*Math.cos(f);return new i.Vector(e,o,s)},u.parametricGeometry(o,f,e),s=u.generateObj(!0,!0),this._renderer.initBuffer(r,[s])),this._renderer.drawBuffer(r),this};i.prototype.ellipsoid=function(n,t,r,u){var e,h,c;n=n||50;t=t||50;r=r||50;var o=u||24,s=u||24,f="ellipsoid|"+n+"|"+t+"|"+r+"|"+o+"|"+s;return this._renderer.geometryInHash(f)||(e=new i.Geometry3D,h=function(u,f){var o=2*Math.PI*u,e=Math.PI*f-Math.PI/2,s=n*Math.cos(e)*Math.sin(o),h=t*Math.sin(e),c=r*Math.cos(e)*Math.cos(o);return new i.Vector(s,h,c)},e.parametricGeometry(h,o,s),c=e.generateObj(!0,!0),this._renderer.initBuffer(f,[c])),this._renderer.drawBuffer(f),this};i.prototype.cylinder=function(n,t,r){var e,s,l;n=n||50;t=t||50;var u=r||24,o=r||16,f="cylinder|"+n+"|"+t+"|"+u+"|"+o;if(!this._renderer.geometryInHash(f)){e=new i.Geometry3D;s=function(r,u){var f=2*Math.PI*r,e=n*Math.sin(f),o=2*t*u-t,s=n*Math.cos(f);return new i.Vector(e,o,s)};e.parametricGeometry(s,u,o);var a=e.generateObj(!0),v=function(r,u){var f=2*Math.PI*r,e=n*Math.sin(-f),o=t,s=n*Math.cos(f);return u===0?new i.Vector(0,t,0):new i.Vector(e,o,s)},h=new i.Geometry3D;h.parametricGeometry(v,u,1);var y=h.generateObj(),p=function(r,u){var f=2*Math.PI*r,e=n*Math.sin(f),o=-t,s=n*Math.cos(f);return u===0?new i.Vector(0,-t,0):new i.Vector(e,o,s)},c=new i.Geometry3D;c.parametricGeometry(p,u,1);l=c.generateObj();this._renderer.initBuffer(f,[a,y,l])}return this._renderer.drawBuffer(f),this};i.prototype.cone=function(n,t,r){var e,s,c;n=n||50;t=t||50;var u=r||24,o=r||16,f="cone|"+n+"|"+t+"|"+u+"|"+o;if(!this._renderer.geometryInHash(f)){e=new i.Geometry3D;s=function(r,u){var f=2*Math.PI*r,e=n*(1-u)*Math.sin(f),o=2*t*u-t,s=n*(1-u)*Math.cos(f);return new i.Vector(e,o,s)};e.parametricGeometry(s,u,o);var l=e.generateObj(!0),h=new i.Geometry3D,a=function(r,u){var f=2*Math.PI*r,e=n*(1-u)*Math.sin(-f),o=-t,s=n*(1-u)*Math.cos(f);return new i.Vector(e,o,s)};h.parametricGeometry(a,u,1);c=h.generateObj();this._renderer.initBuffer(f,[l,c])}return this._renderer.drawBuffer(f),this};i.prototype.torus=function(n,t,r){var f,s,h;n=n||50;t=t||10;var e=r||24,o=r||16,u="torus|"+n+"|"+t+"|"+e+"|"+o;return this._renderer.geometryInHash(u)||(f=new i.Geometry3D,s=function(r,u){var e=2*Math.PI*r,f=2*Math.PI*u,o=(n+t*Math.cos(f))*Math.cos(e),s=(n+t*Math.cos(f))*Math.sin(e),h=t*Math.sin(f);return new i.Vector(o,s,h)},f.parametricGeometry(s,e,o),h=f.generateObj(!0),this._renderer.initBuffer(u,[h])),this._renderer.drawBuffer(u),this};i.prototype.box=function(n,t,r){var s;n=n||50;t=t||n;r=r||n;var f=typeof arguments[3]===Number?arguments[3]:1,e=typeof arguments[4]===Number?arguments[4]:1,o="cube|"+n+"|"+t+"|"+r+"|"+f+"|"+e;if(!this._renderer.geometryInHash(o)){var u=new i.Geometry3D,h=function(u,f){var e=2*n*u-n,o=2*t*f-t,s=r;return new i.Vector(e,o,s)},c=function(u,f){var e=2*n*(1-u)-n,o=2*t*f-t,s=-r;return new i.Vector(e,o,s)},l=function(u,f){var e=2*n*(1-u)-n,o=t,s=2*r*f-r;return new i.Vector(e,o,s)},a=function(u,f){var e=2*n*u-n,o=-t,s=2*r*f-r;return new i.Vector(e,o,s)},v=function(u,f){var e=n,o=2*t*u-t,s=2*r*f-r;return new i.Vector(e,o,s)},y=function(u,f){var e=-n,o=2*t*(1-u)-t,s=2*r*f-r;return new i.Vector(e,o,s)};u.parametricGeometry(h,f,e,u.vertices.length);u.parametricGeometry(c,f,e,u.vertices.length);u.parametricGeometry(l,f,e,u.vertices.length);u.parametricGeometry(a,f,e,u.vertices.length);u.parametricGeometry(v,f,e,u.vertices.length);u.parametricGeometry(y,f,e,u.vertices.length);s=u.generateObj();this._renderer.initBuffer(o,[s])}return this._renderer.drawBuffer(o),this};t.exports=i},{"../core/core":48,"./p5.Geometry3D":34}],29:[function(n,t){"use strict";var i=n("../core/core");i.prototype.camera=function(n,t,i){for(var u=new Array(arguments.length),r=0;r<u.length;++r)u[r]=arguments[r];this._validateParameters("camera",u,["Number","Number","Number"]);this._renderer.translate(-n,-t,-i)};i.prototype.perspective=function(n,t,r,u){for(var e=new Array(arguments.length),f=0;f<e.length;++f)e[f]=arguments[f];this._validateParameters("perspective",e,["Number","Number","Number","Number"]);this._renderer.uPMatrix=i.Matrix.identity();this._renderer.uPMatrix.perspective(n,t,r,u);this._renderer._setCamera=!0};i.prototype.ortho=function(n,t,r,u,f,e){for(var s=new Array(arguments.length),o=0;o<s.length;++o)s[o]=arguments[o];this._validateParameters("ortho",s,["Number","Number","Number","Number","Number","Number"]);n/=this.width;t/=this.width;u/=this.height;r/=this.height;this._renderer.uPMatrix=i.Matrix.identity();this._renderer.uPMatrix.ortho(n,t,r,u,f,e);this._renderer._setCamera=!0};t.exports=i},{"../core/core":48}],30:[function(n,t){"use strict";var i=n("../core/core");i.Renderer3D.prototype._primitives2D=function(n){var f,e,i,r,o;this._setDefaultCamera();var t=this.GL,u=this._getColorVertexShader(),s=this.verticeBuffer;for(t.bindBuffer(t.ARRAY_BUFFER,s),t.bufferData(t.ARRAY_BUFFER,new Float32Array(n),t.STATIC_DRAW),t.vertexAttribPointer(u.vertexPositionAttribute,3,t.FLOAT,!1,0,0),f=this.colorBuffer,t.bindBuffer(t.ARRAY_BUFFER,f),e=this._getCurColor(),i=[],r=0;r<n.length/3;r++)i=i.concat(e);t.bufferData(t.ARRAY_BUFFER,new Float32Array(i),t.STATIC_DRAW);t.vertexAttribPointer(u.vertexColorAttribute,4,t.FLOAT,!1,0,0);o="vertexColorVert|vertexColorFrag";this.setMatrixUniforms(o)};i.Renderer3D.prototype.point=function(n,t,i){var r=this.GL;return this._primitives2D([n,t,i]),r.drawArrays(r.POINTS,0,1),this};i.Renderer3D.prototype.line=function(n,t,i,r,u,f){var e=this.GL;return this._primitives2D([n,t,i,r,u,f]),e.drawArrays(e.LINES,0,2),this};i.Renderer3D.prototype.triangle=function(n,t,i,r,u,f,e,o,s){var h=this.GL;return this._primitives2D([n,t,i,r,u,f,e,o,s]),this._strokeCheck(),h.drawArrays(h.TRIANGLES,0,3),this};i.Renderer3D.prototype.quad=function(n,t,i,r,u,f,e,o,s,h,c,l){var a=this.GL;return this._primitives2D([n,t,i,r,u,f,e,o,s,h,c,l]),this._strokeCheck(),a.drawArrays(a.TRIANGLE_STRIP,0,4),this};i.Renderer3D.prototype.beginShape=function(n){return this.shapeMode=n,this.verticeStack=[],this};i.Renderer3D.prototype.vertex=function(n,t,i){return this.verticeStack.push(n,t,i),this};i.Renderer3D.prototype.endShape=function(){var n=this.GL;this._primitives2D(this.verticeStack);this.verticeStack=[];switch(this.shapeMode){case"POINTS":n.drawArrays(n.POINTS,0,1);break;case"LINES":n.drawArrays(n.LINES,0,2);break;case"TRIANGLES":this._strokeCheck();n.drawArrays(n.TRIANGLES,0,3);break;case"TRIANGLE_STRIP":this._strokeCheck();n.drawArrays(n.TRIANGLE_STRIP,0,4);break;default:this._strokeCheck();n.drawArrays(n.TRIANGLES,0,3)}return this};i.Renderer3D.prototype._strokeCheck=function(){if(this.drawMode==="stroke")throw new Error("stroke for shapes in 3D not yet implemented, use fill for now :(");};i.Renderer3D.prototype.strokeWeight=function(){throw new Error("strokeWeight for 3d not yet implemented");};i.Renderer3D.prototype.fill=function(){var n=this._pInst.color.apply(this,arguments),t=n._array;return this.curColor=t,this.drawMode="fill",this};i.Renderer3D.prototype.stroke=function(){var n=this._pInst.color.apply(this,arguments),t=n._array;return this.curColor=t,this.drawMode="stroke",this};i.Renderer3D.prototype._getColorVertexShader=function(){var i=this.GL,t="vertexColorVert|vertexColorFrag",n;return this.materialInHash(t)?n=this.mHash[t]:(n=this.initShaders("vertexColorVert","vertexColorFrag",!0),this.mHash[t]=n,n.vertexColorAttribute=i.getAttribLocation(n,"aVertexColor"),i.enableVertexAttribArray(n.vertexColorAttribute)),n};t.exports=i.Renderer3D},{"../core/core":48}],31:[function(n,t){"use strict";var i=n("../core/core");i.prototype.orbitControl=function(){return this.mouseIsPressed&&(this.rotateY((this.mouseX-this.width/2)/(this.width/2)),this.rotateX((this.mouseY-this.height/2)/(this.width/2))),this};t.exports=i},{"../core/core":48}],32:[function(n,t){"use strict";var i=n("../core/core");i.prototype.ambientLight=function(){var t=this._renderer.GL,n=this._renderer._getShader("lightVert","lightTextureFrag"),r,i;return t.useProgram(n),n.uAmbientColor=t.getUniformLocation(n,"uAmbientColor["+this._renderer.ambientLightCount+"]"),r=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),i=r._array,t.uniform3f(n.uAmbientColor,i[0],i[1],i[2]),n.uMaterialColor=t.getUniformLocation(n,"uMaterialColor"),t.uniform4f(n.uMaterialColor,1,1,1,1),this._renderer.ambientLightCount++,n.uAmbientLightCount=t.getUniformLocation(n,"uAmbientLightCount"),t.uniform1i(n.uAmbientLightCount,this._renderer.ambientLightCount),this};i.prototype.directionalLight=function(n,t,i){var u=this._renderer.GL,r=this._renderer._getShader("lightVert","lightTextureFrag"),h,f,e,o,s;if(u.useProgram(r),r.uDirectionalColor=u.getUniformLocation(r,"uDirectionalColor["+this._renderer.directionalLightCount+"]"),h=this._renderer._pInst.color.apply(this._renderer._pInst,[n,t,i]),f=h._array,u.uniform3f(r.uDirectionalColor,f[0],f[1],f[2]),typeof arguments[arguments.length-1]=="number")e=arguments[arguments.length-3],o=arguments[arguments.length-2],s=arguments[arguments.length-1];else try{e=arguments[arguments.length-1].x;o=arguments[arguments.length-1].y;s=arguments[arguments.length-1].z}catch(c){throw c;}return r.uLightingDirection=u.getUniformLocation(r,"uLightingDirection["+this._renderer.directionalLightCount+"]"),u.uniform3f(r.uLightingDirection,e,o,s),r.uMaterialColor=u.getUniformLocation(r,"uMaterialColor"),u.uniform4f(r.uMaterialColor,1,1,1,1),this._renderer.directionalLightCount++,r.uDirectionalLightCount=u.getUniformLocation(r,"uDirectionalLightCount"),u.uniform1i(r.uDirectionalLightCount,this._renderer.directionalLightCount),this};i.prototype.pointLight=function(n,t,i){var u=this._renderer.GL,r=this._renderer._getShader("lightVert","lightTextureFrag"),h,f,e,o,s;if(u.useProgram(r),r.uPointLightColor=u.getUniformLocation(r,"uPointLightColor["+this._renderer.pointLightCount+"]"),h=this._renderer._pInst.color.apply(this._renderer._pInst,[n,t,i]),f=h._array,u.uniform3f(r.uPointLightColor,f[0],f[1],f[2]),typeof arguments[arguments.length-1]=="number")e=arguments[arguments.length-3],o=arguments[arguments.length-2],s=arguments[arguments.length-1];else try{e=arguments[arguments.length-1].x;o=arguments[arguments.length-1].y;s=arguments[arguments.length-1].z}catch(c){throw c;}return r.uPointLightLocation=u.getUniformLocation(r,"uPointLightLocation["+this._renderer.pointLightCount+"]"),u.uniform3f(r.uPointLightLocation,e,o,s),r.uMaterialColor=u.getUniformLocation(r,"uMaterialColor"),u.uniform4f(r.uMaterialColor,1,1,1,1),this._renderer.pointLightCount++,r.uPointLightCount=u.getUniformLocation(r,"uPointLightCount"),u.uniform1i(r.uPointLightCount,this._renderer.pointLightCount),this};t.exports=i},{"../core/core":48}],33:[function(n,t){"use strict";function r(n){return(n&n-1)==0}var i=n("../core/core");i.prototype.normalMaterial=function(){return this._renderer._getShader("normalVert","normalFrag"),this};i.prototype.texture=function(n){var t=this._renderer.GL,u=this._renderer._getShader("lightVert","lightTextureFrag"),f,e;if(t.useProgram(u),n instanceof i.Image)n.isTexture||(f=t.createTexture(),n.createTexture(f),t.bindTexture(t.TEXTURE_2D,f),t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,1),n._setProperty("isTexture",!0)),n.loadPixels(),e=new Uint8Array(n.pixels),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,n.width,n.height,0,t.RGBA,t.UNSIGNED_BYTE,e);else if(n instanceof i.MediaElement){if(!n.loadedmetadata)return;t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,n.elt)}return r(n.width)&&r(n.height)?t.generateMipmap(t.TEXTURE_2D):(t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)),t.uniform1i(t.getUniformLocation(u,"uSampler"),0),t.uniform1i(t.getUniformLocation(u,"isTexture"),!0),this};i.prototype.basicMaterial=function(){var i=this._renderer.GL,t=this._renderer._getShader("normalVert","basicFrag"),r,n;return i.useProgram(t),t.uMaterialColor=i.getUniformLocation(t,"uMaterialColor"),r=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),n=r._array,i.uniform4f(t.uMaterialColor,n[0],n[1],n[2],n[3]),this};i.prototype.ambientMaterial=function(){var t=this._renderer.GL,n=this._renderer._getShader("lightVert","lightTextureFrag"),r,i;return t.useProgram(n),n.uMaterialColor=t.getUniformLocation(n,"uMaterialColor"),r=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),i=r._array,t.uniform4f(n.uMaterialColor,i[0],i[1],i[2],i[3]),n.uSpecular=t.getUniformLocation(n,"uSpecular"),t.uniform1i(n.uSpecular,!1),t.uniform1i(t.getUniformLocation(n,"isTexture"),!1),this};i.prototype.specularMaterial=function(){var t=this._renderer.GL,n=this._renderer._getShader("lightVert","lightTextureFrag"),r,i;return t.uniform1i(t.getUniformLocation(n,"isTexture"),!1),t.useProgram(n),n.uMaterialColor=t.getUniformLocation(n,"uMaterialColor"),r=this._renderer._pInst.color.apply(this._renderer._pInst,arguments),i=r._array,t.uniform4f(n.uMaterialColor,i[0],i[1],i[2],i[3]),n.uSpecular=t.getUniformLocation(n,"uSpecular"),t.uniform1i(n.uSpecular,!0),this};t.exports=i},{"../core/core":48}],34:[function(n,t){"use strict";function r(n){return n.reduce(function(n,t){return n.concat(t)})}function u(n){return r(n.map(function(n){return[n.x,n.y,n.z]}))}var i=n("../core/core");i.Geometry3D=function(){this.vertices=[];this.vertexNormals=[];this.faces=[];this.faceNormals=[];this.uvs=[]};i.Geometry3D.prototype.parametricGeometry=function(n,t,i,r){var u,f,l,a,v,e,y,o,p,s,w,h,b,c;for(r=r||0,this.detailX=t,this.detailY=i,e=t+1,u=0;u<=i;u++)for(v=u/i,f=0;f<=t;f++)a=f/t,l=n(a,v),this.vertices.push(l);for(u=0;u<i;u++)for(f=0;f<t;f++)y=u*e+f+r,o=u*e+f+1+r,p=(u+1)*e+f+1+r,s=(u+1)*e+f+r,w=[f/t,u/i],h=[(f+1)/t,u/i],b=[(f+1)/t,(u+1)/i],c=[f/t,(u+1)/i],this.faces.push([y,o,s]),this.uvs.push([w,h,c]),this.faces.push([o,p,s]),this.uvs.push([h,b,c])};i.Geometry3D.prototype.computeFaceNormals=function(){for(var t,u=new i.Vector,f=new i.Vector,n=0;n<this.faces.length;n++){var r=this.faces[n],o=this.vertices[r[0]],e=this.vertices[r[1]],s=this.vertices[r[2]];i.Vector.sub(s,e,u);i.Vector.sub(o,e,f);t=i.Vector.cross(f,u);t.normalize();t.mult(-1);this.faceNormals[n]=t}};i.Geometry3D.prototype.computeVertexNormals=function(){for(var n,t,e,f=[],r=new Array(this.vertices.length),u=0;u<this.vertices.length;u++)r[u]=new i.Vector;for(n=0;n<this.faces.length;n++)t=this.faces[n],e=this.faceNormals[n],r[t[0]].add(e),r[t[1]].add(e),r[t[2]].add(e);for(u=0;u<this.vertices.length;u++)r[u].normalize();for(n=0;n<this.faces.length;n++)t=this.faces[n],f[n]=[],f[n][0]=r[t[0]].copy(),f[n][1]=r[t[1]].copy(),f[n][2]=r[t[2]].copy();for(n=0;n<this.faces.length;n++)t=this.faces[n],e=this.faceNormals[n],this.vertexNormals[t[0]]=f[n][0],this.vertexNormals[t[1]]=f[n][1],this.vertexNormals[t[2]]=f[n][2]};i.Geometry3D.prototype.averageNormals=function(){for(var t,r,n=0;n<=this.detailY;n++)t=this.detailX+1,r=i.Vector.add(this.vertexNormals[n*t],this.vertexNormals[n*t+this.detailX]),r=i.Vector.div(r,2),this.vertexNormals[n*t]=r,this.vertexNormals[n*t+this.detailX]=r};i.Geometry3D.prototype.averagePoleNormals=function(){for(var t=new i.Vector(0,0,0),n=0;n<this.detailX;n++)t.add(this.vertexNormals[n]);for(t=i.Vector.div(t,this.detailX),n=0;n<this.detailX;n++)this.vertexNormals[n]=t;for(t=new i.Vector(0,0,0),n=this.vertices.length-1;n>this.vertices.length-1-this.detailX;n--)t.add(this.vertexNormals[n]);for(t=i.Vector.div(t,this.detailX),n=this.vertices.length-1;n>this.vertices.length-1-this.detailX;n--)this.vertexNormals[n]=t};i.Geometry3D.prototype.generateUV=function(n,t){n=r(n);t=r(t);var i=[];return n.forEach(function(n,r){i[n]=t[r]}),r(i)};i.Geometry3D.prototype.generateObj=function(n,t){this.computeFaceNormals();this.computeVertexNormals();n&&this.averageNormals();t&&this.averagePoleNormals();return{vertices:u(this.vertices),vertexNormals:u(this.vertexNormals),uvs:this.generateUV(this.faces,this.uvs),faces:r(this.faces),len:this.faces.length*3}};t.exports=i.Geometry3D},{"../core/core":48}],35:[function(n,t){"use strict";var i=n("../core/core"),u=n("../math/polargeometry"),f=n("../core/constants"),r=typeof Float32Array!="undefined"?Float32Array:Array;i.Matrix=function(){return arguments[0]instanceof i?(this.p5=arguments[0],this.mat4=arguments[1]||new r([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])):this.mat4=arguments[0]||new r([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]),this};i.Matrix.prototype.set=function(n){return n instanceof i.Matrix?(this.mat4=n.mat4,this):n instanceof r?(this.mat4=n,this):this};i.Matrix.prototype.get=function(){return new i.Matrix(this.mat4)};i.Matrix.prototype.copy=function(){var n=new i.Matrix;return n.mat4[0]=this.mat4[0],n.mat4[1]=this.mat4[1],n.mat4[2]=this.mat4[2],n.mat4[3]=this.mat4[3],n.mat4[4]=this.mat4[4],n.mat4[5]=this.mat4[5],n.mat4[6]=this.mat4[6],n.mat4[7]=this.mat4[7],n.mat4[8]=this.mat4[8],n.mat4[9]=this.mat4[9],n.mat4[10]=this.mat4[10],n.mat4[11]=this.mat4[11],n.mat4[12]=this.mat4[12],n.mat4[13]=this.mat4[13],n.mat4[14]=this.mat4[14],n.mat4[15]=this.mat4[15],n};i.Matrix.identity=function(){return new i.Matrix};i.Matrix.prototype.transpose=function(n){var t,u,f,e,o,s;return n instanceof i.Matrix?(t=n.mat4[1],u=n.mat4[2],f=n.mat4[3],e=n.mat4[6],o=n.mat4[7],s=n.mat4[11],this.mat4[0]=n.mat4[0],this.mat4[1]=n.mat4[4],this.mat4[2]=n.mat4[8],this.mat4[3]=n.mat4[12],this.mat4[4]=t,this.mat4[5]=n.mat4[5],this.mat4[6]=n.mat4[9],this.mat4[7]=n.mat4[13],this.mat4[8]=u,this.mat4[9]=e,this.mat4[10]=n.mat4[10],this.mat4[11]=n.mat4[14],this.mat4[12]=f,this.mat4[13]=o,this.mat4[14]=s,this.mat4[15]=n.mat4[15]):n instanceof r&&(t=n[1],u=n[2],f=n[3],e=n[6],o=n[7],s=n[11],this.mat4[0]=n[0],this.mat4[1]=n[4],this.mat4[2]=n[8],this.mat4[3]=n[12],this.mat4[4]=t,this.mat4[5]=n[5],this.mat4[6]=n[9],this.mat4[7]=n[13],this.mat4[8]=u,this.mat4[9]=e,this.mat4[10]=n[10],this.mat4[11]=n[14],this.mat4[12]=f,this.mat4[13]=o,this.mat4[14]=s,this.mat4[15]=n[15]),this};i.Matrix.prototype.invert=function(n){var u,f,e,o,s,h,c,l,a,v,y,p,w,b,k,d;n instanceof i.Matrix?(u=n.mat4[0],f=n.mat4[1],e=n.mat4[2],o=n.mat4[3],s=n.mat4[4],h=n.mat4[5],c=n.mat4[6],l=n.mat4[7],a=n.mat4[8],v=n.mat4[9],y=n.mat4[10],p=n.mat4[11],w=n.mat4[12],b=n.mat4[13],k=n.mat4[14],d=n.mat4[15]):n instanceof r&&(u=n[0],f=n[1],e=n[2],o=n[3],s=n[4],h=n[5],c=n[6],l=n[7],a=n[8],v=n[9],y=n[10],p=n[11],w=n[12],b=n[13],k=n[14],d=n[15]);var g=u*h-f*s,nt=u*c-e*s,tt=u*l-o*s,it=f*c-e*h,rt=f*l-o*h,ut=e*l-o*c,ft=a*b-v*w,et=a*k-y*w,ot=a*d-p*w,st=v*k-y*b,ht=v*d-p*b,ct=y*d-p*k,t=g*ct-nt*ht+tt*st+it*ot-rt*et+ut*ft;return t?(t=1/t,this.mat4[0]=(h*ct-c*ht+l*st)*t,this.mat4[1]=(e*ht-f*ct-o*st)*t,this.mat4[2]=(b*ut-k*rt+d*it)*t,this.mat4[3]=(y*rt-v*ut-p*it)*t,this.mat4[4]=(c*ot-s*ct-l*et)*t,this.mat4[5]=(u*ct-e*ot+o*et)*t,this.mat4[6]=(k*tt-w*ut-d*nt)*t,this.mat4[7]=(a*ut-y*tt+p*nt)*t,this.mat4[8]=(s*ht-h*ot+l*ft)*t,this.mat4[9]=(f*ot-u*ht-o*ft)*t,this.mat4[10]=(w*rt-b*tt+d*g)*t,this.mat4[11]=(v*tt-a*rt-p*g)*t,this.mat4[12]=(h*et-s*st-c*ft)*t,this.mat4[13]=(u*st-f*et+e*ft)*t,this.mat4[14]=(b*nt-w*it-k*g)*t,this.mat4[15]=(a*it-v*nt+y*g)*t,this):null};i.Matrix.prototype.determinant=function(){var n=this.mat4[0]*this.mat4[5]-this.mat4[1]*this.mat4[4],t=this.mat4[0]*this.mat4[6]-this.mat4[2]*this.mat4[4],i=this.mat4[0]*this.mat4[7]-this.mat4[3]*this.mat4[4],r=this.mat4[1]*this.mat4[6]-this.mat4[2]*this.mat4[5],u=this.mat4[1]*this.mat4[7]-this.mat4[3]*this.mat4[5],f=this.mat4[2]*this.mat4[7]-this.mat4[3]*this.mat4[6],e=this.mat4[8]*this.mat4[13]-this.mat4[9]*this.mat4[12],o=this.mat4[8]*this.mat4[14]-this.mat4[10]*this.mat4[12],s=this.mat4[8]*this.mat4[15]-this.mat4[11]*this.mat4[12],h=this.mat4[9]*this.mat4[14]-this.mat4[10]*this.mat4[13],c=this.mat4[9]*this.mat4[15]-this.mat4[11]*this.mat4[13],l=this.mat4[10]*this.mat4[15]-this.mat4[11]*this.mat4[14];return n*l-t*c+i*h+r*s-u*o+f*e};i.Matrix.prototype.mult=function(n){var s=new r(16),t=new r(16);n instanceof i.Matrix?t=n.mat4:n instanceof r&&(t=n);var u=this.mat4[0],f=this.mat4[1],e=this.mat4[2],o=this.mat4[3];return s[0]=u*t[0]+f*t[4]+e*t[8]+o*t[12],s[1]=u*t[1]+f*t[5]+e*t[9]+o*t[13],s[2]=u*t[2]+f*t[6]+e*t[10]+o*t[14],s[3]=u*t[3]+f*t[7]+e*t[11]+o*t[15],u=this.mat4[4],f=this.mat4[5],e=this.mat4[6],o=this.mat4[7],s[4]=u*t[0]+f*t[4]+e*t[8]+o*t[12],s[5]=u*t[1]+f*t[5]+e*t[9]+o*t[13],s[6]=u*t[2]+f*t[6]+e*t[10]+o*t[14],s[7]=u*t[3]+f*t[7]+e*t[11]+o*t[15],u=this.mat4[8],f=this.mat4[9],e=this.mat4[10],o=this.mat4[11],s[8]=u*t[0]+f*t[4]+e*t[8]+o*t[12],s[9]=u*t[1]+f*t[5]+e*t[9]+o*t[13],s[10]=u*t[2]+f*t[6]+e*t[10]+o*t[14],s[11]=u*t[3]+f*t[7]+e*t[11]+o*t[15],u=this.mat4[12],f=this.mat4[13],e=this.mat4[14],o=this.mat4[15],s[12]=u*t[0]+f*t[4]+e*t[8]+o*t[12],s[13]=u*t[1]+f*t[5]+e*t[9]+o*t[13],s[14]=u*t[2]+f*t[6]+e*t[10]+o*t[14],s[15]=u*t[3]+f*t[7]+e*t[11]+o*t[15],this.mat4=s,this};i.Matrix.prototype.scale=function(){for(var n,u,f,e,t=new Array(arguments.length),o=0;o<t.length;o++)t[o]=arguments[o];return t[0]instanceof i.Vector?(u=t[0].x,f=t[0].y,e=t[0].z):t[0]instanceof Array&&(u=t[0][0],f=t[0][1],e=t[0][2]),n=new r(16),n[0]=this.mat4[0]*u,n[1]=this.mat4[1]*u,n[2]=this.mat4[2]*u,n[3]=this.mat4[3]*u,n[4]=this.mat4[4]*f,n[5]=this.mat4[5]*f,n[6]=this.mat4[6]*f,n[7]=this.mat4[7]*f,n[8]=this.mat4[8]*e,n[9]=this.mat4[9]*e,n[10]=this.mat4[10]*e,n[11]=this.mat4[11]*e,n[12]=this.mat4[12],n[13]=this.mat4[13],n[14]=this.mat4[14],n[15]=this.mat4[15],this.mat4=n,this};i.Matrix.prototype.rotate=function(n,t){var r,e,o,c,l;this.p5?this.p5._angleMode===f.DEGREES&&(c=u.degreesToRadians(n)):c=n;t instanceof i.Vector?(r=t.x,e=t.y,o=t.z):t instanceof Array&&(r=t[0],e=t[1],o=t[2]);l=Math.sqrt(r*r+e*e+o*o);r*=1/l;e*=1/l;o*=1/l;var tt=this.mat4[0],it=this.mat4[1],rt=this.mat4[2],ut=this.mat4[3],ft=this.mat4[4],et=this.mat4[5],ot=this.mat4[6],st=this.mat4[7],ht=this.mat4[8],ct=this.mat4[9],lt=this.mat4[10],at=this.mat4[11],h=Math.sin(c),a=Math.cos(c),s=1-a,v=r*r*s+a,y=e*r*s+o*h,p=o*r*s-e*h,w=r*e*s-o*h,b=e*e*s+a,k=o*e*s+r*h,d=r*o*s+e*h,g=e*o*s-r*h,nt=o*o*s+a;return this.mat4[0]=tt*v+ft*y+ht*p,this.mat4[1]=it*v+et*y+ct*p,this.mat4[2]=rt*v+ot*y+lt*p,this.mat4[3]=ut*v+st*y+at*p,this.mat4[4]=tt*w+ft*b+ht*k,this.mat4[5]=it*w+et*b+ct*k,this.mat4[6]=rt*w+ot*b+lt*k,this.mat4[7]=ut*w+st*b+at*k,this.mat4[8]=tt*d+ft*g+ht*nt,this.mat4[9]=it*d+et*g+ct*nt,this.mat4[10]=rt*d+ot*g+lt*nt,this.mat4[11]=ut*d+st*g+at*nt,this};i.Matrix.prototype.translate=function(n){var t=n[0],i=n[1],r=n[2]||0;this.mat4[12]=this.mat4[0]*t+this.mat4[4]*i+this.mat4[8]*r+this.mat4[12];this.mat4[13]=this.mat4[1]*t+this.mat4[5]*i+this.mat4[9]*r+this.mat4[13];this.mat4[14]=this.mat4[2]*t+this.mat4[6]*i+this.mat4[10]*r+this.mat4[14];this.mat4[15]=this.mat4[3]*t+this.mat4[7]*i+this.mat4[11]*r+this.mat4[15]};i.Matrix.prototype.rotateX=function(n){this.rotate(n,[1,0,0])};i.Matrix.prototype.rotateY=function(n){this.rotate(n,[0,1,0])};i.Matrix.prototype.rotateZ=function(n){this.rotate(n,[0,0,1])};i.Matrix.prototype.perspective=function(n,t,i,r){var u=1/Math.tan(n/2),f=1/(i-r);return this.mat4[0]=u/t,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=u,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=(r+i)*f,this.mat4[11]=-1,this.mat4[12]=0,this.mat4[13]=0,this.mat4[14]=2*r*i*f,this.mat4[15]=0,this};i.Matrix.prototype.ortho=function(n,t,i,r,u,f){var e=1/(n-t),o=1/(i-r),s=1/(u-f);return this.mat4[0]=-2*e,this.mat4[1]=0,this.mat4[2]=0,this.mat4[3]=0,this.mat4[4]=0,this.mat4[5]=-2*o,this.mat4[6]=0,this.mat4[7]=0,this.mat4[8]=0,this.mat4[9]=0,this.mat4[10]=2*s,this.mat4[11]=0,this.mat4[12]=(n+t)*e,this.mat4[13]=(r+i)*o,this.mat4[14]=(f+u)*s,this.mat4[15]=1,this};t.exports=i.Matrix},{"../core/constants":47,"../core/core":48,"../math/polargeometry":77}],36:[function(n,t){"use strict";var i=n("../core/core"),f=n("./shader");n("../core/p5.Renderer");n("./p5.Matrix");var u=[],r=1e3,e={alpha:!0,depth:!0,stencil:!0,antialias:!1,premultipliedAlpha:!1,preserveDrawingBuffer:!1};i.Renderer3D=function(n,t,r){i.Renderer.call(this,n,t,r);try{if(this.drawingContext=this.canvas.getContext("webgl",e)||this.canvas.getContext("experimental-webgl",e),this.drawingContext===null)throw new Error("Error creating webgl context");else console.log("p5.Renderer3D: enabled webgl context")}catch(f){throw new Error(f);}this.isP3D=!0;this.GL=this.drawingContext;var u=this.GL;return u.clearColor(1,1,1,1),u.clearDepth(1),u.enable(u.DEPTH_TEST),u.depthFunc(u.LEQUAL),u.enable(u.BLEND),u.blendFunc(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA),u.clear(u.COLOR_BUFFER_BIT|u.DEPTH_BUFFER_BIT),u.viewport(0,0,u.drawingBufferWidth,u.drawingBufferHeight),this._init(),this};i.Renderer3D.prototype=Object.create(i.Renderer.prototype);i.Renderer3D.prototype._applyDefaults=function(){return this};i.Renderer3D.prototype._init=function(){var n=this.GL;this.initMatrix();this.initHash();this.verticeStack=[];this.verticeBuffer=n.createBuffer();this.colorBuffer=n.createBuffer();this._setCamera=!1;this.ambientLightCount=0;this.directionalLightCount=0;this.pointLightCount=0};i.Renderer3D.prototype._update=function(){this.resetMatrix();this.translate(0,0,-800);this.ambientLightCount=0;this.directionalLightCount=0;this.pointLightCount=0;this.verticeStack=[]};i.Renderer3D.prototype.resize=function(n,t){var r=this.GL;i.Renderer.prototype.resize.call(this,n,t);r.viewport(0,0,r.drawingBufferWidth,r.drawingBufferHeight)};i.Renderer3D.prototype.background=function(){var n=this.GL,t=this._pInst.color.apply(this._pInst,arguments),i=t.levels[0]/255,r=t.levels[1]/255,u=t.levels[2]/255,f=t.levels[3]/255;n.clearColor(i,r,u,f);n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)};i.Renderer3D.prototype.initShaders=function(n,t,i){var r=this.GL,o=r.createShader(r.VERTEX_SHADER),e,u;return(r.shaderSource(o,f[n]),r.compileShader(o),!r.getShaderParameter(o,r.COMPILE_STATUS))?(alert("Yikes! An error occurred compiling the shaders:"+r.getShaderInfoLog(o)),null):(e=r.createShader(r.FRAGMENT_SHADER),r.shaderSource(e,f[t]),r.compileShader(e),!r.getShaderParameter(e,r.COMPILE_STATUS))?(alert("Darn! An error occurred compiling the shaders:"+r.getShaderInfoLog(e)),null):(u=r.createProgram(),r.attachShader(u,o),r.attachShader(u,e),r.linkProgram(u),r.getProgramParameter(u,r.LINK_STATUS)||alert("Snap! Error linking shader program"),this._getLocation(u,i),u)};i.Renderer3D.prototype._getLocation=function(n,t){var i=this.GL;i.useProgram(n);n.uResolution=i.getUniformLocation(n,"uResolution");i.uniform1f(n.uResolution,r);n.vertexPositionAttribute=i.getAttribLocation(n,"aPosition");i.enableVertexAttribArray(n.vertexPositionAttribute);n.uPMatrixUniform=i.getUniformLocation(n,"uProjectionMatrix");n.uMVMatrixUniform=i.getUniformLocation(n,"uModelViewMatrix");t===undefined&&(n.vertexNormalAttribute=i.getAttribLocation(n,"aNormal"),i.enableVertexAttribArray(n.vertexNormalAttribute),n.uNMatrixUniform=i.getUniformLocation(n,"uNormalMatrix"),n.textureCoordAttribute=i.getAttribLocation(n,"aTexCoord"),i.enableVertexAttribArray(n.textureCoordAttribute),n.samplerUniform=i.getUniformLocation(n,"uSampler"))};i.Renderer3D.prototype.setMatrixUniforms=function(n){var t=this.GL,r=this.mHash[n];t.useProgram(r);t.uniformMatrix4fv(r.uPMatrixUniform,!1,this.uPMatrix.mat4);t.uniformMatrix4fv(r.uMVMatrixUniform,!1,this.uMVMatrix.mat4);this.uNMatrix=new i.Matrix;this.uNMatrix.invert(this.uMVMatrix);this.uNMatrix.transpose(this.uNMatrix);t.uniformMatrix4fv(r.uNMatrixUniform,!1,this.uNMatrix.mat4)};i.Renderer3D.prototype._getShader=function(n,t,i){var r=n+"|"+t,u;return this.materialInHash(r)||(u=this.initShaders(n,t,i),this.mHash[r]=u),this.curShaderId=r,this.mHash[this.curShaderId]};i.Renderer3D.prototype._getCurShaderId=function(){if(this.curShaderId===undefined){var n="normalVert|normalFrag",t=this.initShaders("normalVert","normalFrag");this.mHash[n]=t;this.curShaderId=n}return this.curShaderId};i.Renderer3D.prototype._getCurColor=function(){return this.curColor===undefined&&(this.curColor=[.5,.5,.5,1]),this.curColor};i.Renderer3D.prototype.initHash=function(){this.gHash={};this.mHash={}};i.Renderer3D.prototype.geometryInHash=function(n){return this.gHash[n]!==undefined};i.Renderer3D.prototype.materialInHash=function(n){return this.mHash[n]!==undefined};i.Renderer3D.prototype.initMatrix=function(){this.uMVMatrix=new i.Matrix;this.uPMatrix=new i.Matrix;this.uNMatrix=new i.Matrix};i.Renderer3D.prototype.resetMatrix=function(){this.uMVMatrix=i.Matrix.identity()};i.Renderer3D.prototype._setDefaultCamera=function(){if(!this._setCamera){var n=this.width,t=this.height;this.uPMatrix=i.Matrix.identity();this.uPMatrix.perspective(60/180*Math.PI,n/t,.1,100);this._setCamera=!0}};i.Renderer3D.prototype.translate=function(n,t,i){return n=n/r,t=-t/r,i=i/r,this.uMVMatrix.translate([n,t,i]),this};i.Renderer3D.prototype.scale=function(n,t,i){return this.uMVMatrix.scale([n,t,i]),this};i.Renderer3D.prototype.rotate=function(n,t){return this.uMVMatrix.rotate(n,t),this};i.Renderer3D.prototype.rotateX=function(n){return this.uMVMatrix.rotateX(n),this};i.Renderer3D.prototype.rotateY=function(n){return this.uMVMatrix.rotateY(n),this};i.Renderer3D.prototype.rotateZ=function(n){return this.uMVMatrix.rotateZ(n),this};i.Renderer3D.prototype.push=function(){u.push(this.uMVMatrix.copy())};i.Renderer3D.prototype.pop=function(){if(u.length===0)throw new Error("Invalid popMatrix!");this.uMVMatrix=u.pop()};t.exports=i.Renderer3D},{"../core/core":48,"../core/p5.Renderer":54,"./p5.Matrix":35,"./shader":38}],37:[function(n,t){"use strict";var i=n("../core/core"),r=0;i.Renderer3D.prototype.createBuffer=function(n,t){var u,i;r++;r>1e3&&(u=Object.keys(this.gHash)[0],delete this.gHash[u],r--);i=this.GL;this.gHash[n]={};this.gHash[n].len=[];this.gHash[n].vertexBuffer=[];this.gHash[n].normalBuffer=[];this.gHash[n].uvBuffer=[];this.gHash[n].indexBuffer=[];t.forEach(function(t){this.gHash[n].len.push(t.len);this.gHash[n].vertexBuffer.push(i.createBuffer());this.gHash[n].normalBuffer.push(i.createBuffer());this.gHash[n].uvBuffer.push(i.createBuffer());this.gHash[n].indexBuffer.push(i.createBuffer())}.bind(this))};i.Renderer3D.prototype.initBuffer=function(n,t){var i,r;this._setDefaultCamera();i=this.GL;this.createBuffer(n,t);r=this.mHash[this._getCurShaderId()];t.forEach(function(t,u){i.bindBuffer(i.ARRAY_BUFFER,this.gHash[n].vertexBuffer[u]);i.bufferData(i.ARRAY_BUFFER,new Float32Array(t.vertices),i.STATIC_DRAW);i.vertexAttribPointer(r.vertexPositionAttribute,3,i.FLOAT,!1,0,0);i.bindBuffer(i.ARRAY_BUFFER,this.gHash[n].normalBuffer[u]);i.bufferData(i.ARRAY_BUFFER,new Float32Array(t.vertexNormals),i.STATIC_DRAW);i.vertexAttribPointer(r.vertexNormalAttribute,3,i.FLOAT,!1,0,0);i.bindBuffer(i.ARRAY_BUFFER,this.gHash[n].uvBuffer[u]);i.bufferData(i.ARRAY_BUFFER,new Float32Array(t.uvs),i.STATIC_DRAW);i.vertexAttribPointer(r.textureCoordAttribute,2,i.FLOAT,!1,0,0);i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,this.gHash[n].indexBuffer[u]);i.bufferData(i.ELEMENT_ARRAY_BUFFER,new Uint16Array(t.faces),i.STATIC_DRAW)}.bind(this))};i.Renderer3D.prototype.drawBuffer=function(n){this._setDefaultCamera();var t=this.GL,r=this._getCurShaderId(),i=this.mHash[r];this.gHash[n].len.forEach(function(u,f){t.bindBuffer(t.ARRAY_BUFFER,this.gHash[n].vertexBuffer[f]);t.vertexAttribPointer(i.vertexPositionAttribute,3,t.FLOAT,!1,0,0);t.bindBuffer(t.ARRAY_BUFFER,this.gHash[n].normalBuffer[f]);t.vertexAttribPointer(i.vertexNormalAttribute,3,t.FLOAT,!1,0,0);t.bindBuffer(t.ARRAY_BUFFER,this.gHash[n].uvBuffer[f]);t.vertexAttribPointer(i.textureCoordAttribute,2,t.FLOAT,!1,0,0);t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,this.gHash[n].indexBuffer[f]);this.setMatrixUniforms(r);t.drawElements(t.TRIANGLES,this.gHash[n].len[f],t.UNSIGNED_SHORT,0)}.bind(this))};t.exports=i.Renderer3D},{"../core/core":48}],38:[function(n,t){t.exports={vertexColorVert:"attribute vec3 aPosition;\nattribute vec4 aVertexColor;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform float uResolution;\n\nvarying vec4 vColor;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution * vec3(1.0, -1.0, 1.0), 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vColor = aVertexColor;\n}",vertexColorFrag:"precision mediump float;\nvarying vec4 vColor;\nvoid main(void) {\n  gl_FragColor = vColor;\n}",normalVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uNormalMatrix;\nuniform float uResolution;\n\nvarying vec3 vVertexNormal;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n  vVertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\n  vVertTexCoord = aTexCoord;\n}",normalFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nvoid main(void) {\n  gl_FragColor = vec4(vVertexNormal, 1.0);\n}",basicFrag:"precision mediump float;\nvarying vec3 vVertexNormal;\nuniform vec4 uMaterialColor;\nvoid main(void) {\n  gl_FragColor = uMaterialColor;\n}",lightVert:"attribute vec3 aPosition;\nattribute vec3 aNormal;\nattribute vec2 aTexCoord;\n\nuniform mat4 uModelViewMatrix;\nuniform mat4 uProjectionMatrix;\nuniform mat4 uNormalMatrix;\nuniform float uResolution;\nuniform int uAmbientLightCount;\nuniform int uDirectionalLightCount;\nuniform int uPointLightCount;\n\nuniform vec3 uAmbientColor[8];\nuniform vec3 uLightingDirection[8];\nuniform vec3 uDirectionalColor[8];\nuniform vec3 uPointLightLocation[8];\nuniform vec3 uPointLightColor[8];\nuniform bool uSpecular;\n\nvarying vec3 vVertexNormal;\nvarying vec2 vVertTexCoord;\nvarying vec3 vLightWeighting;\n\nvec3 ambientLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 directionalLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor = vec3(0.0, 0.0, 0.0);\nvec3 pointLightFactor2 = vec3(0.0, 0.0, 0.0);\n\nvoid main(void){\n\n  vec4 positionVec4 = vec4(aPosition / uResolution, 1.0);\n  gl_Position = uProjectionMatrix * uModelViewMatrix * positionVec4;\n\n  vec3 vertexNormal = vec3( uNormalMatrix * vec4( aNormal, 1.0 ) );\n  vVertexNormal = vertexNormal;\n  vVertTexCoord = aTexCoord;\n\n  vec4 mvPosition = uModelViewMatrix * vec4(aPosition / uResolution, 1.0);\n  vec3 eyeDirection = normalize(-mvPosition.xyz);\n\n  float shininess = 32.0;\n  float specularFactor = 2.0;\n  float diffuseFactor = 0.3;\n\n  for(int i = 0; i < 8; i++){\n    if(uAmbientLightCount == i) break;\n    ambientLightFactor += uAmbientColor[i];\n  }\n\n  for(int j = 0; j < 8; j++){\n    if(uDirectionalLightCount == j) break;\n    vec3 dir = uLightingDirection[j];\n    float directionalLightWeighting = max(dot(vertexNormal, dir), 0.0);\n    directionalLightFactor += uDirectionalColor[j] * directionalLightWeighting;\n  }\n\n  for(int k = 0; k < 8; k++){\n    if(uPointLightCount == k) break;\n    vec3 loc = uPointLightLocation[k];\n    //loc = loc / uResolution;\n    vec3 lightDirection = normalize(loc - mvPosition.xyz);\n\n    float directionalLightWeighting = max(dot(vertexNormal, lightDirection), 0.0);\n    pointLightFactor += uPointLightColor[k] * directionalLightWeighting;\n\n    //factor2 for specular\n    vec3 reflectionDirection = reflect(-lightDirection, vertexNormal);\n    float specularLightWeighting = pow(max(dot(reflectionDirection, eyeDirection), 0.0), shininess);\n\n    pointLightFactor2 += uPointLightColor[k] * (specularFactor * specularLightWeighting\n      +  directionalLightWeighting * diffuseFactor);\n  }\n  \n  if(!uSpecular){\n    vLightWeighting =  ambientLightFactor + directionalLightFactor + pointLightFactor;\n  }else{\n    vLightWeighting = ambientLightFactor + directionalLightFactor + pointLightFactor2;\n  }\n\n}",lightTextureFrag:"precision mediump float;\n\nuniform vec4 uMaterialColor;\nuniform sampler2D uSampler;\nuniform bool isTexture;\n\nvarying vec3 vLightWeighting;\nvarying highp vec2 vVertTexCoord;\n\nvoid main(void) {\n  if(!isTexture){\n    gl_FragColor = vec4(vec3(uMaterialColor.rgb * vLightWeighting), uMaterialColor.a);\n  }else{\n    vec4 textureColor = texture2D(uSampler, vVertTexCoord);\n    if(vLightWeighting == vec3(0., 0., 0.)){\n      gl_FragColor = textureColor;\n    }else{\n      gl_FragColor = vec4(vec3(textureColor.rgb * vLightWeighting), textureColor.a); \n    }\n  }\n}"}},{}],39:[function(n,t){"use strict";var r=n("./core/core"),i;n("./color/p5.Color");n("./core/p5.Element");n("./typography/p5.Font");n("./core/p5.Graphics");n("./core/p5.Renderer2D");n("./image/p5.Image");n("./math/p5.Vector");n("./io/p5.TableRow");n("./io/p5.Table");n("./color/creating_reading");n("./color/setting");n("./core/constants");n("./utilities/conversion");n("./utilities/array_functions");n("./utilities/string_functions");n("./core/environment");n("./image/image");n("./image/loading_displaying");n("./image/pixels");n("./io/files");n("./events/keyboard");n("./events/acceleration");n("./events/mouse");n("./utilities/time_date");n("./events/touch");n("./math/math");n("./math/calculation");n("./math/random");n("./math/noise");n("./math/trigonometry");n("./core/rendering");n("./core/2d_primitives");n("./core/attributes");n("./core/curves");n("./core/vertex");n("./core/structure");n("./core/transform");n("./typography/attributes");n("./typography/loading_displaying");n("./3d/p5.Renderer3D");n("./3d/p5.Geometry3D");n("./3d/retainedMode3D");n("./3d/immediateMode3D");n("./3d/3d_primitives");n("./3d/p5.Matrix");n("./3d/material");n("./3d/light");n("./3d/shader");n("./3d/camera");n("./3d/interaction");i=function(){window.PHANTOMJS||window.mocha||(window.setup&&typeof setup=="function"||window.draw&&typeof draw=="function")&&new r};document.readyState==="complete"?i():window.addEventListener("load",i,!1);t.exports=r},{"./3d/3d_primitives":28,"./3d/camera":29,"./3d/immediateMode3D":30,"./3d/interaction":31,"./3d/light":32,"./3d/material":33,"./3d/p5.Geometry3D":34,"./3d/p5.Matrix":35,"./3d/p5.Renderer3D":36,"./3d/retainedMode3D":37,"./3d/shader":38,"./color/creating_reading":41,"./color/p5.Color":42,"./color/setting":43,"./core/2d_primitives":44,"./core/attributes":45,"./core/constants":47,"./core/core":48,"./core/curves":49,"./core/environment":50,"./core/p5.Element":52,"./core/p5.Graphics":53,"./core/p5.Renderer2D":55,"./core/rendering":56,"./core/structure":58,"./core/transform":59,"./core/vertex":60,"./events/acceleration":61,"./events/keyboard":62,"./events/mouse":63,"./events/touch":64,"./image/image":66,"./image/loading_displaying":67,"./image/p5.Image":68,"./image/pixels":69,"./io/files":70,"./io/p5.Table":71,"./io/p5.TableRow":72,"./math/calculation":73,"./math/math":74,"./math/noise":75,"./math/p5.Vector":76,"./math/random":78,"./math/trigonometry":79,"./typography/attributes":80,"./typography/loading_displaying":81,"./typography/p5.Font":82,"./utilities/array_functions":83,"./utilities/conversion":84,"./utilities/string_functions":85,"./utilities/time_date":86}],40:[function(n,t){"use strict";var i=n("../core/core");i.ColorConversion={};i.ColorConversion._hsbaToHSLA=function(n){var u=n[0],t=n[1],r=n[2],i=(2-t)*r/2;return i!==0&&(t=i===1?0:i<.5?t/(2-t):t*r/(2-i*2)),[u,t,i,n[3]]};i.ColorConversion._hsbaToRGBA=function(n){var s=n[0]*6,o=n[1],t=n[2],h=[];if(o===0)h=[t,t,t,n[3]];else{var i=Math.floor(s),e=t*(1-o),c=t*(1-o*(s-i)),l=t*(1-o*(1+i-s)),r,u,f;i===0?(r=t,u=l,f=e):i===1?(r=c,u=t,f=e):i===2?(r=e,u=t,f=l):i===3?(r=e,u=c,f=t):i===4?(r=l,u=e,f=t):(r=t,u=e,f=c);h=[r,u,f,n[3]]}return h};i.ColorConversion._hslaToHSBA=function(n){var u=n[0],t=n[1],i=n[2],r;return r=i<.5?(1+t)*i:i+t-i*t,t=2*(r-i)/r,[u,t,r,n[3]]};i.ColorConversion._hslaToRGBA=function(n){var e=n[0]*6,r=n[1],t=n[2],o=[],i,u,f;return r===0?o=[t,t,t,n[3]]:(i=t<.5?(1+r)*t:t+r-t*r,u=2*t-i,f=function(n,t,i){return n<0?n+=6:n>=6&&(n-=6),n<1?t+(i-t)*n:n<3?i:n<4?t+(i-t)*(4-n):t},o=[f(e+2,u,i),f(e,u,i),f(e-2,u,i),n[3]]),o};i.ColorConversion._rgbaToHSBA=function(n){var r=n[0],u=n[1],f=n[2],i=Math.max(r,u,f),e=i-Math.min(r,u,f),t,o;return e===0?(t=0,o=0):(o=e/i,r===i?t=(u-f)/e:u===i?t=2+(f-r)/e:f===i&&(t=4+(r-u)/e),t<0?t+=6:t>=6&&(t-=6)),[t/6,o,i,n[3]]};i.ColorConversion._rgbaToHSLA=function(n){var r=n[0],u=n[1],f=n[2],e=Math.max(r,u,f),h=Math.min(r,u,f),o=e+h,i=e-h,t,s;return i===0?(t=0,s=0):(s=o<1?i/o:i/(2-i),r===e?t=(u-f)/i:u===e?t=2+(f-r)/i:f===e&&(t=4+(r-u)/i),t<0?t+=6:t>=6&&(t-=6)),[t/6,s,o/2,n[3]]};t.exports=i.ColorConversion},{"../core/core":48}],41:[function(n,t){"use strict";var i=n("../core/core"),r=n("../core/constants");n("./p5.Color");i.prototype.alpha=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getAlpha();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.blue=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getBlue();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.brightness=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getBrightness();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.color=function(){return arguments[0]instanceof i.Color?arguments[0]:arguments[0]instanceof Array?this instanceof i.Renderer?new i.Color(this,arguments[0]):new i.Color(this._renderer,arguments[0]):this instanceof i.Renderer?new i.Color(this,arguments):new i.Color(this._renderer,arguments)};i.prototype.green=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getGreen();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.hue=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getHue();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.lerpColor=function(n,t,i){var u=this._renderer._colorMode,o=this._renderer._colorMaxes,s,h,c,l,f,e;if(u===r.RGB)f=n.levels.map(function(n){return n/255}),e=t.levels.map(function(n){return n/255});else if(u===r.HSB)n._getBrightness(),t._getBrightness(),f=n.hsba,e=t.hsba;else if(u===r.HSL)n._getLightness(),t._getLightness(),f=n.hsla,e=t.hsla;else throw new Error(u+"cannot be used for interpolation.");return i=Math.max(Math.min(i,1),0),s=this.lerp(f[0],e[0],i),h=this.lerp(f[1],e[1],i),c=this.lerp(f[2],e[2],i),l=this.lerp(f[3],e[3],i),s*=o[u][0],h*=o[u][1],c*=o[u][2],l*=o[u][3],this.color(s,h,c,l)};i.prototype.lightness=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getLightness();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.red=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getRed();throw new Error("Needs p5.Color or pixel array as argument.");};i.prototype.saturation=function(n){if(n instanceof i.Color||n instanceof Array)return this.color(n)._getSaturation();throw new Error("Needs p5.Color or pixel array as argument.");};t.exports=i},{"../core/constants":47,"../core/core":48,"./p5.Color":42}],42:[function(n,t){var u=n("../core/core"),r=n("../core/constants"),e=n("./color_conversion");u.Color=function(n,t){if(this.mode=n._colorMode,this.maxes=n._colorMaxes,this.mode!==r.RGB&&this.mode!==r.HSL&&this.mode!==r.HSB)throw new Error(this.mode+" is an invalid colorMode.");else this._array=u.Color._parseInputs.apply(n,t);return this.levels=this._array.map(function(n){return Math.round(n*255)}),this};u.Color.prototype.toString=function(){var n=this.levels;return n[3]=this._array[3],"rgba("+n[0]+","+n[1]+","+n[2]+","+n[3]+")"};u.Color.prototype._getAlpha=function(){return this._array[3]*this.maxes[this.mode][3]};u.Color.prototype._getBlue=function(){return this._array[2]*this.maxes[r.RGB][2]};u.Color.prototype._getBrightness=function(){return this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsba[2]*this.maxes[r.HSB][2]};u.Color.prototype._getGreen=function(){return this._array[1]*this.maxes[r.RGB][1]};u.Color.prototype._getHue=function(){return this.mode===r.HSB?(this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsba[0]*this.maxes[r.HSB][0]):(this.hsla||(this.hsla=e._rgbaToHSLA(this._array)),this.hsla[0]*this.maxes[r.HSL][0])};u.Color.prototype._getLightness=function(){return this.hsla||(this.hsla=e._rgbaToHSLA(this._array)),this.hsla[2]*this.maxes[r.HSL][2]};u.Color.prototype._getRed=function(){return this._array[0]*this.maxes[r.RGB][0]};u.Color.prototype._getSaturation=function(){return this.mode===r.HSB?(this.hsba||(this.hsba=e._rgbaToHSBA(this._array)),this.hsba[1]*this.maxes[r.HSB][1]):(this.hsla||(this.hsla=e._rgbaToHSLA(this._array)),this.hsla[1]*this.maxes[r.HSL][1])};var c={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},s=/\s*/,o=/(\d{1,3})/,h=/((?:\d+(?:\.\d+)?)|(?:\.\d+))/,f=new RegExp(h.source+"%"),i={HEX3:/^#([a-f0-9])([a-f0-9])([a-f0-9])$/i,HEX6:/^#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/i,RGB:new RegExp(["^rgb\\(",o.source,",",o.source,",",o.source,"\\)$"].join(s.source),"i"),RGB_PERCENT:new RegExp(["^rgb\\(",f.source,",",f.source,",",f.source,"\\)$"].join(s.source),"i"),RGBA:new RegExp(["^rgba\\(",o.source,",",o.source,",",o.source,",",h.source,"\\)$"].join(s.source),"i"),RGBA_PERCENT:new RegExp(["^rgba\\(",f.source,",",f.source,",",f.source,",",h.source,"\\)$"].join(s.source),"i"),HSL:new RegExp(["^hsl\\(",o.source,",",f.source,",",f.source,"\\)$"].join(s.source),"i"),HSLA:new RegExp(["^hsla\\(",o.source,",",f.source,",",f.source,",",h.source,"\\)$"].join(s.source),"i"),HSB:new RegExp(["^hsb\\(",o.source,",",f.source,",",f.source,"\\)$"].join(s.source),"i"),HSBA:new RegExp(["^hsba\\(",o.source,",",f.source,",",f.source,",",h.source,"\\)$"].join(s.source),"i")};u.Color._parseInputs=function(){var s=arguments.length,f=this._colorMode,o=this._colorMaxes,n=[],t;if(s>=3)return n[0]=arguments[0]/o[f][0],n[1]=arguments[1]/o[f][1],n[2]=arguments[2]/o[f][2],n[3]=typeof arguments[3]=="number"?arguments[3]/o[f][3]:1,n=n.map(function(n){return Math.max(Math.min(n,1),0)}),f===r.HSL?e._hslaToRGBA(n):f===r.HSB?e._hsbaToRGBA(n):n;if(s===1&&typeof arguments[0]=="string"){if(t=arguments[0].trim().toLowerCase(),c[t])return u.Color._parseInputs.apply(this,[c[t]]);if(i.HEX3.test(t))return n=i.HEX3.exec(t).slice(1).map(function(n){return parseInt(n+n,16)/255}),n[3]=1,n;if(i.HEX6.test(t))return n=i.HEX6.exec(t).slice(1).map(function(n){return parseInt(n,16)/255}),n[3]=1,n;if(i.RGB.test(t))return n=i.RGB.exec(t).slice(1).map(function(n){return n/255}),n[3]=1,n;if(i.RGB_PERCENT.test(t))return n=i.RGB_PERCENT.exec(t).slice(1).map(function(n){return parseFloat(n)/100}),n[3]=1,n;if(i.RGBA.test(t))return i.RGBA.exec(t).slice(1).map(function(n,t){return t===3?parseFloat(n):n/255});if(i.RGBA_PERCENT.test(t))return i.RGBA_PERCENT.exec(t).slice(1).map(function(n,t){return t===3?parseFloat(n):parseFloat(n)/100});if(i.HSL.test(t)?(n=i.HSL.exec(t).slice(1).map(function(n,t){return t===0?parseInt(n,10)/360:parseInt(n,10)/100}),n[3]=1):i.HSLA.test(t)&&(n=i.HSLA.exec(t).slice(1).map(function(n,t){return t===0?parseInt(n,10)/360:t===3?parseFloat(n):parseInt(n,10)/100})),n.length)return e._hslaToRGBA(n);if(i.HSB.test(t)?(n=i.HSB.exec(t).slice(1).map(function(n,t){return t===0?parseInt(n,10)/360:parseInt(n,10)/100}),n[3]=1):i.HSBA.test(t)&&(n=i.HSBA.exec(t).slice(1).map(function(n,t){return t===0?parseInt(n,10)/360:t===3?parseFloat(n):parseInt(n,10)/100})),n.length)return e._hsbaToRGBA(n);n=[1,1,1,1]}else if((s===1||s===2)&&typeof arguments[0]=="number")n[0]=arguments[0]/o[f][2],n[1]=arguments[0]/o[f][2],n[2]=arguments[0]/o[f][2],n[3]=typeof arguments[1]=="number"?arguments[1]/o[f][3]:1,n=n.map(function(n){return Math.max(Math.min(n,1),0)});else throw new Error(arguments+"is not a valid color representation.");return n};t.exports=u.Color},{"../core/constants":47,"../core/core":48,"./color_conversion":40}],43:[function(n,t){"use strict";var i=n("../core/core"),r=n("../core/constants");n("./p5.Color");i.prototype.background=function(){return arguments[0]instanceof i.Image?this.image(arguments[0],0,0,this.width,this.height):this._renderer.background.apply(this._renderer,arguments),this};i.prototype.clear=function(){return this._renderer.clear(),this};i.prototype.colorMode=function(){if(arguments[0]===r.RGB||arguments[0]===r.HSB||arguments[0]===r.HSL){this._renderer._colorMode=arguments[0];var n=this._renderer._colorMaxes[this._renderer._colorMode];arguments.length===2?(n[0]=arguments[1],n[1]=arguments[1],n[2]=arguments[1],n[3]=arguments[1]):arguments.length===4?(n[0]=arguments[1],n[1]=arguments[2],n[2]=arguments[3]):arguments.length===5&&(n[0]=arguments[1],n[1]=arguments[2],n[2]=arguments[3],n[3]=arguments[4])}return this};i.prototype.fill=function(){return this._renderer._setProperty("_fillSet",!0),this._renderer._setProperty("_doFill",!0),this._renderer.fill.apply(this._renderer,arguments),this};i.prototype.noFill=function(){return this._renderer._setProperty("_doFill",!1),this};i.prototype.noStroke=function(){return this._renderer._setProperty("_doStroke",!1),this};i.prototype.stroke=function(){return this._renderer._setProperty("_strokeSet",!0),this._renderer._setProperty("_doStroke",!0),this._renderer.stroke.apply(this._renderer,arguments),this};t.exports=i},{"../core/constants":47,"../core/core":48,"./p5.Color":42}],44:[function(n,t){"use strict";var r=n("./core"),i=n("./constants");n("./error_helpers");r.prototype.arc=function(n,t,r,u,f,e,o){for(var h=new Array(arguments.length),s=0;s<h.length;++s)h[s]=arguments[s];if(this._validateParameters("arc",h,[["Number","Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","String"]]),!this._renderer._doStroke&&!this._renderer._doFill)return this;for(this._angleMode===i.DEGREES&&(f=this.radians(f),e=this.radians(e));f<0;)f+=i.TWO_PI;while(e<0)e+=i.TWO_PI;return f%=i.TWO_PI,e%=i.TWO_PI,f=f<=i.HALF_PI?Math.atan(r/u*Math.tan(f)):f>i.HALF_PI&&f<=3*i.HALF_PI?Math.atan(r/u*Math.tan(f))+i.PI:Math.atan(r/u*Math.tan(f))+i.TWO_PI,e=e<=i.HALF_PI?Math.atan(r/u*Math.tan(e)):e>i.HALF_PI&&e<=3*i.HALF_PI?Math.atan(r/u*Math.tan(e))+i.PI:Math.atan(r/u*Math.tan(e))+i.TWO_PI,f>e&&(e+=i.TWO_PI),r=Math.abs(r),u=Math.abs(u),this._renderer.arc(n,t,r,u,f,e,o),this};r.prototype.ellipse=function(n,t,i,r){for(var f=new Array(arguments.length),u=0;u<f.length;++u)f[u]=arguments[u];return(this._validateParameters("ellipse",f,["Number","Number","Number","Number"]),!this._renderer._doStroke&&!this._renderer._doFill)?this:(i=Math.abs(i),r=Math.abs(r),this._renderer.ellipse(n,t,i,r),this)};r.prototype.line=function(){var n,t;if(!this._renderer._doStroke)return this;for(n=new Array(arguments.length),t=0;t<n.length;++t)n[t]=arguments[t];return this._renderer.isP3D?(this._validateParameters("line",n,[["Number","Number","Number","Number","Number","Number"]]),this._renderer.line(n[0],n[1],n[2],n[3],n[4],n[5])):(this._validateParameters("line",n,[["Number","Number","Number","Number"],]),this._renderer.line(n[0],n[1],n[2],n[3])),this};r.prototype.point=function(){var n,t;if(!this._renderer._doStroke)return this;for(n=new Array(arguments.length),t=0;t<n.length;++t)n[t]=arguments[t];return this._renderer.isP3D?(this._validateParameters("point",n,[["Number","Number","Number"]]),this._renderer.point(n[0],n[1],n[2])):(this._validateParameters("point",n,[["Number","Number"]]),this._renderer.point(n[0],n[1])),this};r.prototype.quad=function(){var n,t;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(n=new Array(arguments.length),t=0;t<n.length;++t)n[t]=arguments[t];return this._renderer.isP3D?(this._validateParameters("quad",n,[["Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer.quad(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8],n[9],n[10],n[11])):(this._validateParameters("quad",n,[["Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer.quad(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7])),this};r.prototype.rect=function(n,t,i,r,u,f,e,o){for(var h=new Array(arguments.length),s=0;s<h.length;++s)h[s]=arguments[s];if(this._validateParameters("rect",h,[["Number","Number","Number","Number"],["Number","Number","Number","Number","Number"],["Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer._doStroke||this._renderer._doFill)return this._renderer.rect(n,t,i,r,u,f,e,o),this};r.prototype.triangle=function(){var n,t;if(!this._renderer._doStroke&&!this._renderer._doFill)return this;for(n=new Array(arguments.length),t=0;t<n.length;++t)n[t]=arguments[t];return this._renderer.isP3D?(this._validateParameters("triangle",n,[["Number","Number","Number","Number","Number","Number","Number","Number","Number"]]),this._renderer.triangle(n[0],n[1],n[2],n[3],n[4],n[5],n[6],n[7],n[8])):(this._validateParameters("triangle",n,[["Number","Number","Number","Number","Number","Number"]]),this._renderer.triangle(n[0],n[1],n[2],n[3],n[4],n[5])),this};t.exports=r},{"./constants":47,"./core":48,"./error_helpers":51}],45:[function(n,t){"use strict";var r=n("./core"),i=n("./constants");r.prototype.ellipseMode=function(n){return(n===i.CORNER||n===i.CORNERS||n===i.RADIUS||n===i.CENTER)&&(this._renderer._ellipseMode=n),this};r.prototype.noSmooth=function(){return this._renderer.noSmooth(),this};r.prototype.rectMode=function(n){return(n===i.CORNER||n===i.CORNERS||n===i.RADIUS||n===i.CENTER)&&(this._renderer._rectMode=n),this};r.prototype.smooth=function(){return this._renderer.smooth(),this};r.prototype.strokeCap=function(n){return(n===i.ROUND||n===i.SQUARE||n===i.PROJECT)&&this._renderer.strokeCap(n),this};r.prototype.strokeJoin=function(n){return(n===i.ROUND||n===i.BEVEL||n===i.MITER)&&this._renderer.strokeJoin(n),this};r.prototype.strokeWeight=function(n){return this._renderer.strokeWeight(n),this};t.exports=r},{"./constants":47,"./core":48}],46:[function(n,t){var i=n("./constants");t.exports={modeAdjust:function(n,t,r,u,f){return f===i.CORNER?{x:n,y:t,w:r,h:u}:f===i.CORNERS?{x:n,y:t,w:r-n,h:u-t}:f===i.RADIUS?{x:n-r,y:t-u,w:2*r,h:2*u}:f===i.CENTER?{x:n-r*.5,y:t-u*.5,w:r,h:u}:void 0},arcModeAdjust:function(n,t,r,u,f){return f===i.CORNER?{x:n+r*.5,y:t+u*.5,w:r,h:u}:f===i.CORNERS?{x:n,y:t,w:r+n,h:u+t}:f===i.RADIUS?{x:n,y:t,w:2*r,h:2*u}:f===i.CENTER?{x:n,y:t,w:r,h:u}:void 0}}},{"./constants":47}],47:[function(n,t){var i=Math.PI;t.exports={P2D:"p2d",WEBGL:"webgl",ARROW:"default",CROSS:"crosshair",HAND:"pointer",MOVE:"move",TEXT:"text",WAIT:"wait",HALF_PI:i/2,PI:i,QUARTER_PI:i/4,TAU:i*2,TWO_PI:i*2,DEGREES:"degrees",RADIANS:"radians",CORNER:"corner",CORNERS:"corners",RADIUS:"radius",RIGHT:"right",LEFT:"left",CENTER:"center",TOP:"top",BOTTOM:"bottom",BASELINE:"alphabetic",POINTS:"points",LINES:"lines",TRIANGLES:"triangles",TRIANGLE_FAN:"triangles_fan",TRIANGLE_STRIP:"triangles_strip",QUADS:"quads",QUAD_STRIP:"quad_strip",CLOSE:"close",OPEN:"open",CHORD:"chord",PIE:"pie",PROJECT:"square",SQUARE:"butt",ROUND:"round",BEVEL:"bevel",MITER:"miter",RGB:"rgb",HSB:"hsb",HSL:"hsl",AUTO:"auto",ALT:18,BACKSPACE:8,CONTROL:17,DELETE:46,DOWN_ARROW:40,ENTER:13,ESCAPE:27,LEFT_ARROW:37,OPTION:18,RETURN:13,RIGHT_ARROW:39,SHIFT:16,TAB:9,UP_ARROW:38,BLEND:"normal",ADD:"lighter",DARKEST:"darken",LIGHTEST:"lighten",DIFFERENCE:"difference",EXCLUSION:"exclusion",MULTIPLY:"multiply",SCREEN:"screen",REPLACE:"source-over",OVERLAY:"overlay",HARD_LIGHT:"hard-light",SOFT_LIGHT:"soft-light",DODGE:"color-dodge",BURN:"color-burn",THRESHOLD:"threshold",GRAY:"gray",OPAQUE:"opaque",INVERT:"invert",POSTERIZE:"posterize",DILATE:"dilate",ERODE:"erode",BLUR:"blur",NORMAL:"normal",ITALIC:"italic",BOLD:"bold",_DEFAULT_TEXT_FILL:"#000000",_DEFAULT_LEADMULT:1.25,_CTX_MIDDLE:"middle",LINEAR:"linear",QUADRATIC:"quadratic",BEZIER:"bezier",CURVE:"curve",_DEFAULT_STROKE:"#000000",_DEFAULT_FILL:"#FFFFFF"}},{}],48:[function(n,t){"use strict";n("./shim");var r=n("./constants"),i=function(n,t,u){var s,f,v,e,o,h,c,l,a;arguments.length===2&&typeof t=="boolean"&&(u=t,t=undefined);this._setupDone=!1;this._pixelDensity=Math.ceil(window.devicePixelRatio)||1;this._userNode=t;this._curElement=null;this._elements=[];this._requestAnimId=0;this._preloadCount=0;this._isGlobal=!1;this._loop=!0;this._styles=[];this._defaultCanvasSize={width:100,height:100};this._events={mousemove:null,mousedown:null,mouseup:null,dragend:null,dragover:null,click:null,mouseover:null,mouseout:null,keydown:null,keyup:null,keypress:null,touchstart:null,touchmove:null,touchend:null,resize:null,blur:null};window.DeviceOrientationEvent&&(this._events.deviceorientation=null);window.DeviceMotionEvent&&!window._isNodeWebkit&&(this._events.devicemotion=null);this._events.wheel=null;this._loadingScreenId="p5_loading";this._start=function(){var u,t,f,n,r;if(this._userNode&&typeof this._userNode=="string"&&(this._userNode=document.getElementById(this._userNode)),this.createCanvas(this._defaultCanvasSize.width,this._defaultCanvasSize.height,"p2d",!0),u=this.preload||window.preload,u){t=document.getElementById(this._loadingScreenId);t||(t=document.createElement("div"),t.innerHTML="Loading...",t.style.position="absolute",t.id=this._loadingScreenId,f=this._userNode||document.body,f.appendChild(t));for(n in this._preloadMethods)this._preloadMethods[n]=this._preloadMethods[n]||i,r=this._preloadMethods[n],(r===i.prototype||r===i)&&(r=this._isGlobal?window:this),this._registeredPreloadMethods[n]=r[n],r[n]=this._wrapPreload(r,n);u();this._runIfPreloadsAreDone()}else this._setup(),this._runFrames(),this._draw()}.bind(this);this._runIfPreloadsAreDone=function(){var n=this._isGlobal?window:this,t;n._preloadCount===0&&(t=document.getElementById(n._loadingScreenId),t&&t.parentNode.removeChild(t),n._setup(),n._runFrames(),n._draw())};this._decrementPreload=function(){var n=this._isGlobal?window:this;n._setProperty("_preloadCount",n._preloadCount-1);n._runIfPreloadsAreDone()};this._wrapPreload=function(n,t){return function(){this._incrementPreload();var i=Array.prototype.slice.call(arguments);return i.push(this._decrementPreload.bind(this)),this._registeredPreloadMethods[t].apply(n,i)}.bind(this)};this._incrementPreload=function(){var n=this._isGlobal?window:this;n._setProperty("_preloadCount",n._preloadCount+1)};this._setup=function(){var n=this._isGlobal?window:this,t,f,u,i,r;if(typeof n.preload=="function")for(t in this._preloadMethods)n[t]=this._preloadMethods[t][t],n[t]&&this&&(n[t]=n[t].bind(this));for(typeof n.setup=="function"&&n.setup(),f=new RegExp(/(^|\s)p5_hidden(?!\S)/g),u=document.getElementsByClassName("p5_hidden"),i=0;i<u.length;i++)r=u[i],r.style.visibility="",r.className=r.className.replace(f,"");this._setupDone=!0}.bind(this);this._draw=function(){var n=window.performance.now(),t=n-this._lastFrameTime,i=1e3/this._targetFrameRate;(!this._loop||t>=i-5)&&(this._renderer.isP3D&&this._renderer._update(),this._setProperty("frameCount",this.frameCount+1),this._updateMouseCoords(),this._updateTouchCoords(),this.redraw(),this._frameRate=1e3/(n-this._lastFrameTime),this._lastFrameTime=n);this._loop&&(this._requestAnimId=window.requestAnimationFrame(this._draw))}.bind(this);this._runFrames=function(){this._updateInterval&&clearInterval(this._updateInterval)}.bind(this);this._setProperty=function(n,t){this[n]=t;this._isGlobal&&(window[n]=t)}.bind(this);this.remove=function(){var u,t,n,f,o,e,r;if(this._curElement){this._loop=!1;this._requestAnimId&&window.cancelAnimationFrame(this._requestAnimId);for(u in this._events)window.removeEventListener(u,this._events[u]);for(t=0;t<this._elements.length;t++){n=this._elements[t];n.elt.parentNode&&n.elt.parentNode.removeChild(n.elt);for(f in n._events)n.elt.removeEventListener(f,n._events[f])}if(o=this,this._registeredMethods.remove.forEach(function(n){typeof n!="undefined"&&n.call(o)}),this._isGlobal){for(e in i.prototype)try{delete window[e]}catch(s){window[e]=undefined}for(r in this)if(this.hasOwnProperty(r))try{delete window[r]}catch(s){window[r]=undefined}}}}.bind(this);for(s in r)i.prototype[s]=r[s];if(n)n(this);else{this._isGlobal=!0;for(f in i.prototype)typeof i.prototype[f]=="function"?(v=f.substring(2),this._events.hasOwnProperty(v)||(window[f]=i.prototype[f].bind(this))):window[f]=i.prototype[f];for(e in this)this.hasOwnProperty(e)&&(window[e]=this[e])}for(o in this._events)h=this["_on"+o],h&&(c=h.bind(this),window.addEventListener(o,c),this._events[o]=c);l=function(){this._setProperty("focused",!0)}.bind(this);a=function(){this._setProperty("focused",!1)}.bind(this);window.addEventListener("focus",l);window.addEventListener("blur",a);this.registerMethod("remove",function(){window.removeEventListener("focus",l);window.removeEventListener("blur",a)});u?this._start():document.readyState==="complete"?this._start():window.addEventListener("load",this._start.bind(this),!1)};i.prototype._preloadMethods={loadJSON:i.prototype,loadImage:i.prototype,loadStrings:i.prototype,loadXML:i.prototype,loadShape:i.prototype,loadTable:i.prototype,loadFont:i.prototype};i.prototype._registeredMethods={pre:[],post:[],remove:[]};i.prototype._registeredPreloadMethods={};i.prototype.registerPreloadMethod=function(n,t){i.prototype._preloadMethods.hasOwnProperty(n)||(i.prototype._preloadMethods[n]=t)};i.prototype.registerMethod=function(n,t){i.prototype._registeredMethods.hasOwnProperty(n)||(i.prototype._registeredMethods[n]=[]);i.prototype._registeredMethods[n].push(t)};t.exports=i},{"./constants":47,"./shim":57}],49:[function(n,t){"use strict";var i=n("./core"),r,u;n("./error_helpers");r=20;u=20;i.prototype.bezier=function(n,t,i,r,u,f,e,o){for(var h=new Array(arguments.length),s=0;s<h.length;++s)h[s]=arguments[s];return(this._validateParameters("bezier",h,["Number","Number","Number","Number","Number","Number","Number","Number"]),!this._renderer._doStroke)?this:(this._renderer.bezier(n,t,i,r,u,f,e,o),this)};i.prototype.bezierDetail=function(n){return r=n,this};i.prototype.bezierPoint=function(n,t,i,r,u){var f=1-u;return Math.pow(f,3)*n+3*Math.pow(f,2)*u*t+3*f*Math.pow(u,2)*i+Math.pow(u,3)*r};i.prototype.bezierTangent=function(n,t,i,r,u){var f=1-u;return 3*r*Math.pow(u,2)-3*i*Math.pow(u,2)+6*i*f*u-6*t*f*u+3*t*Math.pow(f,2)-3*n*Math.pow(f,2)};i.prototype.curve=function(n,t,i,r,u,f,e,o){for(var h=new Array(arguments.length),s=0;s<h.length;++s)h[s]=arguments[s];if(this._validateParameters("curve",h,["Number","Number","Number","Number","Number","Number","Number","Number"]),this._renderer._doStroke)return this._renderer.curve(n,t,i,r,u,f,e,o),this};i.prototype.curveDetail=function(n){return u=n,this};i.prototype.curveTightness=function(n){this._renderer._curveTightness=n};i.prototype.curvePoint=function(n,t,i,r,u){var f=u*u*u,e=u*u,o=-.5*f+e-.5*u,s=1.5*f-2.5*e+1,h=-1.5*f+2*e+.5*u,c=.5*f-.5*e;return n*o+t*s+i*h+r*c};i.prototype.curveTangent=function(n,t,i,r,u){var f=u*u,e=-3*f/2+2*u-.5,o=9*f/2-5*u,s=-9*f/2+4*u+.5,h=3*f/2-u;return n*e+t*o+i*s+r*h};t.exports=i},{"./core":48,"./error_helpers":51}],50:[function(n,t){"use strict";function f(n){var t=document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled;if(!t)throw new Error("Fullscreen not enabled in this browser.");n.requestFullscreen?n.requestFullscreen():n.mozRequestFullScreen?n.mozRequestFullScreen():n.webkitRequestFullscreen?n.webkitRequestFullscreen():n.msRequestFullscreen&&n.msRequestFullscreen()}function e(){document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}var i=n("./core"),r=n("./constants"),u=[r.ARROW,r.CROSS,r.HAND,r.MOVE,r.TEXT,r.WAIT];i.prototype._frameRate=0;i.prototype._lastFrameTime=window.performance.now();i.prototype._targetFrameRate=60;i.prototype.print=window.console&&console.log?function(n){try{var t=JSON.parse(JSON.stringify(n));console.log(t)}catch(i){console.log(n)}}:function(){};i.prototype.println=i.prototype.print;i.prototype.frameCount=0;i.prototype.focused=document.hasFocus();i.prototype.cursor=function(n,t,i){var f="auto",e=this._curElement.elt,r;u.indexOf(n)>-1?f=n:typeof n=="string"&&(r="",t&&i&&typeof t=="number"&&typeof i=="number"&&(r=t+" "+i),f=n.substring(0,6)!=="http://"?"url("+n+") "+r+", auto":/\.(cur|jpg|jpeg|gif|png|CUR|JPG|JPEG|GIF|PNG)$/.test(n)?"url("+n+") "+r+", auto":n);e.style.cursor=f};i.prototype.frameRate=function(n){return typeof n!="number"||n<=0?this._frameRate:(this._setProperty("_targetFrameRate",n),this._runFrames(),this)};i.prototype.getFrameRate=function(){return this.frameRate()};i.prototype.setFrameRate=function(n){return this.frameRate(n)};i.prototype.noCursor=function(){this._curElement.elt.style.cursor="none"};i.prototype.displayWidth=screen.width;i.prototype.displayHeight=screen.height;i.prototype.windowWidth=window.innerWidth;i.prototype.windowHeight=window.innerHeight;i.prototype._onresize=function(n){this._setProperty("windowWidth",window.innerWidth);this._setProperty("windowHeight",window.innerHeight);var i=this._isGlobal?window:this,t;typeof i.windowResized=="function"&&(t=i.windowResized(n),t===undefined||t||n.preventDefault())};i.prototype.width=0;i.prototype.height=0;i.prototype.fullscreen=function(n){if(typeof n=="undefined")return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement;n?f(document.documentElement):e()};i.prototype.pixelDensity=function(n){if(typeof n=="number")this._pixelDensity=n;else return this._pixelDensity;this.resizeCanvas(this.width,this.height,!0)};i.prototype.displayDensity=function(){return window.devicePixelRatio};i.prototype.getURL=function(){return location.href};i.prototype.getURLPath=function(){return location.pathname.split("/").filter(function(n){return n!==""})};i.prototype.getURLParams=function(){for(var t=/[?&]([^&=]+)(?:[&=])([^&=]+)/gim,n,i={};(n=t.exec(location.search))!=null;)n.index===t.lastIndex&&t.lastIndex++,i[n[1]]=n[2];return i};t.exports=i},{"./constants":47,"./core":48}],51:[function(n,t){"use strict";function b(n,t,r){if(n.match(/^p5\./)){var u=n.split(".");return r instanceof i[u[1]]}return n==="Boolean"||n.toLowerCase()===t||w.indexOf(n)>-1&&p(r)}function e(n,t,i){c&&(it(),c=!1);"undefined"===f(i)?i="#B40033":f(i)==="number"&&(i=tt[i])}function it(){console.log("%c    _ \n /\\| |/\\ \n \\ ` ' /  \n / , . \\  \n \\/|_|\\/ \n\n%c> p5.js says: Welcome! This is your friendly debugger. To turn me off switch to using \u201cp5.min.js\u201d.","background-color:transparent;color:#ED225D;","background-color:#ED225D;color:white;")}function rt(){var t={},u=function(n){return Object.getOwnPropertyNames(n).filter(function(n){return n[0]==="_"?!1:n in t?!1:(t[n]=!0,!0)}).map(function(t){var i;return i=typeof n[t]=="function"?"function":t===t.toUpperCase()?"constant":"variable",{name:t,type:i}})};r=[].concat(u(i.prototype),u(n("./constants")));r.sort(function(n,t){return t.name.length-n.name.length})}function h(n,t){t||(t=console.log.bind(console));r||rt();r.some(function(i){if(n.message&&n.message.indexOf(i.name)!==-1)return t("%cDid you just try to use p5.js's "+i.name+(i.type==="function"?"() ":" ")+i.type+"? If so, you may want to move it into your sketch's setup() function.\n\nFor more details, see: "+v,"color: #B40033"),!0})}for(var a,r,v,i=n("./core"),c=!1,o={},y=o.toString,s=["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error"],u=0;u<s.length;u++)o["[object "+s[u]+"]"]=s[u].toLowerCase();var f=function(n){return n==null?n+"":typeof n=="object"||typeof n=="function"?o[y.call(n)]||"object":typeof n},l=Array.isArray||function(n){return f(n)==="array"},p=function(n){return!l(n)&&n-parseFloat(n)+1>=0},w=["Number","Integer","Number/Constant"];var k=0,d=1,g=2,nt=3,tt=["#2D7BB6","#EE9900","#4DB200","#C83C00"];i.prototype._validateParameters=function(n,t,i){var v,r,o,s,w,p,h,c,u,y,a;for(l(i[0])||(i=[i]),v=Math.abs(t.length-i[0].length),o=0,s=1,w=i.length;s<w;s++)p=Math.abs(t.length-i[s].length),p<=v&&(o=s,v=p);for(h="X",v>0&&(r="You wrote "+n+"(",t.length>0&&(r+=h+Array(t.length).join(","+h)),r+="). "+n+" was expecting "+i[o].length+" parameters. Try "+n+"(",i[o].length>0&&(r+=h+Array(i[o].length).join(","+h)),r+=").",i.length>1&&(r+=" "+n+" takes different numbers of parameters depending on what you want to do. Click this link to learn more: "),e(r,n,k)),c=0;c<i.length;c++)for(u=0;u<i[c].length&&u<t.length;u++)y=i[c][u],a=f(t[u]),"undefined"===a||null===a?e("It looks like "+n+" received an empty variable in spot #"+(u+1)+". If not intentional, this is often a problem with scope: [link to scope].",n,d):y==="*"||b(y,a,t[u])||(r=n+" was expecting a "+y.toLowerCase()+" for parameter #"+(u+1)+", received ",r+="string"===a?'"'+t[u]+'"':t[u],r+=" instead.",i.length>1&&(r+=" "+n+" takes different numbers of parameters depending on what you want to do. Click this link to learn more:"),e(r,n,g))};i.prototype._validateParameters=function(){return!0};a={"0":{fileType:"image",method:"loadImage",message:" hosting the image online,"},"1":{fileType:"XML file",method:"loadXML"},"2":{fileType:"table file",method:"loadTable"},"3":{fileType:"text file",method:"loadStrings"}};i._friendlyFileLoadError=function(n,t){var i=a[n],r="It looks like there was a problem loading your "+i.fileType+". Try checking if the file path%c ["+t+"] %cis correct,"+(i.message||"")+" or running a local server.";e(r,i.method,nt)};r=null;v="https://github.com/processing/p5.js/wiki/Frequently-Asked-Questions#why-cant-i-assign-variables-using-p5-functions-and-variables-before-setup";i.prototype._helpForMisusedAtTopLevelCode=h;document.readyState!=="complete"&&(window.addEventListener("error",h,!1),window.addEventListener("load",function(){window.removeEventListener("error",h,!1)}));t.exports=i},{"./constants":47,"./core":48}],52:[function(n,t){function i(n,t,i){var r=t.bind(i);i.elt.addEventListener(n,r,!1);i._events[n]=r}var r=n("./core");r.Element=function(n,t){this.elt=n;this._pInst=t;this._events={};this.width=this.elt.offsetWidth;this.height=this.elt.offsetHeight};r.Element.prototype.parent=function(n){return arguments.length===0?this.elt.parentNode:(typeof n=="string"?(n[0]==="#"&&(n=n.substring(1)),n=document.getElementById(n)):n instanceof r.Element&&(n=n.elt),n.appendChild(this.elt),this)};r.Element.prototype.id=function(n){return arguments.length===0?this.elt.id:(this.elt.id=n,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)};r.Element.prototype.class=function(n){return arguments.length===0?this.elt.className:(this.elt.className=n,this.width=this.elt.offsetWidth,this.height=this.elt.offsetHeight,this)};r.Element.prototype.mousePressed=function(n){return i("mousedown",n,this),i("touchstart",n,this),this};r.Element.prototype.mouseWheel=function(n){return i("wheel",n,this),this};r.Element.prototype.mouseReleased=function(n){return i("mouseup",n,this),i("touchend",n,this),this};r.Element.prototype.mouseClicked=function(n){return i("click",n,this),this};r.Element.prototype.mouseMoved=function(n){return i("mousemove",n,this),i("touchmove",n,this),this};r.Element.prototype.mouseOver=function(n){return i("mouseover",n,this),this};r.Element.prototype.changed=function(n){return i("change",n,this),this};r.Element.prototype.input=function(n){return i("input",n,this),this};r.Element.prototype.mouseOut=function(n){return i("mouseout",n,this),this};r.Element.prototype.touchStarted=function(n){return i("touchstart",n,this),i("mousedown",n,this),this};r.Element.prototype.touchMoved=function(n){return i("touchmove",n,this),i("mousemove",n,this),this};r.Element.prototype.touchEnded=function(n){return i("touchend",n,this),i("mouseup",n,this),this};r.Element.prototype.dragOver=function(n){return i("dragover",n,this),this};r.Element.prototype.dragLeave=function(n){return i("dragleave",n,this),this};r.Element.prototype.drop=function(n,t){function u(t){var i=new r.File(t);return function(t){i.data=t.target.result;n(i)}}return window.File&&window.FileReader&&window.FileList&&window.Blob?(i("dragover",function(n){n.stopPropagation();n.preventDefault()},this),i("dragleave",function(n){n.stopPropagation();n.preventDefault()},this),arguments.length>1&&i("drop",t,this),i("drop",function(n){var f,i,t,r;for(n.stopPropagation(),n.preventDefault(),f=n.dataTransfer.files,i=0;i<f.length;i++)t=f[i],r=new FileReader,r.onload=u(t),t.type.indexOf("text")>-1?r.readAsText(t):r.readAsDataURL(t)},this)):console.log("The File APIs are not fully supported in this browser."),this};r.Element.prototype._setProperty=function(n,t){this[n]=t};t.exports=r.Element},{"./core":48}],53:[function(n,t){var i=n("./core"),r=n("./constants");i.Graphics=function(n,t,u,f){var s=u||r.P2D,o=document.createElement("canvas"),h=this._userNode||document.body,e;h.appendChild(o);i.Element.call(this,o,f,!1);this._styles=[];this.width=n;this.height=t;this._pixelDensity=f._pixelDensity;this._renderer=s===r.WEBGL?new i.Renderer3D(o,f,!1):new i.Renderer2D(o,f,!1);this._renderer.resize(n,t);this._renderer._applyDefaults();f._elements.push(this);for(e in i.prototype)this[e]||(this[e]=typeof i.prototype[e]=="function"?i.prototype[e].bind(this):i.prototype[e]);return this};i.Graphics.prototype=Object.create(i.Element.prototype);t.exports=i.Graphics},{"./constants":47,"./core":48}],54:[function(n,t){function u(n){var t=0,i=0;if(n.offsetParent){do t+=n.offsetLeft,i+=n.offsetTop;while(n=n.offsetParent)}else t+=n.offsetLeft,i+=n.offsetTop;return[t,i]}var i=n("./core"),r=n("../core/constants");i.Renderer=function(n,t,u){i.Element.call(this,n,t);this.canvas=n;this._pInst=t;u?(this._isMainCanvas=!0,this._pInst._setProperty("_curElement",this),this._pInst._setProperty("canvas",this.canvas),this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height)):(this.canvas.style.display="none",this._styles=[]);this._textSize=12;this._textLeading=15;this._textFont="sans-serif";this._textStyle=r.NORMAL;this._textAscent=null;this._textDescent=null;this._rectMode=r.CORNER;this._ellipseMode=r.CENTER;this._curveTightness=0;this._imageMode=r.CORNER;this._tint=null;this._doStroke=!0;this._doFill=!0;this._strokeSet=!1;this._fillSet=!1;this._colorMode=r.RGB;this._colorMaxes={rgb:[255,255,255,255],hsb:[360,100,100,1],hsl:[360,100,100,1]}};i.Renderer.prototype=Object.create(i.Element.prototype);i.Renderer.prototype.resize=function(n,t){this.width=n;this.height=t;this.elt.width=n*this._pInst._pixelDensity;this.elt.height=t*this._pInst._pixelDensity;this.elt.style.width=n+"px";this.elt.style.height=t+"px";this._isMainCanvas&&(this._pInst._setProperty("width",this.width),this._pInst._setProperty("height",this.height))};i.Renderer.prototype.textLeading=function(n){return arguments.length&&arguments[0]?(this._setProperty("_textLeading",n),this):this._textLeading};i.Renderer.prototype.textSize=function(n){return arguments.length&&arguments[0]?(this._setProperty("_textSize",n),this._setProperty("_textLeading",n*r._DEFAULT_LEADMULT),this._applyTextProperties()):this._textSize};i.Renderer.prototype.textStyle=function(n){return arguments.length&&arguments[0]?((n===r.NORMAL||n===r.ITALIC||n===r.BOLD)&&this._setProperty("_textStyle",n),this._applyTextProperties()):this._textStyle};i.Renderer.prototype.textAscent=function(){return this._textAscent===null&&this._updateTextMetrics(),this._textAscent};i.Renderer.prototype.textDescent=function(){return this._textDescent===null&&this._updateTextMetrics(),this._textDescent};i.Renderer.prototype._isOpenType=function(n){return n=n||this._textFont,typeof n=="object"&&n.font&&n.font.supported};i.Renderer.prototype._updateTextMetrics=function(){var t,n,i,o,s;if(this._isOpenType())return this._setProperty("_textAscent",this._textFont._textAscent()),this._setProperty("_textDescent",this._textFont._textDescent()),this;t=document.createElement("span");t.style.fontFamily=this._textFont;t.style.fontSize=this._textSize+"px";t.innerHTML="ABCjgq|";n=document.createElement("div");n.style.display="inline-block";n.style.width="1px";n.style.height="0px";i=document.createElement("div");i.appendChild(t);i.appendChild(n);i.style.height="0px";i.style.overflow="hidden";document.body.appendChild(i);n.style.verticalAlign="baseline";var r=u(n),f=u(t),e=r[1]-f[1];return n.style.verticalAlign="bottom",r=u(n),f=u(t),o=r[1]-f[1],s=o-e,document.body.removeChild(i),this._setProperty("_textAscent",e),this._setProperty("_textDescent",s),this};t.exports=i.Renderer},{"../core/constants":47,"./core":48}],55:[function(n,t){var i=n("./core"),f=n("./canvas"),r=n("./constants"),e=n("../image/filters"),u;n("./p5.Renderer");u="rgba(0,0,0,0)";i.Renderer2D=function(n,t,r){return i.Renderer.call(this,n,t,r),this.drawingContext=this.canvas.getContext("2d"),this._pInst._setProperty("drawingContext",this.drawingContext),this};i.Renderer2D.prototype=Object.create(i.Renderer.prototype);i.Renderer2D.prototype._applyDefaults=function(){this.drawingContext.fillStyle=r._DEFAULT_FILL;this.drawingContext.strokeStyle=r._DEFAULT_STROKE;this.drawingContext.lineCap=r.ROUND;this.drawingContext.font="normal 12px sans-serif"};i.Renderer2D.prototype.resize=function(n,t){i.Renderer.prototype.resize.call(this,n,t);this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity)};i.Renderer2D.prototype.background=function(){if(this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),arguments[0]instanceof i.Image)this._pInst.image(arguments[0],0,0,this.width,this.height);else{var n=this.drawingContext.fillStyle,t=this._pInst.color.apply(this,arguments),r=t.toString();this.drawingContext.fillStyle=r;this.drawingContext.fillRect(0,0,this.width,this.height);this.drawingContext.fillStyle=n}this.drawingContext.restore()};i.Renderer2D.prototype.clear=function(){this.drawingContext.clearRect(0,0,this.width,this.height)};i.Renderer2D.prototype.fill=function(){var n=this.drawingContext,t=this._pInst.color.apply(this,arguments);n.fillStyle=t.toString()};i.Renderer2D.prototype.stroke=function(){var n=this.drawingContext,t=this._pInst.color.apply(this,arguments);n.strokeStyle=t.toString()};i.Renderer2D.prototype.image=function(n,t,r,u,f,e,o,s,h){var c;try{this._tint&&(i.MediaElement&&n instanceof i.MediaElement&&n.loadPixels(),n.canvas&&(c=this._getTintedImageCanvas(n)));c||(c=n.canvas||n.elt);this.drawingContext.drawImage(c,t,r,u,f,e,o,s,h)}catch(l){if(l.name!=="NS_ERROR_NOT_AVAILABLE")throw l;}};i.Renderer2D.prototype._getTintedImageCanvas=function(n){var i,r,t;if(!n.canvas)return n;i=e._toPixels(n.canvas);r=document.createElement("canvas");r.width=n.canvas.width;r.height=n.canvas.height;var f=r.getContext("2d"),o=f.createImageData(n.canvas.width,n.canvas.height),u=o.data;for(t=0;t<i.length;t+=4){var s=i[t],h=i[t+1],c=i[t+2],l=i[t+3];u[t]=s*this._tint[0]/255;u[t+1]=h*this._tint[1]/255;u[t+2]=c*this._tint[2]/255;u[t+3]=l*this._tint[3]/255}return f.putImageData(o,0,0),r};i.Renderer2D.prototype.blendMode=function(n){this.drawingContext.globalCompositeOperation=n};i.Renderer2D.prototype.blend=function(){var n=this.drawingContext.globalCompositeOperation,t=arguments[arguments.length-1],i=Array.prototype.slice.call(arguments,0,arguments.length-1);this.drawingContext.globalCompositeOperation=t;this._pInst.copy.apply(this._pInst,i);this.drawingContext.globalCompositeOperation=n};i.Renderer2D.prototype.copy=function(){var n,t,r,u,f,e,o,s,h;if(arguments.length===9)n=arguments[0],t=arguments[1],r=arguments[2],u=arguments[3],f=arguments[4],e=arguments[5],o=arguments[6],s=arguments[7],h=arguments[8];else if(arguments.length===8)n=this._pInst,t=arguments[0],r=arguments[1],u=arguments[2],f=arguments[3],e=arguments[4],o=arguments[5],s=arguments[6],h=arguments[7];else throw new Error("Signature not supported");i.Renderer2D._copyHelper(n,t,r,u,f,e,o,s,h)};i.Renderer2D._copyHelper=function(n,t,i,r,u,f,e,o,s){var h=n.canvas.width/n.width;this.drawingContext.drawImage(n.canvas,h*t,h*i,h*r,h*u,f,e,o,s)};i.Renderer2D.prototype.get=function(n,t,r,u){var f,e;if(n===undefined&&t===undefined&&r===undefined&&u===undefined?(n=0,t=0,r=this.width,u=this.height):r===undefined&&u===undefined&&(r=1,u=1),n+r<0||t+u<0||n>this.width||t>this.height)return[0,0,0,255];if(f=this._pInst||this,e=f._pixelDensity,this.loadPixels.call(f),n=Math.floor(n),t=Math.floor(t),r===1&&u===1)return[f.pixels[e*4*(t*this.width+n)],f.pixels[e*(4*(t*this.width+n)+1)],f.pixels[e*(4*(t*this.width+n)+2)],f.pixels[e*(4*(t*this.width+n)+3)]];var c=n*e,l=t*e,o=Math.min(r,f.width),s=Math.min(u,f.height),a=o*e,v=s*e,h=new i.Image(o,s);return h.canvas.getContext("2d").drawImage(this.canvas,c,l,a,v,0,0,o,s),h};i.Renderer2D.prototype.loadPixels=function(){var t=this._pixelDensity||this._pInst._pixelDensity,i=this.width*t,r=this.height*t,n=this.drawingContext.getImageData(0,0,i,r);this._pInst?(this._pInst._setProperty("imageData",n),this._pInst._setProperty("pixels",n.data)):(this._setProperty("imageData",n),this._setProperty("pixels",n.data))};i.Renderer2D.prototype.set=function(n,t,r){var c,l;if(n=Math.floor(n),t=Math.floor(t),r instanceof i.Image)this.drawingContext.save(),this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this.drawingContext.drawImage(r.canvas,n,t),this.loadPixels.call(this._pInst),this.drawingContext.restore();else{var u=this._pInst||this,e=0,o=0,s=0,h=0,f=4*(t*u._pixelDensity*this.width*u._pixelDensity+n*u._pixelDensity);if(u.imageData||u.loadPixels.call(u),typeof r=="number")f<u.pixels.length&&(e=r,o=r,s=r,h=255);else if(r instanceof Array){if(r.length<4)throw new Error("pixel array must be of the form [R, G, B, A]");f<u.pixels.length&&(e=r[0],o=r[1],s=r[2],h=r[3])}else r instanceof i.Color&&f<u.pixels.length&&(e=r.levels[0],o=r.levels[1],s=r.levels[2],h=r.levels[3]);for(c=0;c<u._pixelDensity;c++)for(l=0;l<u._pixelDensity;l++)f=4*((t*u._pixelDensity+l)*this.width*u._pixelDensity+(n*u._pixelDensity+c)),u.pixels[f]=e,u.pixels[f+1]=o,u.pixels[f+2]=s,u.pixels[f+3]=h}};i.Renderer2D.prototype.updatePixels=function(n,t,i,r){var u=this._pixelDensity||this._pInst._pixelDensity;n===undefined&&t===undefined&&i===undefined&&r===undefined&&(n=0,t=0,i=this.width,r=this.height);i*=u;r*=u;this._pInst?this.drawingContext.putImageData(this._pInst.imageData,n,t,0,0,i,r):this.drawingContext.putImageData(this.imageData,n,t,0,0,i,r)};i.Renderer2D.prototype._acuteArcToBezier=function(n,t){var r=t/2,o=Math.cos(r),h=Math.sin(r),c=1/Math.tan(r),s=n+r,u=Math.cos(s),f=Math.sin(s),i=(4-o)/3,e=h+(o-i)*c;return{ax:Math.cos(n),ay:Math.sin(n),bx:i*u+e*f,by:i*f-e*u,cx:i*u-e*f,cy:i*f+e*u,dx:Math.cos(n+t),dy:Math.sin(n+t)}};i.Renderer2D.prototype.arc=function(n,t,i,u,e,o,s){for(var c=this.drawingContext,h=f.arcModeAdjust(n,t,i,u,this._ellipseMode),l=h.w/2,a=h.h/2,v=0,y=[];o-e>1e-5;)v=Math.min(o-e,r.HALF_PI),y.push(this._acuteArcToBezier(e,v)),e+=v;return this._doFill&&(c.beginPath(),y.forEach(function(n,t){t===0&&c.moveTo(h.x+n.ax*l,h.y+n.ay*a);c.bezierCurveTo(h.x+n.bx*l,h.y+n.by*a,h.x+n.cx*l,h.y+n.cy*a,h.x+n.dx*l,h.y+n.dy*a)}),(s===r.PIE||s==null)&&c.lineTo(h.x,h.y),c.closePath(),c.fill()),this._doStroke&&(c.beginPath(),y.forEach(function(n,t){t===0&&c.moveTo(h.x+n.ax*l,h.y+n.ay*a);c.bezierCurveTo(h.x+n.bx*l,h.y+n.by*a,h.x+n.cx*l,h.y+n.cy*a,h.x+n.dx*l,h.y+n.dy*a)}),s===r.PIE?(c.lineTo(h.x,h.y),c.closePath()):s===r.CHORD&&c.closePath(),c.stroke()),this};i.Renderer2D.prototype.ellipse=function(n,t,i,r){var o=this.drawingContext,a=this._doFill,v=this._doStroke;if(a&&!v){if(o.fillStyle===u)return this}else if(!a&&v&&o.strokeStyle===u)return this;var e=f.modeAdjust(n,t,i,r,this._ellipseMode),w=.5522847498,c=e.w/2*w,l=e.h/2*w,y=e.x+e.w,p=e.y+e.h,h=e.x+e.w/2,s=e.y+e.h/2;o.beginPath();o.moveTo(e.x,s);o.bezierCurveTo(e.x,s-l,h-c,e.y,h,e.y);o.bezierCurveTo(h+c,e.y,y,s-l,y,s);o.bezierCurveTo(y,s+l,h+c,p,h,p);o.bezierCurveTo(h-c,p,e.x,s+l,e.x,s);o.closePath();a&&o.fill();v&&o.stroke()};i.Renderer2D.prototype.line=function(n,t,i,r){var f=this.drawingContext;if(this._doStroke){if(f.strokeStyle===u)return this}else return this;return f.lineWidth%2==1&&f.translate(.5,.5),f.beginPath(),f.moveTo(n,t),f.lineTo(i,r),f.stroke(),f.lineWidth%2==1&&f.translate(-.5,-.5),this};i.Renderer2D.prototype.point=function(n,t){var i=this.drawingContext,f=i.strokeStyle,e=i.fillStyle;if(this._doStroke){if(i.strokeStyle===u)return this}else return this;n=Math.round(n);t=Math.round(t);i.fillStyle=f;i.lineWidth>1?(i.beginPath(),i.arc(n,t,i.lineWidth/2,0,r.TWO_PI,!1),i.fill()):i.fillRect(n,t,1,1);i.fillStyle=e};i.Renderer2D.prototype.quad=function(n,t,i,r,f,e,o,s){var h=this.drawingContext,c=this._doFill,l=this._doStroke;if(c&&!l){if(h.fillStyle===u)return this}else if(!c&&l&&h.strokeStyle===u)return this;return h.beginPath(),h.moveTo(n,t),h.lineTo(i,r),h.lineTo(f,e),h.lineTo(o,s),h.closePath(),c&&h.fill(),l&&h.stroke(),this};i.Renderer2D.prototype.rect=function(n,t,i,r,e,o,s,h){var c=this.drawingContext,k=this._doFill,d=this._doStroke,l;if(k&&!d){if(c.fillStyle===u)return this}else if(!k&&d&&c.strokeStyle===u)return this;if(l=f.modeAdjust(n,t,i,r,this._rectMode),this._doStroke&&c.lineWidth%2==1&&c.translate(.5,.5),c.beginPath(),typeof e=="undefined")c.rect(l.x,l.y,l.w,l.h);else{typeof o=="undefined"&&(o=e);typeof s=="undefined"&&(s=o);typeof h=="undefined"&&(h=s);var a=l.x,v=l.y,y=l.w,p=l.h,w=y/2,b=p/2;y<2*e&&(e=w);p<2*e&&(e=b);y<2*o&&(o=w);p<2*o&&(o=b);y<2*s&&(s=w);p<2*s&&(s=b);y<2*h&&(h=w);p<2*h&&(h=b);c.beginPath();c.moveTo(a+e,v);c.arcTo(a+y,v,a+y,v+p,o);c.arcTo(a+y,v+p,a,v+p,s);c.arcTo(a,v+p,a,v,h);c.arcTo(a,v,a+y,v,e);c.closePath()}return this._doFill&&c.fill(),this._doStroke&&c.stroke(),this._doStroke&&c.lineWidth%2==1&&c.translate(-.5,-.5),this};i.Renderer2D.prototype.triangle=function(n,t,i,r,f,e){var o=this.drawingContext,s=this._doFill,h=this._doStroke;if(s&&!h){if(o.fillStyle===u)return this}else if(!s&&h&&o.strokeStyle===u)return this;o.beginPath();o.moveTo(n,t);o.lineTo(i,r);o.lineTo(f,e);o.closePath();s&&o.fill();h&&o.stroke()};i.Renderer2D.prototype.endShape=function(n,t,i,u,f,e,o){var y,h,s,v,c,l,a;if(t.length===0||!this._doStroke&&!this._doFill)return this;if(y=n===r.CLOSE,y&&!e&&t.push(t[0]),c=t.length,i&&(o===r.POLYGON||o===null)){if(c>3){for(l=[],a=1-this._curveTightness,this.drawingContext.beginPath(),this.drawingContext.moveTo(t[1][0],t[1][1]),s=1;s+2<c;s++)h=t[s],l[0]=[h[0],h[1]],l[1]=[h[0]+(a*t[s+1][0]-a*t[s-1][0])/6,h[1]+(a*t[s+1][1]-a*t[s-1][1])/6],l[2]=[t[s+1][0]+(a*t[s][0]-a*t[s+2][0])/6,t[s+1][1]+(a*t[s][1]-a*t[s+2][1])/6],l[3]=[t[s+1][0],t[s+1][1]],this.drawingContext.bezierCurveTo(l[1][0],l[1][1],l[2][0],l[2][1],l[3][0],l[3][1]);y&&this.drawingContext.lineTo(t[s+1][0],t[s+1][1]);this._doFillStrokeClose()}}else if(u&&(o===r.POLYGON||o===null)){for(this.drawingContext.beginPath(),s=0;s<c;s++)t[s].isVert?t[s].moveTo?this.drawingContext.moveTo(t[s][0],t[s][1]):this.drawingContext.lineTo(t[s][0],t[s][1]):this.drawingContext.bezierCurveTo(t[s][0],t[s][1],t[s][2],t[s][3],t[s][4],t[s][5]);this._doFillStrokeClose()}else if(f&&(o===r.POLYGON||o===null)){for(this.drawingContext.beginPath(),s=0;s<c;s++)t[s].isVert?t[s].moveTo?this.drawingContext.moveTo([0],t[s][1]):this.drawingContext.lineTo(t[s][0],t[s][1]):this.drawingContext.quadraticCurveTo(t[s][0],t[s][1],t[s][2],t[s][3]);this._doFillStrokeClose()}else if(o===r.POINTS)for(s=0;s<c;s++)h=t[s],this._doStroke&&this._pInst.stroke(h[6]),this._pInst.point(h[0],h[1]);else if(o===r.LINES)for(s=0;s+1<c;s+=2)h=t[s],this._doStroke&&this._pInst.stroke(t[s+1][6]),this._pInst.line(h[0],h[1],t[s+1][0],t[s+1][1]);else if(o===r.TRIANGLES)for(s=0;s+2<c;s+=3)h=t[s],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(t[s+1][0],t[s+1][1]),this.drawingContext.lineTo(t[s+2][0],t[s+2][1]),this.drawingContext.lineTo(h[0],h[1]),this._doFill&&(this._pInst.fill(t[s+2][5]),this.drawingContext.fill()),this._doStroke&&(this._pInst.stroke(t[s+2][6]),this.drawingContext.stroke()),this.drawingContext.closePath();else if(o===r.TRIANGLE_STRIP)for(s=0;s+1<c;s++)h=t[s],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[s+1][0],t[s+1][1]),this.drawingContext.lineTo(h[0],h[1]),this._doStroke&&this._pInst.stroke(t[s+1][6]),this._doFill&&this._pInst.fill(t[s+1][5]),s+2<c&&(this.drawingContext.lineTo(t[s+2][0],t[s+2][1]),this._doStroke&&this._pInst.stroke(t[s+2][6]),this._doFill&&this._pInst.fill(t[s+2][5])),this._doFillStrokeClose();else if(o===r.TRIANGLE_FAN){if(c>2)for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[1][0],t[1][1]),this.drawingContext.lineTo(t[2][0],t[2][1]),this._doFill&&this._pInst.fill(t[2][5]),this._doStroke&&this._pInst.stroke(t[2][6]),this._doFillStrokeClose(),s=3;s<c;s++)h=t[s],this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),this.drawingContext.lineTo(t[s-1][0],t[s-1][1]),this.drawingContext.lineTo(h[0],h[1]),this._doFill&&this._pInst.fill(h[5]),this._doStroke&&this._pInst.stroke(h[6]),this._doFillStrokeClose()}else if(o===r.QUADS)for(s=0;s+3<c;s+=4){for(h=t[s],this.drawingContext.beginPath(),this.drawingContext.moveTo(h[0],h[1]),v=1;v<4;v++)this.drawingContext.lineTo(t[s+v][0],t[s+v][1]);this.drawingContext.lineTo(h[0],h[1]);this._doFill&&this._pInst.fill(t[s+3][5]);this._doStroke&&this._pInst.stroke(t[s+3][6]);this._doFillStrokeClose()}else if(o===r.QUAD_STRIP){if(c>3)for(s=0;s+1<c;s+=2)h=t[s],this.drawingContext.beginPath(),s+3<c?(this.drawingContext.moveTo(t[s+2][0],t[s+2][1]),this.drawingContext.lineTo(h[0],h[1]),this.drawingContext.lineTo(t[s+1][0],t[s+1][1]),this.drawingContext.lineTo(t[s+3][0],t[s+3][1]),this._doFill&&this._pInst.fill(t[s+3][5]),this._doStroke&&this._pInst.stroke(t[s+3][6])):(this.drawingContext.moveTo(h[0],h[1]),this.drawingContext.lineTo(t[s+1][0],t[s+1][1])),this._doFillStrokeClose()}else{for(this.drawingContext.beginPath(),this.drawingContext.moveTo(t[0][0],t[0][1]),s=1;s<c;s++)h=t[s],h.isVert&&(h.moveTo?this.drawingContext.moveTo(h[0],h[1]):this.drawingContext.lineTo(h[0],h[1]));this._doFillStrokeClose()}return i=!1,u=!1,f=!1,e=!1,y&&t.pop(),this};i.Renderer2D.prototype.noSmooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!1:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!1:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!1:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!1),this};i.Renderer2D.prototype.smooth=function(){return"imageSmoothingEnabled"in this.drawingContext?this.drawingContext.imageSmoothingEnabled=!0:"mozImageSmoothingEnabled"in this.drawingContext?this.drawingContext.mozImageSmoothingEnabled=!0:"webkitImageSmoothingEnabled"in this.drawingContext?this.drawingContext.webkitImageSmoothingEnabled=!0:"msImageSmoothingEnabled"in this.drawingContext&&(this.drawingContext.msImageSmoothingEnabled=!0),this};i.Renderer2D.prototype.strokeCap=function(n){return(n===r.ROUND||n===r.SQUARE||n===r.PROJECT)&&(this.drawingContext.lineCap=n),this};i.Renderer2D.prototype.strokeJoin=function(n){return(n===r.ROUND||n===r.BEVEL||n===r.MITER)&&(this.drawingContext.lineJoin=n),this};i.Renderer2D.prototype.strokeWeight=function(n){return this.drawingContext.lineWidth=typeof n=="undefined"||n===0?.0001:n,this};i.Renderer2D.prototype._getFill=function(){return this.drawingContext.fillStyle};i.Renderer2D.prototype._getStroke=function(){return this.drawingContext.strokeStyle};i.Renderer2D.prototype.bezier=function(n,t,i,r,u,f,e,o){return this._pInst.beginShape(),this._pInst.vertex(n,t),this._pInst.bezierVertex(i,r,u,f,e,o),this._pInst.endShape(),this};i.Renderer2D.prototype.curve=function(n,t,i,r,u,f,e,o){return this._pInst.beginShape(),this._pInst.curveVertex(n,t),this._pInst.curveVertex(i,r),this._pInst.curveVertex(u,f),this._pInst.curveVertex(e,o),this._pInst.endShape(),this};i.Renderer2D.prototype._doFillStrokeClose=function(){this._doFill&&this.drawingContext.fill();this._doStroke&&this.drawingContext.stroke();this.drawingContext.closePath()};i.Renderer2D.prototype.applyMatrix=function(n,t,i,r,u,f){this.drawingContext.transform(n,t,i,r,u,f)};i.Renderer2D.prototype.resetMatrix=function(){return this.drawingContext.setTransform(1,0,0,1,0,0),this.drawingContext.scale(this._pInst._pixelDensity,this._pInst._pixelDensity),this};i.Renderer2D.prototype.rotate=function(n){this.drawingContext.rotate(n)};i.Renderer2D.prototype.scale=function(n,t){return this.drawingContext.scale(n,t),this};i.Renderer2D.prototype.shearX=function(n){return this._pInst._angleMode===r.DEGREES&&(n=this._pInst.radians(n)),this.drawingContext.transform(1,0,this._pInst.tan(n),1,0,0),this};i.Renderer2D.prototype.shearY=function(n){return this._pInst._angleMode===r.DEGREES&&(n=this._pInst.radians(n)),this.drawingContext.transform(1,this._pInst.tan(n),0,1,0,0),this};i.Renderer2D.prototype.translate=function(n,t){return this.drawingContext.translate(n,t),this};i.Renderer2D.prototype.text=function(n,t,i,u,f){var s=this._pInst,l,o,h,v,e,a,y,c,p,b,w=Number.MAX_VALUE;if(this._doFill||this._doStroke){if(typeof n!="string"&&(n=n.toString()),n=n.replace(/(\t)/g,"  "),l=n.split("\n"),typeof u!="undefined"){for(p=0,h=0;h<l.length;h++)for(e="",c=l[h].split(" "),o=0;o<c.length;o++)a=e+c[o]+" ",y=this.textWidth(a),y>u?(e=c[o]+" ",p+=s.textLeading()):e=a;this._rectMode===r.CENTER&&(t-=u/2,i-=f/2);switch(this.drawingContext.textAlign){case r.CENTER:t+=u/2;break;case r.RIGHT:t+=u}if(typeof f!="undefined"){switch(this.drawingContext.textBaseline){case r.BOTTOM:i+=f-p;break;case r._CTX_MIDDLE:i+=(f-p)/2;break;case r.BASELINE:b=!0;this.drawingContext.textBaseline=r.TOP}w=i+f-s.textAscent()}for(h=0;h<l.length;h++){for(e="",c=l[h].split(" "),o=0;o<c.length;o++)a=e+c[o]+" ",y=this.textWidth(a),y>u&&e.length>0?(this._renderText(s,e,t,i,w),e=c[o]+" ",i+=s.textLeading()):e=a;this._renderText(s,e,t,i,w);i+=s.textLeading()}}else for(v=0;v<l.length;v++)this._renderText(s,l[v],t,i,w),i+=s.textLeading();return b&&(this.drawingContext.textBaseline=r.BASELINE),s}};i.Renderer2D.prototype._renderText=function(n,t,i,u,f){if(!(u>=f))return n.push(),this._isOpenType()?this._textFont._renderPath(t,i,u,{renderer:this}):(this._doStroke&&this._strokeSet&&this.drawingContext.strokeText(t,i,u),this._doFill&&(this.drawingContext.fillStyle=this._fillSet?this.drawingContext.fillStyle:r._DEFAULT_TEXT_FILL,this.drawingContext.fillText(t,i,u))),n.pop(),n};i.Renderer2D.prototype.textWidth=function(n){return this._isOpenType()?this._textFont._textWidth(n):this.drawingContext.measureText(n).width};i.Renderer2D.prototype.textAlign=function(n,t){if(arguments.length)return(n===r.LEFT||n===r.RIGHT||n===r.CENTER)&&(this.drawingContext.textAlign=n),(t===r.TOP||t===r.BOTTOM||t===r.CENTER||t===r.BASELINE)&&(this.drawingContext.textBaseline=t===r.CENTER?r._CTX_MIDDLE:t),this._pInst;var i=this.drawingContext.textBaseline;return i===r._CTX_MIDDLE&&(i=r.CENTER),{horizontal:this.drawingContext.textAlign,vertical:i}};i.Renderer2D.prototype._applyTextProperties=function(){var n,t=this._pInst;return this._setProperty("_textAscent",null),this._setProperty("_textDescent",null),n=this._textFont,this._isOpenType()&&(n=this._textFont.font.familyName,this._setProperty("_textStyle",this._textFont.font.styleName)),this.drawingContext.font=this._textStyle+" "+this._textSize+"px "+n,t};i.Renderer2D.prototype.push=function(){this.drawingContext.save()};i.Renderer2D.prototype.pop=function(){this.drawingContext.restore()};t.exports=i.Renderer2D},{"../image/filters":65,"./canvas":46,"./constants":47,"./core":48,"./p5.Renderer":54}],56:[function(n,t){var r=n("./core"),i=n("./constants"),u;n("./p5.Graphics");n("./p5.Renderer2D");n("../3d/p5.Renderer3D");u="defaultCanvas0";r.prototype.createCanvas=function(n,t,f){var h=f||i.P2D,s,e,o;if(arguments[3]&&(s=typeof arguments[3]=="boolean"?arguments[3]:!1),h===i.WEBGL)e=document.getElementById(u),e&&e.parentNode.removeChild(e),e=document.createElement("canvas"),e.id=u;else if(s){for(e=document.createElement("canvas"),o=0;document.getElementById("defaultCanvas"+o);)o++;u="defaultCanvas"+o;e.id=u}else e=this.canvas;return this._setupDone||(e.className+=" p5_hidden",e.style.visibility="hidden"),this._userNode?this._userNode.appendChild(e):document.body.appendChild(e),h===i.WEBGL?(this._setProperty("_renderer",new r.Renderer3D(e,this,!0)),this._isdefaultGraphics=!0):this._isdefaultGraphics||(this._setProperty("_renderer",new r.Renderer2D(e,this,!0)),this._isdefaultGraphics=!0),this._renderer.resize(n,t),this._renderer._applyDefaults(),s&&this._elements.push(this._renderer),this._renderer};r.prototype.resizeCanvas=function(n,t,i){var r,f,u,e;if(this._renderer){r={};for(f in this.drawingContext)u=this.drawingContext[f],typeof u!="object"&&typeof u!="function"&&(r[f]=u);this._renderer.resize(n,t);for(e in r)this.drawingContext[e]=r[e];i||this.redraw()}};r.prototype.noCanvas=function(){this.canvas&&this.canvas.parentNode.removeChild(this.canvas)};r.prototype.createGraphics=function(n,t,i){return new r.Graphics(n,t,i,this)};r.prototype.blendMode=function(n){if(n===i.BLEND||n===i.DARKEST||n===i.LIGHTEST||n===i.DIFFERENCE||n===i.MULTIPLY||n===i.EXCLUSION||n===i.SCREEN||n===i.REPLACE||n===i.OVERLAY||n===i.HARD_LIGHT||n===i.SOFT_LIGHT||n===i.DODGE||n===i.BURN||n===i.ADD||n===i.NORMAL)this._renderer.blendMode(n);else throw new Error("Mode "+n+" not recognized.");};t.exports=r},{"../3d/p5.Renderer3D":36,"./constants":47,"./core":48,"./p5.Graphics":53,"./p5.Renderer2D":55}],57:[function(){window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/60)}}();window.performance=window.performance||{};window.performance.now=function(){var n=Date.now();return window.performance.now||window.performance.mozNow||window.performance.msNow||window.performance.oNow||window.performance.webkitNow||function(){return Date.now()-n}}(),function(){"use strict";typeof Uint8ClampedArray=="undefined"||Uint8ClampedArray.prototype.slice||Object.defineProperty(Uint8ClampedArray.prototype,"slice",{value:Array.prototype.slice,writable:!0,configurable:!0,enumerable:!1})}()},{}],58:[function(n,t){"use strict";var i=n("./core");i.prototype.exit=function(){throw"exit() not implemented, see remove()";};i.prototype.noLoop=function(){this._loop=!1};i.prototype.loop=function(){this._loop=!0;this._draw()};i.prototype.push=function(){this._renderer.push();this._styles.push({_doStroke:this._renderer._doStroke,_doFill:this._renderer._doFill,_tint:this._renderer._tint,_imageMode:this._renderer._imageMode,_rectMode:this._renderer._rectMode,_ellipseMode:this._renderer._ellipseMode,_colorMode:this._renderer._colorMode,_textFont:this._renderer._textFont,_textLeading:this._renderer._textLeading,_textSize:this._renderer._textSize,_textStyle:this._renderer._textStyle})};i.prototype.pop=function(){var n,t;this._renderer.pop();n=this._styles.pop();for(t in n)this._renderer[t]=n[t]};i.prototype.pushStyle=function(){throw new Error("pushStyle() not used, see push()");};i.prototype.popStyle=function(){throw new Error("popStyle() not used, see pop()");};i.prototype.redraw=function(){var i=this.setup||window.setup,t=this.draw||window.draw,n;typeof t=="function"&&(this.push(),typeof i=="undefined"&&this.scale(this._pixelDensity,this._pixelDensity),n=this,this._registeredMethods.pre.forEach(function(t){t.call(n)}),t(),this._registeredMethods.post.forEach(function(t){t.call(n)}),this.pop())};i.prototype.size=function(){throw"size() is not a valid p5 function, to set the size of the drawing canvas, please use createCanvas() instead";};t.exports=i},{"./core":48}],59:[function(n,t){"use strict";var i=n("./core"),r=n("./constants");i.prototype.applyMatrix=function(n,t,i,r,u,f){return this._renderer.applyMatrix(n,t,i,r,u,f),this};i.prototype.popMatrix=function(){throw new Error("popMatrix() not used, see pop()");};i.prototype.printMatrix=function(){throw new Error("printMatrix() not implemented");};i.prototype.pushMatrix=function(){throw new Error("pushMatrix() not used, see push()");};i.prototype.resetMatrix=function(){return this._renderer.resetMatrix(),this};i.prototype.rotate=function(){var n=arguments[0];return this._angleMode===r.DEGREES&&(n=this.radians(n)),arguments.length>1?this._renderer.rotate(n,arguments[1]):this._renderer.rotate(n),this};i.prototype.rotateX=function(n){for(var i=new Array(arguments.length),t=0;t<i.length;++t)i[t]=arguments[t];if(this._renderer.isP3D)this._validateParameters("rotateX",i,[["Number"]]),this._renderer.rotateX(n);else throw"not supported in p2d. Please use webgl mode";return this};i.prototype.rotateY=function(n){var i,t;if(this._renderer.isP3D){for(i=new Array(arguments.length),t=0;t<i.length;++t)i[t]=arguments[t];this._validateParameters("rotateY",i,[["Number"]]);this._renderer.rotateY(n)}else throw"not supported in p2d. Please use webgl mode";return this};i.prototype.rotateZ=function(n){var i,t;if(this._renderer.isP3D){for(i=new Array(arguments.length),t=0;t<i.length;++t)i[t]=arguments[t];this._validateParameters("rotateZ",i,[["Number"]]);this._renderer.rotateZ(n)}else throw"not supported in p2d. Please use webgl mode";return this};i.prototype.scale=function(){for(var t,r,u,n=new Array(arguments.length),f=0;f<n.length;f++)n[f]=arguments[f];return n[0]instanceof i.Vector?(t=n[0].x,r=n[0].y,u=n[0].z):n[0]instanceof Array?(t=n[0][0],r=n[0][1],u=n[0][2]||1):n.length===1?t=r=u=n[0]:(t=n[0],r=n[1],u=n[2]||1),this._renderer.isP3D?this._renderer.scale.call(this._renderer,t,r,u):this._renderer.scale.call(this._renderer,t,r),this};i.prototype.shearX=function(n){return this._angleMode===r.DEGREES&&(n=this.radians(n)),this._renderer.shearX(n),this};i.prototype.shearY=function(n){return this._angleMode===r.DEGREES&&(n=this.radians(n)),this._renderer.shearY(n),this};i.prototype.translate=function(n,t,i){for(var r=new Array(arguments.length),u=0;u<r.length;++u)r[u]=arguments[u];return this._renderer.isP3D?(this._validateParameters("translate",r,[["Number","Number","Number"]]),this._renderer.translate(n,t,i)):(this._validateParameters("translate",r,[["Number","Number"]]),this._renderer.translate(n,t)),this};t.exports=i},{"./constants":47,"./core":48}],60:[function(n,t){"use strict";var u=n("./core"),f=n("./constants"),o=null,i=[],r=[],s=!1,h=!1,c=!1,e=!1;u.prototype.beginContour=function(){return r=[],e=!0,this};u.prototype.beginShape=function(n){return o=n===f.POINTS||n===f.LINES||n===f.TRIANGLES||n===f.TRIANGLE_FAN||n===f.TRIANGLE_STRIP||n===f.QUADS||n===f.QUAD_STRIP?n:null,this._renderer.isP3D?this._renderer.beginShape(n):(i=[],r=[]),this};u.prototype.bezierVertex=function(){var n,t;if(i.length===0)throw"vertex() must be used once before calling bezierVertex()";else{for(s=!0,n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];n.isVert=!1;e?r.push(n):i.push(n)}return this};u.prototype.curveVertex=function(n,t){return h=!0,this.vertex(n,t),this};u.prototype.endContour=function(){var t=r[0].slice(),n;for(t.isVert=r[0].isVert,t.moveTo=!1,r.push(t),i.push(i[0]),n=0;n<r.length;n++)i.push(r[n]);return this};u.prototype.endShape=function(n){if(this._renderer.isP3D)this._renderer.endShape();else{if(i.length===0||!this._renderer._doStroke&&!this._renderer._doFill)return this;var t=n===f.CLOSE;t&&!e&&i.push(i[0]);this._renderer.endShape(n,i,h,s,c,e,o);h=!1;s=!1;c=!1;e=!1;t&&i.pop()}return this};u.prototype.quadraticVertex=function(n,t,u,o){var s,h,l;if(this._contourInited)return s={},s.x=n,s.y=t,s.x3=u,s.y3=o,s.type=f.QUADRATIC,this._contourVertices.push(s),this;if(i.length>0){for(c=!0,h=[],l=0;l<arguments.length;l++)h[l]=arguments[l];h.isVert=!1;e?r.push(h):i.push(h)}else throw"vertex() must be used once before calling quadraticVertex()";return this};u.prototype.vertex=function(n,t,u){for(var f,o=new Array(arguments.length),s=0;s<o.length;++s)o[s]=arguments[s];return this._renderer.isP3D?(this._validateParameters("vertex",o,[["Number","Number","Number"]]),this._renderer.vertex(arguments[0],arguments[1],arguments[2])):(this._validateParameters("vertex",o,[["Number","Number"],["Number","Number","Number"]]),f=[],f.isVert=!0,f[0]=n,f[1]=t,f[2]=0,f[3]=0,f[4]=0,f[5]=this._renderer._getFill(),f[6]=this._renderer._getStroke(),u&&(f.moveTo=u),e?(r.length===0&&(f.moveTo=!0),r.push(f)):i.push(f)),this};t.exports=u},{"./constants":47,"./core":48}],61:[function(n,t){"use strict";var i=n("../core/core"),r,s;i.prototype.deviceOrientation=undefined;i.prototype.accelerationX=0;i.prototype.accelerationY=0;i.prototype.accelerationZ=0;i.prototype.pAccelerationX=0;i.prototype.pAccelerationY=0;i.prototype.pAccelerationZ=0;i.prototype._updatePAccelerations=function(){this._setProperty("pAccelerationX",this.accelerationX);this._setProperty("pAccelerationY",this.accelerationY);this._setProperty("pAccelerationZ",this.accelerationZ)};i.prototype.rotationX=0;i.prototype.rotationY=0;i.prototype.rotationZ=0;i.prototype.pRotationX=0;i.prototype.pRotationY=0;i.prototype.pRotationZ=0;var h=0,c=0,u=0,f="clockwise",e="clockwise",o="clockwise",l,a,v;i.prototype._updatePRotations=function(){this._setProperty("pRotationX",this.rotationX);this._setProperty("pRotationY",this.rotationY);this._setProperty("pRotationZ",this.rotationZ)};i.prototype.turnAxis=undefined;r=.5;s=30;i.prototype.setMoveThreshold=function(n){typeof n=="number"&&(r=n)};i.prototype.setShakeThreshold=function(n){typeof n=="number"&&(s=n)};i.prototype._ondeviceorientation=function(n){this._updatePRotations();this._setProperty("rotationX",n.beta);this._setProperty("rotationY",n.gamma);this._setProperty("rotationZ",n.alpha);this._handleMotion()};i.prototype._ondevicemotion=function(n){this._updatePAccelerations();this._setProperty("accelerationX",n.acceleration.x*2);this._setProperty("accelerationY",n.acceleration.y*2);this._setProperty("accelerationZ",n.acceleration.z*2);this._handleMotion()};i.prototype._handleMotion=function(){var k,i,d,g,nt;if(window.orientation===90||window.orientation===-90?this._setProperty("deviceOrientation","landscape"):window.orientation===0?this._setProperty("deviceOrientation","portrait"):window.orientation===undefined&&this._setProperty("deviceOrientation","undefined"),k=this.deviceMoved||window.deviceMoved,typeof k=="function"&&(Math.abs(this.accelerationX-this.pAccelerationX)>r||Math.abs(this.accelerationY-this.pAccelerationY)>r||Math.abs(this.accelerationZ-this.pAccelerationZ)>r)&&k(),i=this.deviceTurned||window.deviceTurned,typeof i=="function"){var n=this.rotationX+180,y=this.pRotationX+180,p=h+180;n-y>0&&n-y<270||n-y<-270?f="clockwise":(n-y<0||n-y>270)&&(f="counter-clockwise");f!==l&&(p=n);Math.abs(n-p)>90&&Math.abs(n-p)<270&&(p=n,this._setProperty("turnAxis","X"),i());l=f;h=p-180;var t=this.rotationY+180,b=this.pRotationY+180,w=c+180;t-b>0&&t-b<270||t-b<-270?e="clockwise":(t-b<0||t-this.pRotationY>270)&&(e="counter-clockwise");e!==a&&(w=t);Math.abs(t-w)>90&&Math.abs(t-w)<270&&(w=t,this._setProperty("turnAxis","Y"),i());a=e;c=w-180;this.rotationZ-this.pRotationZ>0&&this.rotationZ-this.pRotationZ<270||this.rotationZ-this.pRotationZ<-270?o="clockwise":(this.rotationZ-this.pRotationZ<0||this.rotationZ-this.pRotationZ>270)&&(o="counter-clockwise");o!==v&&(u=this.rotationZ);Math.abs(this.rotationZ-u)>90&&Math.abs(this.rotationZ-u)<270&&(u=this.rotationZ,this._setProperty("turnAxis","Z"),i());v=o;this._setProperty("turnAxis",undefined)}d=this.deviceShaken||window.deviceShaken;typeof d=="function"&&(this.pAccelerationX!==null&&(g=Math.abs(this.accelerationX-this.pAccelerationX),nt=Math.abs(this.accelerationY-this.pAccelerationY)),g+nt>s&&d())};t.exports=i},{"../core/core":48}],62:[function(n,t){"use strict";var i=n("../core/core"),r={};i.prototype.isKeyPressed=!1;i.prototype.keyIsPressed=!1;i.prototype.key="";i.prototype.keyCode=0;i.prototype._onkeydown=function(n){var t,i,u;r[n.which]||(this._setProperty("isKeyPressed",!0),this._setProperty("keyIsPressed",!0),this._setProperty("keyCode",n.which),r[n.which]=!0,t=String.fromCharCode(n.which),t||(t=n.which),this._setProperty("key",t),i=this.keyPressed||window.keyPressed,typeof i!="function"||n.charCode||(u=i(n),u===!1&&n.preventDefault()))};i.prototype._onkeyup=function(n){var i=this.keyReleased||window.keyReleased,t,u;this._setProperty("isKeyPressed",!1);this._setProperty("keyIsPressed",!1);this._setProperty("_lastKeyCodeTyped",null);r[n.which]=!1;t=String.fromCharCode(n.which);t||(t=n.which);this._setProperty("key",t);this._setProperty("keyCode",n.which);typeof i=="function"&&(u=i(n),u===!1&&n.preventDefault())};i.prototype._onkeypress=function(n){var t,i;n.which!==this._lastKeyCodeTyped&&(this._setProperty("keyCode",n.which),this._setProperty("_lastKeyCodeTyped",n.which),this._setProperty("key",String.fromCharCode(n.which)),t=this.keyTyped||window.keyTyped,typeof t=="function"&&(i=t(n),i===!1&&n.preventDefault()))};i.prototype._onblur=function(){r={}};i.prototype.keyIsDown=function(n){return r[n]};t.exports=i},{"../core/core":48}],63:[function(n,t){"use strict";function u(n,t){var i=n.getBoundingClientRect();return{x:t.clientX-i.left,y:t.clientY-i.top}}var i=n("../core/core"),r=n("../core/constants");i.prototype._nextMouseX=0;i.prototype._nextMouseY=0;i.prototype.mouseX=0;i.prototype.mouseY=0;i.prototype.pmouseX=0;i.prototype.pmouseY=0;i.prototype.winMouseX=0;i.prototype.winMouseY=0;i.prototype.pwinMouseX=0;i.prototype.pwinMouseY=0;i.prototype.mouseButton=0;i.prototype.mouseIsPressed=!1;i.prototype.isMousePressed=!1;i.prototype._updateNextMouseCoords=function(n){if(n.type==="touchstart"||n.type==="touchmove"||n.type==="touchend")this._setProperty("_nextMouseX",this._nextTouchX),this._setProperty("_nextMouseY",this._nextTouchY);else if(this._curElement!==null){var t=u(this._curElement.elt,n);this._setProperty("_nextMouseX",t.x);this._setProperty("_nextMouseY",t.y)}this._setProperty("winMouseX",n.pageX);this._setProperty("winMouseY",n.pageY)};i.prototype._updateMouseCoords=function(){this._setProperty("pmouseX",this.mouseX);this._setProperty("pmouseY",this.mouseY);this._setProperty("mouseX",this._nextMouseX);this._setProperty("mouseY",this._nextMouseY);this._setProperty("pwinMouseX",this.winMouseX);this._setProperty("pwinMouseY",this.winMouseY)};i.prototype._setMouseButton=function(n){n.button===1?this._setProperty("mouseButton",r.CENTER):n.button===2?this._setProperty("mouseButton",r.RIGHT):this._setProperty("mouseButton",r.LEFT)};i.prototype._onmousemove=function(n){var t=this._isGlobal?window:this,i;this._updateNextMouseCoords(n);this._updateNextTouchCoords(n);this.isMousePressed?typeof t.mouseDragged=="function"?(i=t.mouseDragged(n),i===!1&&n.preventDefault()):typeof t.touchMoved=="function"&&(i=t.touchMoved(n),i===!1&&n.preventDefault()):typeof t.mouseMoved=="function"&&(i=t.mouseMoved(n),i===!1&&n.preventDefault())};i.prototype._onmousedown=function(n){var t=this._isGlobal?window:this,i;this._setProperty("isMousePressed",!0);this._setProperty("mouseIsPressed",!0);this._setMouseButton(n);this._updateNextMouseCoords(n);this._updateNextTouchCoords(n);typeof t.mousePressed=="function"?(i=t.mousePressed(n),i===!1&&n.preventDefault()):typeof t.touchStarted=="function"&&(i=t.touchStarted(n),i===!1&&n.preventDefault())};i.prototype._onmouseup=function(n){var t=this._isGlobal?window:this,i;this._setProperty("isMousePressed",!1);this._setProperty("mouseIsPressed",!1);typeof t.mouseReleased=="function"?(i=t.mouseReleased(n),i===!1&&n.preventDefault()):typeof t.touchEnded=="function"&&(i=t.touchEnded(n),i===!1&&n.preventDefault())};i.prototype._ondragend=i.prototype._onmouseup;i.prototype._ondragover=i.prototype._onmousemove;i.prototype._onclick=function(n){var t=this._isGlobal?window:this,i;typeof t.mouseClicked=="function"&&(i=t.mouseClicked(n),i===!1&&n.preventDefault())};i.prototype._onwheel=function(n){var t=this._isGlobal?window:this,i;typeof t.mouseWheel=="function"&&(n.delta=n.deltaY,i=t.mouseWheel(n),i===!1&&n.preventDefault())};t.exports=i},{"../core/constants":47,"../core/core":48}],64:[function(n,t){"use strict";function r(n,t,i){i=i||0;var u=n.getBoundingClientRect(),r=t.touches[i]||t.changedTouches[i];return{x:r.clientX-u.left,y:r.clientY-u.top,id:r.identifier}}var i=n("../core/core");i.prototype._nextTouchX=0;i.prototype._nextTouchY=0;i.prototype.touchX=0;i.prototype.touchY=0;i.prototype.ptouchX=0;i.prototype.ptouchY=0;i.prototype.touches=[];i.prototype.touchIsDown=!1;i.prototype._updateNextTouchCoords=function(n){var i,u,t;if(n.type==="mousedown"||n.type==="mousemove"||n.type==="mouseup")this._setProperty("_nextTouchX",this._nextMouseX),this._setProperty("_nextTouchY",this._nextMouseY);else if(this._curElement!==null){for(i=r(this._curElement.elt,n,0),this._setProperty("_nextTouchX",i.x),this._setProperty("_nextTouchY",i.y),u=[],t=0;t<n.touches.length;t++)u[t]=r(this._curElement.elt,n,t);this._setProperty("touches",u)}};i.prototype._updateTouchCoords=function(){this._setProperty("ptouchX",this.touchX);this._setProperty("ptouchY",this.touchY);this._setProperty("touchX",this._nextTouchX);this._setProperty("touchY",this._nextTouchY)};i.prototype._ontouchstart=function(n){var t=this._isGlobal?window:this,i;this._updateNextTouchCoords(n);this._updateNextMouseCoords(n);this._setProperty("touchIsDown",!0);typeof t.touchStarted=="function"?(i=t.touchStarted(n),i===!1&&n.preventDefault()):typeof t.mousePressed=="function"&&(i=t.mousePressed(n),i===!1&&n.preventDefault())};i.prototype._ontouchmove=function(n){var t=this._isGlobal?window:this,i;this._updateNextTouchCoords(n);this._updateNextMouseCoords(n);typeof t.touchMoved=="function"?(i=t.touchMoved(n),i===!1&&n.preventDefault()):typeof t.mouseDragged=="function"&&(i=t.mouseDragged(n),i===!1&&n.preventDefault())};i.prototype._ontouchend=function(n){this._updateNextTouchCoords(n);this._updateNextMouseCoords(n);this.touches.length===0&&this._setProperty("touchIsDown",!1);var t=this._isGlobal?window:this,i;typeof t.touchEnded=="function"?(i=t.touchEnded(n),i===!1&&n.preventDefault()):typeof t.mouseReleased=="function"&&(i=t.mouseReleased(n),i===!1&&n.preventDefault())};t.exports=i},{"../core/core":48}],65:[function(n,t){"use strict";function o(n){var t=n*3.5|0,c,a,v,l,y,o,s,i,h;if(t=t<1?1:t<248?t:248,e!==t){for(e=t,u=1+e<<1,f=new Int32Array(u),r=new Array(u),c=0;c<u;c++)r[c]=new Int32Array(256);for(o=1,s=t-1;o<t;o++)for(f[t+o]=f[s]=v=s*s,l=r[t+o],y=r[s--],i=0;i<256;i++)l[i]=y[i]=v*i;for(a=f[t]=t*t,l=r[t],h=0;h<256;h++)l[h]=a*h}}function s(n,t){for(var c,it,a,v,ut,st=i._toPixels(n),l=n.width,rt=n.height,w=l*rt,ft=new Int32Array(w),et=0;et<w;et++)ft[et]=i._getARGB(st,et);var h,b,k,d,g,s,y,p,ot,nt,ht=new Int32Array(w),ct=new Int32Array(w),lt=new Int32Array(w),at=new Int32Array(w),tt=0;for(o(t),it=0;it<rt;it++){for(c=0;c<l;c++){if(d=k=b=g=h=0,s=c-e,s<0)nt=-s,s=0;else{if(s>=l)break;nt=0}for(a=nt;a<u;a++){if(s>=l)break;ut=ft[s+tt];v=r[a];g+=v[(ut&-16777216)>>>24];b+=v[(ut&16711680)>>16];k+=v[(ut&65280)>>8];d+=v[ut&255];h+=f[a];s++}y=tt+c;ht[y]=g/h;ct[y]=b/h;lt[y]=k/h;at[y]=d/h}tt+=l}for(tt=0,p=-e,ot=p*l,it=0;it<rt;it++){for(c=0;c<l;c++){if(d=k=b=g=h=0,p<0)nt=y=-p,s=c;else{if(p>=rt)break;nt=0;y=p;s=c+ot}for(a=nt;a<u;a++){if(y>=rt)break;v=r[a];g+=v[ht[s]];b+=v[ct[s]];k+=v[lt[s]];d+=v[at[s]];h+=f[a];y++;s+=l}ft[c+tt]=g/h<<24|b/h<<16|k/h<<8|d/h}tt+=l;ot+=l;p++}i._setPixels(st,ft)}var i={},e,u,f,r;i._toPixels=function(n){return n instanceof ImageData?n.data:n.getContext("2d").getImageData(0,0,n.width,n.height).data};i._getARGB=function(n,t){var i=t*4;return n[i+3]<<24&4278190080|n[i]<<16&16711680|n[i+1]<<8&65280|n[i+2]&255};i._setPixels=function(n,t){for(var r=0,i=0,u=n.length;i<u;i++)r=i*4,n[r+0]=(t[i]&16711680)>>>16,n[r+1]=(t[i]&65280)>>>8,n[r+2]=t[i]&255,n[r+3]=(t[i]&4278190080)>>>24};i._toImageData=function(n){return n instanceof ImageData?n:n.getContext("2d").getImageData(0,0,n.width,n.height)};i._createImageData=function(n,t){return i._tmpCanvas=document.createElement("canvas"),i._tmpCtx=i._tmpCanvas.getContext("2d"),this._tmpCtx.createImageData(n,t)};i.apply=function(n,t,i){var r=n.getContext("2d"),u=r.getImageData(0,0,n.width,n.height),f=t(u,i);f instanceof ImageData?r.putImageData(f,0,0,0,0,n.width,n.height):r.putImageData(u,0,0,0,0,n.width,n.height)};i.threshold=function(n,t){var u=i._toPixels(n),f,r;for(t===undefined&&(t=.5),f=Math.floor(t*255),r=0;r<u.length;r+=4){var o=u[r],s=u[r+1],h=u[r+2],c=.2126*o+.7152*s+.0722*h,e;e=c>=f?255:0;u[r]=u[r+1]=u[r+2]=e}};i.gray=function(n){for(var r=i._toPixels(n),t=0;t<r.length;t+=4){var u=r[t],f=r[t+1],e=r[t+2],o=.2126*u+.7152*f+.0722*e;r[t]=r[t+1]=r[t+2]=o}};i.opaque=function(n){for(var t=i._toPixels(n),r=0;r<t.length;r+=4)t[r+3]=255;return t};i.invert=function(n){for(var r=i._toPixels(n),t=0;t<r.length;t+=4)r[t]=255-r[t],r[t+1]=255-r[t+1],r[t+2]=255-r[t+2]};i.posterize=function(n,t){var u=i._toPixels(n),f,r;if(t<2||t>255)throw new Error("Level must be greater than 2 and less than 255 for posterize");for(f=t-1,r=0;r<u.length;r+=4){var e=u[r],o=u[r+1],s=u[r+2];u[r]=(e*t>>8)*255/f;u[r+1]=(o*t>>8)*255/f;u[r+2]=(s*t>>8)*255/f}};i.dilate=function(n){for(var u=i._toPixels(n),t=0,p=u.length?u.length/4:0,nt=new Int32Array(p),tt,w,c,f,r,l,a,v,y,e,o,s,h,b,k,d,g;t<p;)for(tt=t,w=t+n.width;t<w;)c=f=i._getARGB(u,t),a=t-1,l=t+1,v=t-n.width,y=t+n.width,a<tt&&(a=t),l>=w&&(l=t),v<0&&(v=0),y>=p&&(y=t),s=i._getARGB(u,v),o=i._getARGB(u,a),h=i._getARGB(u,y),e=i._getARGB(u,l),r=77*(c>>16&255)+151*(c>>8&255)+28*(c&255),k=77*(o>>16&255)+151*(o>>8&255)+28*(o&255),b=77*(e>>16&255)+151*(e>>8&255)+28*(e&255),d=77*(s>>16&255)+151*(s>>8&255)+28*(s&255),g=77*(h>>16&255)+151*(h>>8&255)+28*(h&255),k>r&&(f=o,r=k),b>r&&(f=e,r=b),d>r&&(f=s,r=d),g>r&&(f=h,r=g),nt[t++]=f;i._setPixels(u,nt)};i.erode=function(n){for(var u=i._toPixels(n),t=0,p=u.length?u.length/4:0,nt=new Int32Array(p),tt,w,c,f,r,l,a,v,y,e,o,s,h,b,k,d,g;t<p;)for(tt=t,w=t+n.width;t<w;)c=f=i._getARGB(u,t),a=t-1,l=t+1,v=t-n.width,y=t+n.width,a<tt&&(a=t),l>=w&&(l=t),v<0&&(v=0),y>=p&&(y=t),s=i._getARGB(u,v),o=i._getARGB(u,a),h=i._getARGB(u,y),e=i._getARGB(u,l),r=77*(c>>16&255)+151*(c>>8&255)+28*(c&255),k=77*(o>>16&255)+151*(o>>8&255)+28*(o&255),b=77*(e>>16&255)+151*(e>>8&255)+28*(e&255),d=77*(s>>16&255)+151*(s>>8&255)+28*(s&255),g=77*(h>>16&255)+151*(h>>8&255)+28*(h&255),k<r&&(f=o,r=k),b<r&&(f=e,r=b),d<r&&(f=s,r=d),g<r&&(f=h,r=g),nt[t++]=f;i._setPixels(u,nt)};i.blur=function(n,t){s(n,t)};t.exports=i},{}],66:[function(n,t){"use strict";var i=n("../core/core"),r=[];i.prototype.createImage=function(n,t){return new i.Image(n,t)};i.prototype.saveCanvas=function(){var n,u,t,f,r,o,e;if(arguments.length===3?(n=arguments[0],u=arguments[1],t=arguments[2]):arguments.length===2?typeof arguments[0]=="object"?(n=arguments[0],u=arguments[1]):(u=arguments[0],t=arguments[1]):arguments.length===1&&(typeof arguments[0]=="object"?n=arguments[0]:u=arguments[0]),n instanceof i.Element&&(n=n.elt),n instanceof HTMLCanvasElement||(n=null),t||(t=i.prototype._checkFileExtension(u,t)[1],t===""&&(t="png")),n||this._curElement&&this._curElement.elt&&(n=this._curElement.elt),i.prototype._isSafari())f="Hello, Safari user!\n",f+="Now capturing a screenshot...\n",f+="To save this image,\n",f+="go to File --> Save As.\n",alert(f),window.location.href=n.toDataURL();else{if(typeof t=="undefined")t="png",r="image/png";else switch(t){case"png":r="image/png";break;case"jpeg":r="image/jpeg";break;case"jpg":r="image/jpeg";break;default:r="image/png"}o="image/octet-stream";e=n.toDataURL(r);e=e.replace(r,o);i.prototype.downloadFile(e,u,t)}};i.prototype.saveFrames=function(n,t,u,f,e){var o=u||3,s;o=i.prototype.constrain(o,0,15);o=o*1e3;s=f||15;s=i.prototype.constrain(s,0,22);var h=0,c=i.prototype._makeFrame,l=this._curElement.elt,a=setInterval(function(){c(n+h,t,l);h++},1e3/s);setTimeout(function(){var n,t;if(clearInterval(a),e)e(r);else for(n=0;n<r.length;n++)t=r[n],i.prototype.downloadFile(t.imageData,t.filename,t.ext);r=[]},o+.01)};i.prototype._makeFrame=function(n,t,i){var o,u,s,e,f;if(o=this?this._curElement.elt:i,t)switch(t.toLowerCase()){case"png":u="image/png";break;case"jpeg":u="image/jpeg";break;case"jpg":u="image/jpeg";break;default:u="image/png"}else t="png",u="image/png";s="image/octet-stream";e=o.toDataURL(u);e=e.replace(u,s);f={};f.imageData=e;f.filename=n;f.ext=t;r.push(f)};t.exports=i},{"../core/core":48}],67:[function(n,t){"use strict";function u(n,t){return n>0&&n<t?n:t}var i=n("../core/core"),f=n("./filters"),e=n("../core/canvas"),r=n("../core/constants");n("../core/error_helpers");i.prototype.loadImage=function(n,t,r){var u=new Image,f=new i.Image(1,1,this),e=i._getDecrementPreload.apply(this,arguments);return u.onload=function(){f.width=f.canvas.width=u.width;f.height=f.canvas.height=u.height;f.drawingContext.drawImage(u,0,0);typeof t=="function"&&t(f);e&&t!==e&&e()},u.onerror=function(n){i._friendlyFileLoadError(0,u.src);typeof r=="function"&&r!==e&&r(n)},n.indexOf("data:image/")!==0&&(u.crossOrigin="Anonymous"),u.src=n,f};i.prototype.image=function(n,t,i,r,f,o,s,h,c){var a,v,l;if(arguments.length<=5)o=t||0,s=i||0,t=0,i=0,n.elt&&n.elt.videoWidth&&!n.canvas?(a=n.elt.videoWidth,v=n.elt.videoHeight,h=r||n.elt.width,c=f||n.elt.width*v/a,r=a,f=v):(h=r||n.width,c=f||n.height,r=n.width,f=n.height);else if(arguments.length===9)t=t||0,i=i||0,r=u(r,n.width),f=u(f,n.height),o=o||0,s=s||0,h=h||n.width,c=c||n.height;else throw"Wrong number of arguments to image()";l=e.modeAdjust(o,s,h,c,this._renderer._imageMode);this._renderer.image(n,t,i,r,f,l.x,l.y,l.w,l.h)};i.prototype.tint=function(){var n=this.color.apply(this,arguments);this._renderer._tint=n.levels};i.prototype.noTint=function(){this._renderer._tint=null};i.prototype._getTintedImageCanvas=function(n){var i,r,t;if(!n.canvas)return n;i=f._toPixels(n.canvas);r=document.createElement("canvas");r.width=n.canvas.width;r.height=n.canvas.height;var e=r.getContext("2d"),o=e.createImageData(n.canvas.width,n.canvas.height),u=o.data;for(t=0;t<i.length;t+=4){var s=i[t],h=i[t+1],c=i[t+2],l=i[t+3];u[t]=s*this._renderer._tint[0]/255;u[t+1]=h*this._renderer._tint[1]/255;u[t+2]=c*this._renderer._tint[2]/255;u[t+3]=l*this._renderer._tint[3]/255}return e.putImageData(o,0,0),r};i.prototype.imageMode=function(n){(n===r.CORNER||n===r.CORNERS||n===r.CENTER)&&(this._renderer._imageMode=n)};t.exports=i},{"../core/canvas":46,"../core/constants":47,"../core/core":48,"../core/error_helpers":51,"./filters":65}],68:[function(n,t){"use strict";var i=n("../core/core"),r=n("./filters");i.Image=function(n,t){this.width=n;this.height=t;this.canvas=document.createElement("canvas");this.canvas.width=this.width;this.canvas.height=this.height;this.drawingContext=this.canvas.getContext("2d");this._pixelDensity=1;this.isTexture=!1;this.pixels=[]};i.Image.prototype._setProperty=function(n,t){this[n]=t};i.Image.prototype.loadPixels=function(){i.Renderer2D.prototype.loadPixels.call(this)};i.Image.prototype.updatePixels=function(n,t,r,u){i.Renderer2D.prototype.updatePixels.call(this,n,t,r,u)};i.Image.prototype.get=function(n,t,r,u){return i.Renderer2D.prototype.get.call(this,n,t,r,u)};i.Image.prototype.set=function(n,t,r){i.Renderer2D.prototype.set.call(this,n,t,r)};i.Image.prototype.resize=function(n,t){n===0&&t===0?(n=this.canvas.width,t=this.canvas.height):n===0?n=this.canvas.width*t/this.canvas.height:t===0&&(t=this.canvas.height*n/this.canvas.width);var i=document.createElement("canvas");i.width=n;i.height=t;i.getContext("2d").drawImage(this.canvas,0,0,this.canvas.width,this.canvas.height,0,0,i.width,i.height);this.canvas.width=this.width=n;this.canvas.height=this.height=t;this.drawingContext.drawImage(i,0,0,n,t,0,0,n,t);this.pixels.length>0&&this.loadPixels()};i.Image.prototype.copy=function(){i.prototype.copy.apply(this,arguments)};i.Image.prototype.mask=function(n){var r,t,u;n===undefined&&(n=this);r=this.drawingContext.globalCompositeOperation;t=1;n instanceof i.Renderer&&(t=n._pInst._pixelDensity);u=[n,0,0,t*n.width,t*n.height,0,0,this.width,this.height];this.drawingContext.globalCompositeOperation="destination-in";this.copy.apply(this,u);this.drawingContext.globalCompositeOperation=r};i.Image.prototype.filter=function(n,t){r.apply(this.canvas,r[n.toLowerCase()],t)};i.Image.prototype.blend=function(){i.prototype.blend.apply(this,arguments)};i.Image.prototype.save=function(n,t){var r,f,u;if(t)switch(t.toLowerCase()){case"png":r="image/png";break;case"jpeg":r="image/jpeg";break;case"jpg":r="image/jpeg";break;default:r="image/png"}else t="png",r="image/png";f="image/octet-stream";u=this.canvas.toDataURL(r);u=u.replace(r,f);i.prototype.downloadFile(u,n,t)};i.Image.prototype.createTexture=function(){return this};t.exports=i.Image},{"../core/core":48,"./filters":65}],69:[function(n,t){"use strict";var i=n("../core/core"),r=n("./filters");n("../color/p5.Color");i.prototype.pixels=[];i.prototype.blend=function(){this._renderer.blend.apply(this._renderer,arguments)};i.prototype.copy=function(){i.Renderer2D._copyHelper.apply(this,arguments)};i.prototype.filter=function(n,t){r.apply(this.canvas,r[n.toLowerCase()],t)};i.prototype.get=function(n,t,i,r){return this._renderer.get(n,t,i,r)};i.prototype.loadPixels=function(){this._renderer.loadPixels()};i.prototype.set=function(n,t,i){this._renderer.set(n,t,i)};i.prototype.updatePixels=function(n,t,i,r){this.pixels.length!==0&&this._renderer.updatePixels(n,t,i,r)};t.exports=i},{"../color/p5.Color":42,"../core/core":48,"./filters":65}],70:[function(n,t){"use strict";function o(n,t){var u={},i,r,f,e;if(t=t||[],typeof t=="undefined")for(i=0;i<n.length;i++)t[i.toString()]=i;for(r=0;r<t.length;r++)f=t[r],e=n[r],u[f]=e;return u}function f(n){return n.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}function u(n,t){t&&t!==!0&&t!=="true"||(t="");n||(n="untitled");var i="";return n&&n.indexOf(".")>-1&&(i=n.split(".").pop()),t&&i!==t&&(i=t,n=n+"."+i),[n,i]}function s(n){document.body.removeChild(n.target)}var i=n("../core/core"),r=n("reqwest"),e=n("opentype.js");n("../core/error_helpers");i._getDecrementPreload=function(){var n=arguments[arguments.length-1];return(window.preload||this&&this.preload)&&typeof n=="function"?n:null};i.prototype.loadFont=function(n,t,r){var f=new i.Font(this),u=i._getDecrementPreload.apply(this,arguments);return e.load(n,function(i,e){if(i){if(typeof r!="undefined"&&r!==u)return r(i);throw i;}f.font=e;typeof t!="undefined"&&t(f);u&&t!==u&&u();var o=n.split("\\").pop().split("/").pop(),s=o.lastIndexOf("."),c,h,l=s<1?null:o.substr(s+1);["ttf","otf","woff","woff2"].indexOf(l)>-1&&(c=o.substr(0,s),h=document.createElement("style"),h.appendChild(document.createTextNode("\n@font-face {\nfont-family: "+c+";\nsrc: url("+n+");\n}\n")),document.head.appendChild(h))}),f};i.prototype.createInput=function(){throw"not yet implemented";};i.prototype.createReader=function(){throw"not yet implemented";};i.prototype.loadBytes=function(){throw"not yet implemented";};i.prototype.loadJSON=function(){for(var n,h=arguments[0],t=arguments[1],u,f=i._getDecrementPreload.apply(this,arguments),o=[],s="json",e=2;e<arguments.length;e++)n=arguments[e],typeof n=="string"?(n==="jsonp"||n==="json")&&(s=n):typeof n=="function"&&(u=n);return r({url:h,type:s,crossOrigin:!0,error:function(n){u?u(n):console.log(n.statusText)},success:function(n){for(var i in n)o[i]=n[i];typeof t!="undefined"&&t(n);f&&t!==f&&f()}}),o};i.prototype.loadStrings=function(n,t,r){var f=[],u=new XMLHttpRequest,e=i._getDecrementPreload.apply(this,arguments);return u.addEventListener("error",function(n){r?r(n):console.log(n.responseText)}),u.open("GET",n,!0),u.onreadystatechange=function(){var n,i;if(u.readyState===4)if(u.status===200){n=u.responseText.match(/[^\r\n]+/g);for(i in n)f[i]=n[i];typeof t!="undefined"&&t(f);e&&t!==e&&e()}else r?r(u):console.log(u.statusText)},u.send(null),f};i.prototype.loadTable=function(n){for(var f,u=null,l=[],c=!1,h=",",s=!1,e=i._getDecrementPreload.apply(this,arguments),t=1;t<arguments.length;t++)if(typeof arguments[t]=="function"&&arguments[t]!==e)u=arguments[t];else if(typeof arguments[t]=="string")if(l.push(arguments[t]),arguments[t]==="header"&&(c=!0),arguments[t]==="csv")if(s)throw new Error("Cannot set multiple separator types.");else h=",",s=!0;else if(arguments[t]==="tsv")if(s)throw new Error("Cannot set multiple separator types.");else h="\t",s=!0;return f=new i.Table,r({url:n,crossOrigin:!0,type:"csv"}).then(function(n){var b;n=n.responseText;for(var r={},d=0,y=1,tt=4,p='"',g="\n",s=[],v=0,a=null,l,it=function(){r.escaped=!1;a=[];nt()},k=function(){r.currentState=tt;s.push(a);a=null},nt=function(){r.currentState=d;r.token=""},w=function(){a.push(r.token);nt()};;){if(l=n[v++],l==null){if(r.escaped)throw new Error("Unclosed quote in file.");if(a){w();k();break}}if(a===null&&it(),r.currentState===d){if(l===p){r.escaped=!0;r.currentState=y;continue}r.currentState=y}if(r.currentState===y&&r.escaped){l===p?n[v]===p?(r.token+=p,v++):(r.escaped=!1,r.currentState=2):r.token+=l;continue}l==="\r"?(n[v]===g&&v++,w(),k()):l===g?(w(),k()):l===h?w():r.currentState===y&&(r.token+=l)}if(c)f.columns=s.shift();else for(t=0;t<s[0].length;t++)f.columns[t]="null";for(t=0;t<s.length;t++){if(t===s.length-1&&s[t].length===1&&s[t][0]==="undefined")break;b=new i.TableRow;b.arr=s[t];b.obj=o(s[t],f.columns);f.addRow(b)}u!==null&&u(f);e&&u!==e&&e()}).fail(function(){i._friendlyFileLoadError(2,n);typeof u!="undefined"&&u!==e&&u(!1)}),f};i.prototype.loadXML=function(n,t,u){var f=document.implementation.createDocument(null,null),e=i._getDecrementPreload.apply(this,arguments);return r({url:n,type:"xml",crossOrigin:!0,error:function(n){u?u(n):console.log(n.statusText)}}).then(function(n){var i=n.documentElement;f.appendChild(i);typeof t!="undefined"&&t(f);e&&t!==e&&e()}),f};i.prototype.parseXML=function(){throw"not yet implemented";};i.prototype.selectFolder=function(){throw"not yet implemented";};i.prototype.selectInput=function(){throw"not yet implemented";};i.prototype.httpGet=function(){var n=Array.prototype.slice.call(arguments);n.push("GET");i.prototype.httpDo.apply(this,n)};i.prototype.httpPost=function(){var n=Array.prototype.slice.call(arguments);n.push("POST");i.prototype.httpDo.apply(this,n)};i.prototype.httpDo=function(){var u,n;if(typeof arguments[0]=="object")r(arguments[0]);else{var o="GET",f=arguments[0],s={},t="",i,e;for(u=1;u<arguments.length;u++)n=arguments[u],typeof n=="string"?n==="GET"||n==="POST"||n==="PUT"?o=n:t=n:typeof n=="object"?s=n:typeof n=="function"&&(i?e=n:i=n);t===""&&(t=f.indexOf("json")!==-1?"json":f.indexOf("xml")!==-1?"xml":"text");r({url:f,method:o,data:s,type:t,crossOrigin:!0,success:function(n){typeof i!="undefined"&&(t==="text"?i(n.response):i(n))},error:function(n){e?e(n):console.log(n.statusText)}})}};window.URL=window.URL||window.webkitURL;i.prototype._pWriters=[];i.prototype.beginRaw=function(){throw"not yet implemented";};i.prototype.beginRecord=function(){throw"not yet implemented";};i.prototype.createOutput=function(){throw"not yet implemented";};i.prototype.createWriter=function(n,t){var r;for(var u in i.prototype._pWriters)if(i.prototype._pWriters[u].name===n)return r=new i.PrintWriter(n+window.millis(),t),i.prototype._pWriters.push(r),r;return r=new i.PrintWriter(n,t),i.prototype._pWriters.push(r),r};i.prototype.endRaw=function(){throw"not yet implemented";};i.prototype.endRecord=function(){throw"not yet implemented";};i.PrintWriter=function(n,t){var r=this;this.name=n;this.content="";this.print=function(n){this.content+=n};this.println=function(n){this.content+=n+"\n"};this.flush=function(){this.content=""};this.close=function(){var f=[],u;f.push(this.content);i.prototype.writeFile(f,n,t);for(u in i.prototype._pWriters)i.prototype._pWriters[u].name===this.name&&i.prototype._pWriters.splice(u,1);r.flush();r={}}};i.prototype.saveBytes=function(){throw"not yet implemented";};i.prototype.save=function(){var n=arguments,t=this._curElement.elt,r;if(n.length===0){i.prototype.saveCanvas(t);return}if(n[0]instanceof i.Renderer||n[0]instanceof i.Graphics){i.prototype.saveCanvas(n[0].elt,n[1],n[2]);return}if(n.length===1&&typeof n[0]=="string")i.prototype.saveCanvas(t,n[0]);else{r=u(n[1],n[2])[1];switch(r){case"json":i.prototype.saveJSON(n[0],n[1],n[2]);return;case"txt":i.prototype.saveStrings(n[0],n[1],n[2]);return;default:n[0]instanceof Array?i.prototype.saveStrings(n[0],n[1],n[2]):n[0]instanceof i.Table?i.prototype.saveTable(n[0],n[1],n[2],n[3]):n[0]instanceof i.Image?i.prototype.saveCanvas(n[0].canvas,n[1]):n[0]instanceof i.SoundFile&&i.prototype.saveSound(n[0],n[1],n[2],n[3])}}};i.prototype.saveJSON=function(n,t,i){var r;r=i?JSON.stringify(n):JSON.stringify(n,undefined,2);console.log(r);this.saveStrings(r.split("\n"),t,"json")};i.prototype.saveJSONObject=i.prototype.saveJSON;i.prototype.saveJSONArray=i.prototype.saveJSON;i.prototype.saveStream=function(){throw"not yet implemented";};i.prototype.saveStrings=function(n,t,i){for(var f=i||"txt",u=this.createWriter(t,f),r=0;r<n.length;r++)r<n.length-1?u.println(n[r]):u.print(n[r]);u.close();u.flush()};i.prototype.saveXML=function(){throw"not yet implemented";};i.prototype.selectOutput=function(){throw"not yet implemented";};i.prototype.saveTable=function(n,t,i){var r=this.createWriter(t,i),e=n.columns,a=",",s,u,o,v,h,y,c,l,p,w;if(i==="tsv"&&(a="\t"),i!=="html"){if(e[0]!=="0")for(s=0;s<e.length;s++)s<e.length-1?r.print(e[s]+a):r.println(e[s]);for(u=0;u<n.rows.length;u++)for(o=0;o<n.rows[u].arr.length;o++)o<n.rows[u].arr.length-1?r.print(n.rows[u].arr[o]+a):u<n.rows.length-1?r.println(n.rows[u].arr[o]):r.print(n.rows[u].arr[o])}else{if(r.println("<html>"),r.println("<head>"),v='  <meta http-equiv="content-type" content',v+='="text/html;charset=utf-8" />',r.println(v),r.println("<\/head>"),r.println("<body>"),r.println("  <table>"),e[0]!=="0"){for(r.println("    <tr>"),h=0;h<e.length;h++)y=f(e[h]),r.println("      <td>"+y),r.println("      <\/td>");r.println("    <\/tr>")}for(c=0;c<n.rows.length;c++){for(r.println("    <tr>"),l=0;l<n.columns.length;l++)p=n.rows[c].getString(l),w=f(p),r.println("      <td>"+w),r.println("      <\/td>");r.println("    <\/tr>")}r.println("  <\/table>");r.println("<\/body>");r.print("<\/html>")}r.close();r.flush()};i.prototype.writeFile=function(n,t,r){var u="application/octet-stream",f,e;i.prototype._isSafari()&&(u="text/plain");f=new Blob(n,{type:u});e=window.URL.createObjectURL(f);i.prototype.downloadFile(e,t,r)};i.prototype.downloadFile=function(n,t,r){var o=u(t,r),h=o[0],c=o[1],f=document.createElement("a"),e;f.href=n;f.download=h;f.onclick=s;f.style.display="none";document.body.appendChild(f);i.prototype._isSafari()&&(e="Hello, Safari user! To download this file...\n",e+="1. Go to File --> Save As.\n",e+='2. Choose "Page Source" as the Format.\n',e+='3. Name it with this extension: ."'+c+'"',alert(e));f.click();n=null};i.prototype._checkFileExtension=u;i.prototype._isSafari=function(){var n=Object.prototype.toString.call(window.HTMLElement);return n.indexOf("Constructor")>0};t.exports=i},{"../core/core":48,"../core/error_helpers":51,"opentype.js":8,reqwest:27}],71:[function(n,t){"use strict";var i=n("../core/core");i.Table=function(){this.columns=[];this.rows=[]};i.Table.prototype.addRow=function(n){var t=n||new i.TableRow;if(typeof t.arr=="undefined"||typeof t.obj=="undefined")throw"invalid TableRow: "+t;return t.table=this,this.rows.push(t),t};i.Table.prototype.removeRow=function(n){this.rows[n].table=null;var t=this.rows.splice(n+1,this.rows.length);this.rows.pop();this.rows=this.rows.concat(t)};i.Table.prototype.getRow=function(n){return this.rows[n]};i.Table.prototype.getRows=function(){return this.rows};i.Table.prototype.findRow=function(n,t){var i,r;if(typeof t=="string"){for(i=0;i<this.rows.length;i++)if(this.rows[i].obj[t]===n)return this.rows[i]}else for(r=0;r<this.rows.length;r++)if(this.rows[r].arr[t]===n)return this.rows[r];return null};i.Table.prototype.findRows=function(n,t){var u=[],i,r;if(typeof t=="string")for(i=0;i<this.rows.length;i++)this.rows[i].obj[t]===n&&u.push(this.rows[i]);else for(r=0;r<this.rows.length;r++)this.rows[r].arr[t]===n&&u.push(this.rows[r]);return u};i.Table.prototype.matchRow=function(n,t){var i,r;if(typeof t=="number"){for(i=0;i<this.rows.length;i++)if(this.rows[i].arr[t].match(n))return this.rows[i]}else for(r=0;r<this.rows.length;r++)if(this.rows[r].obj[t].match(n))return this.rows[r];return null};i.Table.prototype.matchRows=function(n,t){var u=[],i,r;if(typeof t=="number")for(i=0;i<this.rows.length;i++)this.rows[i].arr[t].match(n)&&u.push(this.rows[i]);else for(r=0;r<this.rows.length;r++)this.rows[r].obj[t].match(n)&&u.push(this.rows[r]);return u};i.Table.prototype.getColumn=function(n){var r=[],t,i;if(typeof n=="string")for(t=0;t<this.rows.length;t++)r.push(this.rows[t].obj[n]);else for(i=0;i<this.rows.length;i++)r.push(this.rows[i].arr[n]);return r};i.Table.prototype.clearRows=function(){delete this.rows;this.rows=[]};i.Table.prototype.addColumn=function(n){var t=n||null;this.columns.push(t)};i.Table.prototype.getColumnCount=function(){return this.columns.length};i.Table.prototype.getRowCount=function(){return this.rows.length};i.Table.prototype.removeTokens=function(n,t){for(var h,i,r,e,u,o,a,f,s,v=function(n){return n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")},l=[],c=0;c<n.length;c++)l.push(v(n.charAt(c)));if(h=new RegExp(l.join("|"),"g"),typeof t=="undefined")for(i=0;i<this.columns.length;i++)for(r=0;r<this.rows.length;r++)e=this.rows[r].arr[i],e=e.replace(h,""),this.rows[r].arr[i]=e,this.rows[r].obj[this.columns[i]]=e;else if(typeof t=="string")for(u=0;u<this.rows.length;u++)o=this.rows[u].obj[t],o=o.replace(h,""),this.rows[u].obj[t]=o,a=this.columns.indexOf(t),this.rows[u].arr[a]=o;else for(f=0;f<this.rows.length;f++)s=this.rows[f].arr[t],s=s.replace(h,""),this.rows[f].arr[t]=s,this.rows[f].obj[this.columns[t]]=s};i.Table.prototype.trim=function(n){var s=new RegExp(" ","g"),t,i,f,r,e,h,u,o;if(typeof n=="undefined")for(t=0;t<this.columns.length;t++)for(i=0;i<this.rows.length;i++)f=this.rows[i].arr[t],f=f.replace(s,""),this.rows[i].arr[t]=f,this.rows[i].obj[this.columns[t]]=f;else if(typeof n=="string")for(r=0;r<this.rows.length;r++)e=this.rows[r].obj[n],e=e.replace(s,""),this.rows[r].obj[n]=e,h=this.columns.indexOf(n),this.rows[r].arr[h]=e;else for(u=0;u<this.rows.length;u++)o=this.rows[u].arr[n],o=o.replace(s,""),this.rows[u].arr[n]=o,this.rows[u].obj[this.columns[n]]=o};i.Table.prototype.removeColumn=function(n){var u,r,f,t,i,e;for(typeof n=="string"?(u=n,r=this.columns.indexOf(n),console.log("string")):(r=n,u=this.columns[n]),f=this.columns.splice(r+1,this.columns.length),this.columns.pop(),this.columns=this.columns.concat(f),t=0;t<this.rows.length;t++)i=this.rows[t].arr,e=i.splice(r+1,i.length),i.pop(),this.rows[t].arr=i.concat(e),delete this.rows[t].obj[u]};i.Table.prototype.set=function(n,t,i){this.rows[n].set(t,i)};i.Table.prototype.setNum=function(n,t,i){this.rows[n].setNum(t,i)};i.Table.prototype.setString=function(n,t,i){this.rows[n].setString(t,i)};i.Table.prototype.get=function(n,t){return this.rows[n].get(t)};i.Table.prototype.getNum=function(n,t){return this.rows[n].getNum(t)};i.Table.prototype.getString=function(n,t){return this.rows[n].getString(t)};i.Table.prototype.getObject=function(n){for(var i={},r,u,f,t=0;t<this.rows.length;t++)if(r=this.rows[t].obj,typeof n=="string")if(u=this.columns.indexOf(n),u>=0)f=r[n],i[f]=r;else throw'This table has no column named "'+n+'"';else i[t]=this.rows[t].obj;return i};i.Table.prototype.getArray=function(){for(var t=[],n=0;n<this.rows.length;n++)t.push(this.rows[n].arr);return t};t.exports=i.Table},{"../core/core":48}],72:[function(n,t){"use strict";var i=n("../core/core");i.TableRow=function(n,t){var r=[],u={},i,f,e;for(n&&(t=t||",",r=n.split(t)),i=0;i<r.length;i++)f=i,e=r[i],u[f]=e;this.arr=r;this.obj=u;this.table=null};i.TableRow.prototype.set=function(n,t){var i,r;if(typeof n=="string")if(i=this.table.columns.indexOf(n),i>=0)this.obj[n]=t,this.arr[i]=t;else throw'This table has no column named "'+n+'"';else if(n<this.table.columns.length)this.arr[n]=t,r=this.table.columns[n],this.obj[r]=t;else throw"Column #"+n+" is out of the range of this table";};i.TableRow.prototype.setNum=function(n,t){var i=parseFloat(t,10);this.set(n,i)};i.TableRow.prototype.setString=function(n,t){var i=t.toString();this.set(n,i)};i.TableRow.prototype.get=function(n){return typeof n=="string"?this.obj[n]:this.arr[n]};i.TableRow.prototype.getNum=function(n){var t;if(t=typeof n=="string"?parseFloat(this.obj[n],10):parseFloat(this.arr[n],10),t.toString()==="NaN")throw"Error: "+this.obj[n]+" is NaN (Not a Number)";return t};i.TableRow.prototype.getString=function(n){return typeof n=="string"?this.obj[n].toString():this.arr[n].toString()};t.exports=i.TableRow},{"../core/core":48}],73:[function(n,t){"use strict";var i=n("../core/core");i.prototype.abs=Math.abs;i.prototype.ceil=Math.ceil;i.prototype.constrain=function(n,t,i){return Math.max(Math.min(n,i),t)};i.prototype.dist=function(n,t,i,r,u,f){return arguments.length===4?Math.sqrt((i-n)*(i-n)+(r-t)*(r-t)):arguments.length===6?Math.sqrt((r-n)*(r-n)+(u-t)*(u-t)+(f-i)*(f-i)):void 0};i.prototype.exp=Math.exp;i.prototype.floor=Math.floor;i.prototype.lerp=function(n,t,i){return i*(t-n)+n};i.prototype.log=Math.log;i.prototype.mag=function(n,t){return Math.sqrt(n*n+t*t)};i.prototype.map=function(n,t,i,r,u){return(n-t)/(i-t)*(u-r)+r};i.prototype.max=function(){return arguments[0]instanceof Array?Math.max.apply(null,arguments[0]):Math.max.apply(null,arguments)};i.prototype.min=function(){return arguments[0]instanceof Array?Math.min.apply(null,arguments[0]):Math.min.apply(null,arguments)};i.prototype.norm=function(n,t,i){return this.map(n,t,i,0,1)};i.prototype.pow=Math.pow;i.prototype.round=Math.round;i.prototype.sq=function(n){return n*n};i.prototype.sqrt=Math.sqrt;t.exports=i},{"../core/core":48}],74:[function(n,t){"use strict";var i=n("../core/core");i.prototype.createVector=function(n,t,r){return this instanceof i?new i.Vector(this,arguments):new i.Vector(n,t,r)};t.exports=i},{"../core/core":48}],75:[function(n,t){"use strict";var u=n("../core/core"),o=4,f=1<<o,s=8,l=1<<s,r=4095,h=4,c=.5,e=function(n){return.5*(1-Math.cos(n*Math.PI))},i;u.prototype.noise=function(n,t,u){var w,ut,v;if(t=t||0,u=u||0,i==null)for(i=new Array(r+1),w=0;w<r+1;w++)i[w]=Math.random();n<0&&(n=-n);t<0&&(t=-t);u<0&&(u=-u);var b=Math.floor(n),k=Math.floor(t),d=Math.floor(u),g=n-b,nt=t-k,tt=u-d,p,rt,ft=0,et=.5,y,a,it;for(ut=0;ut<h;ut++)v=b+(k<<o)+(d<<s),p=e(g),rt=e(nt),y=i[v&r],y+=p*(i[v+1&r]-y),a=i[v+f&r],a+=p*(i[v+f+1&r]-a),y+=rt*(a-y),v+=l,a=i[v&r],a+=p*(i[v+1&r]-a),it=i[v+f&r],it+=p*(i[v+f+1&r]-it),a+=rt*(it-a),y+=e(tt)*(a-y),ft+=y*et,et*=c,b<<=1,g*=2,k<<=1,nt*=2,d<<=1,tt*=2,g>=1&&(b++,g--),nt>=1&&(k++,nt--),tt>=1&&(d++,tt--);return ft};u.prototype.noiseDetail=function(n,t){n>0&&(h=n);t>0&&(c=t)};u.prototype.noiseSeed=function(n){var u=function(){var t=4294967296,r=1664525,u=1013904223,i,n;return{setSeed:function(r){n=i=(r==null?Math.random()*t:r)>>>0},getSeed:function(){return i},rand:function(){return n=(r*n+u)%t,n/t}}}(),t;for(u.setSeed(n),i=new Array(r+1),t=0;t<r+1;t++)i[t]=u.rand()};t.exports=u},{"../core/core":48}],76:[function(n,t){"use strict";var i=n("../core/core"),u=n("./polargeometry"),r=n("../core/constants");i.Vector=function(){var n,t,r;arguments[0]instanceof i?(this.p5=arguments[0],n=arguments[1][0]||0,t=arguments[1][1]||0,r=arguments[1][2]||0):(n=arguments[0]||0,t=arguments[1]||0,r=arguments[2]||0);this.x=n;this.y=t;this.z=r};i.Vector.prototype.toString=function(){return"p5.Vector Object : ["+this.x+", "+this.y+", "+this.z+"]"};i.Vector.prototype.set=function(n,t,r){return n instanceof i.Vector?(this.x=n.x||0,this.y=n.y||0,this.z=n.z||0,this):n instanceof Array?(this.x=n[0]||0,this.y=n[1]||0,this.z=n[2]||0,this):(this.x=n||0,this.y=t||0,this.z=r||0,this)};i.Vector.prototype.copy=function(){return this.p5?new i.Vector(this.p5,[this.x,this.y,this.z]):new i.Vector(this.x,this.y,this.z)};i.Vector.prototype.add=function(n,t,r){return n instanceof i.Vector?(this.x+=n.x||0,this.y+=n.y||0,this.z+=n.z||0,this):n instanceof Array?(this.x+=n[0]||0,this.y+=n[1]||0,this.z+=n[2]||0,this):(this.x+=n||0,this.y+=t||0,this.z+=r||0,this)};i.Vector.prototype.sub=function(n,t,r){return n instanceof i.Vector?(this.x-=n.x||0,this.y-=n.y||0,this.z-=n.z||0,this):n instanceof Array?(this.x-=n[0]||0,this.y-=n[1]||0,this.z-=n[2]||0,this):(this.x-=n||0,this.y-=t||0,this.z-=r||0,this)};i.Vector.prototype.mult=function(n){return this.x*=n||0,this.y*=n||0,this.z*=n||0,this};i.Vector.prototype.div=function(n){return this.x/=n,this.y/=n,this.z/=n,this};i.Vector.prototype.mag=function(){return Math.sqrt(this.magSq())};i.Vector.prototype.magSq=function(){var n=this.x,t=this.y,i=this.z;return n*n+t*t+i*i};i.Vector.prototype.dot=function(n,t,r){return n instanceof i.Vector?this.dot(n.x,n.y,n.z):this.x*(n||0)+this.y*(t||0)+this.z*(r||0)};i.Vector.prototype.cross=function(n){var t=this.y*n.z-this.z*n.y,r=this.z*n.x-this.x*n.z,u=this.x*n.y-this.y*n.x;return this.p5?new i.Vector(this.p5,[t,r,u]):new i.Vector(t,r,u)};i.Vector.prototype.dist=function(n){var t=n.copy().sub(this);return t.mag()};i.Vector.prototype.normalize=function(){return this.div(this.mag())};i.Vector.prototype.limit=function(n){var t=this.magSq();return t>n*n&&(this.div(Math.sqrt(t)),this.mult(n)),this};i.Vector.prototype.setMag=function(n){return this.normalize().mult(n)};i.Vector.prototype.heading=function(){var n=Math.atan2(this.y,this.x);return this.p5?this.p5._angleMode===r.RADIANS?n:u.radiansToDegrees(n):n};i.Vector.prototype.rotate=function(n){this.p5&&this.p5._angleMode===r.DEGREES&&(n=u.degreesToRadians(n));var t=this.heading()+n,i=this.mag();return this.x=Math.cos(t)*i,this.y=Math.sin(t)*i,this};i.Vector.prototype.lerp=function(n,t,r,u){return n instanceof i.Vector?this.lerp(n.x,n.y,n.z,t):(this.x+=(n-this.x)*u||0,this.y+=(t-this.y)*u||0,this.z+=(r-this.z)*u||0,this)};i.Vector.prototype.array=function(){return[this.x||0,this.y||0,this.z||0]};i.Vector.prototype.equals=function(n,t,r){var u,f,e;return n instanceof i.Vector?(u=n.x||0,f=n.y||0,e=n.z||0):n instanceof Array?(u=n[0]||0,f=n[1]||0,e=n[2]||0):(u=n||0,f=t||0,e=r||0),this.x===u&&this.y===f&&this.z===e};i.Vector.fromAngle=function(n){return this.p5&&this.p5._angleMode===r.DEGREES&&(n=u.degreesToRadians(n)),this.p5?new i.Vector(this.p5,[Math.cos(n),Math.sin(n),0]):new i.Vector(Math.cos(n),Math.sin(n),0)};i.Vector.random2D=function(){var n;return n=this.p5?this.p5._angleMode===r.DEGREES?this.p5.random(360):this.p5.random(r.TWO_PI):Math.random()*Math.PI*2,this.fromAngle(n)};i.Vector.random3D=function(){var t,n,u,f;return this.p5?(t=this.p5.random(0,r.TWO_PI),n=this.p5.random(-1,1)):(t=Math.random()*Math.PI*2,n=Math.random()*2-1),u=Math.sqrt(1-n*n)*Math.cos(t),f=Math.sqrt(1-n*n)*Math.sin(t),this.p5?new i.Vector(this.p5,[u,f,n]):new i.Vector(u,f,n)};i.Vector.add=function(n,t,i){return i?i.set(n):i=n.copy(),i.add(t),i};i.Vector.sub=function(n,t,i){return i?i.set(n):i=n.copy(),i.sub(t),i};i.Vector.mult=function(n,t,i){return i?i.set(n):i=n.copy(),i.mult(t),i};i.Vector.div=function(n,t,i){return i?i.set(n):i=n.copy(),i.div(t),i};i.Vector.dot=function(n,t){return n.dot(t)};i.Vector.cross=function(n,t){return n.cross(t)};i.Vector.dist=function(n,t){return n.dist(t)};i.Vector.lerp=function(n,t,i,r){return r?r.set(n):r=n.copy(),r.lerp(t,i),r};i.Vector.angleBetween=function(n,t){var i=Math.acos(n.dot(t)/(n.mag()*t.mag()));return this.p5&&this.p5._angleMode===r.DEGREES&&(i=u.radiansToDegrees(i)),i};t.exports=i.Vector},{"../core/constants":47,"../core/core":48,"./polargeometry":77}],77:[function(n,t){t.exports={degreesToRadians:function(n){return 2*Math.PI*n/360},radiansToDegrees:function(n){return 360*n/(2*Math.PI)}}},{}],78:[function(n,t){"use strict";var i=n("../core/core"),u=!1,f=function(){var t=4294967296,r=1664525,u=1013904223,i,n;return{setSeed:function(r){n=i=(r==null?Math.random()*t:r)>>>0},getSeed:function(){return i},rand:function(){return n=(r*n+u)%t,n/t}}}(),e,r;i.prototype.randomSeed=function(n){f.setSeed(n);u=!0};i.prototype.random=function(n,t){var i,r;return i=u?f.rand():Math.random(),arguments.length===0?i:arguments.length===1?i*n:(n>t&&(r=n,n=t,t=r),i*(t-n)+n)};r=!1;i.prototype.randomGaussian=function(n,t){var o,u,f,i,s,h;if(r)o=e,r=!1;else{do u=this.random(2)-1,f=this.random(2)-1,i=u*u+f*f;while(i>=1);i=Math.sqrt(-2*Math.log(i)/i);o=u*i;e=f*i;r=!0}return s=n||0,h=t||1,o*h+s};t.exports=i},{"../core/core":48}],79:[function(n,t){"use strict";var i=n("../core/core"),u=n("./polargeometry"),r=n("../core/constants");i.prototype._angleMode=r.RADIANS;i.prototype.acos=function(n){return this._angleMode===r.RADIANS?Math.acos(n):u.radiansToDegrees(Math.acos(n))};i.prototype.asin=function(n){return this._angleMode===r.RADIANS?Math.asin(n):u.radiansToDegrees(Math.asin(n))};i.prototype.atan=function(n){return this._angleMode===r.RADIANS?Math.atan(n):u.radiansToDegrees(Math.atan(n))};i.prototype.atan2=function(n,t){return this._angleMode===r.RADIANS?Math.atan2(n,t):u.radiansToDegrees(Math.atan2(n,t))};i.prototype.cos=function(n){return this._angleMode===r.RADIANS?Math.cos(n):Math.cos(this.radians(n))};i.prototype.sin=function(n){return this._angleMode===r.RADIANS?Math.sin(n):Math.sin(this.radians(n))};i.prototype.tan=function(n){return this._angleMode===r.RADIANS?Math.tan(n):Math.tan(this.radians(n))};i.prototype.degrees=function(n){return u.radiansToDegrees(n)};i.prototype.radians=function(n){return u.degreesToRadians(n)};i.prototype.angleMode=function(n){(n===r.DEGREES||n===r.RADIANS)&&(this._angleMode=n)};t.exports=i},{"../core/constants":47,"../core/core":48,"./polargeometry":77}],80:[function(n,t){"use strict";var i=n("../core/core");i.prototype.textAlign=function(){return this._renderer.textAlign.apply(this._renderer,arguments)};i.prototype.textLeading=function(){return this._renderer.textLeading.apply(this._renderer,arguments)};i.prototype.textSize=function(){return this._renderer.textSize.apply(this._renderer,arguments)};i.prototype.textStyle=function(){return this._renderer.textStyle.apply(this._renderer,arguments)};i.prototype.textWidth=function(){return this._renderer.textWidth.apply(this._renderer,arguments)};i.prototype.textAscent=function(){return this._renderer.textAscent()};i.prototype.textDescent=function(){return this._renderer.textDescent()};i.prototype._updateTextMetrics=function(){return this._renderer._updateTextMetrics()};t.exports=i},{"../core/core":48}],81:[function(n,t){"use strict";var i=n("../core/core"),r=n("../core/constants");n("../core/error_helpers");i.prototype.text=function(){for(var t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];return this._validateParameters("text",t,[["*","Number","Number"],["*","Number","Number","Number","Number"]]),(this._renderer._doFill||this._renderer._doStroke)?this._renderer.text.apply(this._renderer,arguments):this};i.prototype.textFont=function(n,t){if(arguments.length){if(!n)throw Error("null font passed to textFont");return this._renderer._setProperty("_textFont",n),t&&(this._renderer._setProperty("_textSize",t),this._renderer._setProperty("_textLeading",t*r._DEFAULT_LEADMULT)),this._renderer._applyTextProperties()}return this};t.exports=i},{"../core/constants":47,"../core/core":48,"../core/error_helpers":51}],82:[function(n,t){"use strict";function b(n,t){for(var i=nt(t,{sampleFactor:.1,simplifyThreshold:0}),r=c(n,0,1),e=r/(r*i.sampleFactor),u=[],f=0;f<r;f+=e)u.push(c(n,f));return i.simplifyThreshold&&k(u,i.simplifyThreshold),u}function k(n,t){var r,i;for(t=typeof t=="undefined"?0:t,r=0,i=n.length-1;n.length>3&&i>=0;--i)u(o(n,i-1),o(n,i),o(n,i+1),t)&&(n.splice(i%n.length,1),r++);return r}function d(n){for(var r=[],t,i=0;i<n.length;i++)n[i].type==="M"&&(t&&r.push(t),t=[]),t.push(g(n[i]));return r.push(t),r}function g(n){var t=[n.type];return n.type==="M"||n.type==="L"?t.push(n.x,n.y):n.type==="C"?t.push(n.x1,n.y1,n.x2,n.y2,n.x,n.y):n.type==="Q"&&t.push(n.x1,n.y1,n.x,n.y),t}function nt(n,t){if(typeof n!="object")n=t;else for(var i in t)typeof n[i]=="undefined"&&(n[i]=t[i]);return n}function o(n,t){var i=n.length;return n[t<0?t%i+i:t%i]}function u(n,t,i,r){var f,e;if(!r)return tt(n,t,i)===0;typeof u.tmpPoint1=="undefined"&&(u.tmpPoint1=[],u.tmpPoint2=[]);f=u.tmpPoint1;e=u.tmpPoint2;f.x=t.x-n.x;f.y=t.y-n.y;e.x=i.x-t.x;e.y=i.y-t.y;var o=f.x*e.x+f.y*e.y,s=Math.sqrt(f.x*f.x+f.y*f.y),h=Math.sqrt(e.x*e.x+e.y*e.y),c=Math.acos(o/(s*h));return c<r}function tt(n,t,i){return(t[0]-n[0])*(i[1]-n[1])-(i[0]-n[0])*(t[1]-n[1])}function s(n,t,i,r,u,f,e,o,s){var h=1-s,p=Math.pow(h,3),w=Math.pow(h,2),c=s*s,b=c*s,d=p*n+w*3*s*i+h*3*s*s*u+b*e,g=p*t+w*3*s*r+h*3*s*s*f+b*o,l=n+2*s*(i-n)+c*(u-2*i+n),a=t+2*s*(r-t)+c*(f-2*r+t),v=i+2*s*(u-i)+c*(e-2*u+i),y=r+2*s*(f-r)+c*(o-2*f+r),nt=h*n+s*i,tt=h*t+s*r,it=h*u+s*e,rt=h*f+s*o,k=90-Math.atan2(l-v,a-y)*180/Math.PI;return(l>v||a<y)&&(k+=180),{x:d,y:g,m:{x:l,y:a},n:{x:v,y:y},start:{x:nt,y:tt},end:{x:it,y:rt},alpha:k}}function h(n,t,i,r,u,f,o,h,c){return c==null?e(n,t,i,r,u,f,o,h):s(n,t,i,r,u,f,o,h,rt(n,t,i,r,u,f,o,h,c))}function c(n,t,i){var c,v;n=it(n);var f,e,r,l,a="",u,o=0;for(c=0,v=n.length;c<v;c++){if(r=n[c],r[0]==="M")f=+r[1],e=+r[2];else{if(l=h(f,e,r[1],r[2],r[3],r[4],r[5],r[6]),o+l>t&&!i)return u=h(f,e,r[1],r[2],r[3],r[4],r[5],r[6],t-o),{x:u.x,y:u.y,alpha:u.alpha};o+=l;f=+r[5];e=+r[6]}a+=r.shift()+r}return{}.end=a,u=i?o:s(f,e,r[0],r[1],r[2],r[3],r[4],r[5],1),u.alpha&&(u={x:u.x,y:u.y,alpha:u.alpha}),u}function l(n){var e=[],r=0,u=0,h=0,c=0,p=0,o,y,t,i,l,w,f,a,s,b;for(n[0][0]==="M"&&(r=+n[0][1],u=+n[0][2],h=r,c=u,p++,e[0]=["M",r,u]),y=n.length===3&&n[0][0]==="M"&&n[1][0].toUpperCase()==="R"&&n[2][0].toUpperCase()==="Z",l=p,w=n.length;l<w;l++){if(e.push(t=[]),i=n[l],i[0]!==String.prototype.toUpperCase.call(i[0])){t[0]=String.prototype.toUpperCase.call(i[0]);switch(t[0]){case"A":t[1]=i[1];t[2]=i[2];t[3]=i[3];t[4]=i[4];t[5]=i[5];t[6]=+(i[6]+r);t[7]=+(i[7]+u);break;case"V":t[1]=+i[1]+u;break;case"H":t[1]=+i[1]+r;break;case"R":for(o=[r,u].concat(i.slice(1)),f=2,a=o.length;f<a;f++)o[f]=+o[f]+r,o[++f]=+o[f]+u;e.pop();e=e.concat(v(o,y));break;case"M":h=+i[1]+r;c=+i[2]+u;break;default:for(f=1,a=i.length;f<a;f++)t[f]=+i[f]+(f%2?r:u)}}else if(i[0]==="R")o=[r,u].concat(i.slice(1)),e.pop(),e=e.concat(v(o,y)),t=["R"].concat(i.slice(-2));else for(s=0,b=i.length;s<b;s++)t[s]=i[s];switch(t[0]){case"Z":r=h;u=c;break;case"H":r=t[1];break;case"V":u=t[1];break;case"M":h=t[t.length-2];c=t[t.length-1];break;default:r=t[t.length-2];u=t[t.length-1]}}return e}function it(n,t){for(var u=l(n),r=t&&l(t),e={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},o={x:0,y:0,bx:0,by:0,X:0,Y:0,qx:null,qy:null},g=function(n,t,i){var r,u;if(!n)return["C",t.x,t.y,t.x,t.y,t.x,t.y];n[0]in{T:1,Q:1}||(t.qx=t.qy=null);switch(n[0]){case"M":t.X=n[1];t.Y=n[2];break;case"A":n=["C"].concat(a.apply(0,[t.x,t.y].concat(n.slice(1))));break;case"S":i==="C"||i==="S"?(r=t.x*2-t.bx,u=t.y*2-t.by):(r=t.x,u=t.y);n=["C",r,u].concat(n.slice(1));break;case"T":i==="Q"||i==="T"?(t.qx=t.x*2-t.qx,t.qy=t.y*2-t.qy):(t.qx=t.x,t.qy=t.y);n=["C"].concat(y(t.x,t.y,t.qx,t.qy,n[1],n[2]));break;case"Q":t.qx=n[1];t.qy=n[2];n=["C"].concat(y(t.x,t.y,n[1],n[2],n[3],n[4]));break;case"L":n=["C"].concat(f(t.x,t.y,n[1],n[2]));break;case"H":n=["C"].concat(f(t.x,t.y,n[1],t.y));break;case"V":n=["C"].concat(f(t.x,t.y,t.x,n[1]));break;case"Z":n=["C"].concat(f(t.x,t.y,t.X,t.Y))}return n},nt=function(n,t){if(n[t].length>7){n[t].shift();for(var i=n[t];i.length;)h[t]="A",r&&(c[t]="A"),n.splice(t++,0,["C"].concat(i.splice(0,6)));n.splice(t,1);d=Math.max(u.length,r&&r.length||0)}},tt=function(n,t,i,f,e){n&&t&&n[e][0]==="M"&&t[e][0]!=="M"&&(t.splice(e,0,["M",f.x,f.y]),i.bx=0,i.by=0,i.x=n[e][1],i.y=n[e][2],d=Math.max(u.length,r&&r.length||0))},h=[],c=[],s="",w="",i=0,d=Math.max(u.length,r&&r.length||0);i<d;i++){u[i]&&(s=u[i][0]);s!=="C"&&(h[i]=s,i&&(w=h[i-1]));u[i]=g(u[i],e,w);h[i]!=="A"&&s==="C"&&(h[i]="C");nt(u,i);r&&(r[i]&&(s=r[i][0]),s!=="C"&&(c[i]=s,i&&(w=c[i-1])),r[i]=g(r[i],o,w),c[i]!=="A"&&s==="C"&&(c[i]="C"),nt(r,i));tt(u,r,e,o,i);tt(r,u,o,e,i);var v=u[i],p=r&&r[i],b=v.length,k=r&&p.length;e.x=v[b-2];e.y=v[b-1];e.bx=parseFloat(v[b-4])||e.x;e.by=parseFloat(v[b-3])||e.y;o.bx=r&&(parseFloat(p[k-4])||o.x);o.by=r&&(parseFloat(p[k-3])||o.y);o.x=r&&p[k-2];o.y=r&&p[k-1]}return r?[u,r]:u}function a(n,t,i,r,u,f,e,o,s,h){var p=Math.PI,st=p*120/180,l,c,k,d,it=p/180*(+u||0),v=[],g,rt=function(n,t,i){var r=n*Math.cos(i)-t*Math.sin(i),u=n*Math.sin(i)+t*Math.cos(i);return{x:r,y:u}},ut,ot,y,wt;if(h)l=h[0],c=h[1],k=h[2],d=h[3];else{g=rt(n,t,-it);n=g.x;t=g.y;g=rt(o,s,-it);o=g.x;s=g.y;var w=(n-o)/2,b=(t-s)/2,tt=w*w/(i*i)+b*b/(r*r);tt>1&&(tt=Math.sqrt(tt),i=tt*i,r=tt*r);var ft=i*i,et=r*r,ht=(f===e?-1:1)*Math.sqrt(Math.abs((ft*et-ft*b*b-et*w*w)/(ft*b*b+et*w*w)));k=ht*i*b/r+(n+o)/2;d=ht*-r*w/i+(t+s)/2;l=Math.asin(((t-d)/r).toFixed(9));c=Math.asin(((s-d)/r).toFixed(9));l=n<k?p-l:l;c=o<k?p-c:c;l<0&&(l=p*2+l);c<0&&(c=p*2+c);e&&l>c&&(l=l-p*2);!e&&c>l&&(c=c-p*2)}if(ut=c-l,Math.abs(ut)>st){var bt=c,kt=o,dt=s;c=l+st*(e&&c>l?1:-1);o=k+i*Math.cos(c);s=d+r*Math.sin(c);v=a(o,s,i,r,u,0,e,kt,dt,[c,bt,k,d])}ut=c-l;var gt=Math.cos(l),ni=Math.sin(l),ti=Math.cos(c),ii=Math.sin(c),ct=Math.tan(ut/4),lt=4/3*i*ct,at=4/3*r*ct,vt=[n,t],nt=[n+lt*ni,t-at*gt],yt=[o+lt*ii,s-at*ti],pt=[o,s];if(nt[0]=2*vt[0]-nt[0],nt[1]=2*vt[1]-nt[1],h)return[nt,yt,pt].concat(v);for(v=[nt,yt,pt].concat(v).join().split(","),ot=[],y=0,wt=v.length;y<wt;y++)ot[y]=y%2?rt(v[y-1],v[y],it).y:rt(v[y],v[y+1],it).x;return ot}function v(n,t){for(var i,f=[],r=0,u=n.length;u-2*!t>r;r+=2)i=[{x:+n[r-2],y:+n[r-1]},{x:+n[r],y:+n[r+1]},{x:+n[r+2],y:+n[r+3]},{x:+n[r+4],y:+n[r+5]}],t?r?u-4===r?i[3]={x:+n[0],y:+n[1]}:u-2===r&&(i[2]={x:+n[0],y:+n[1]},i[3]={x:+n[2],y:+n[3]}):i[0]={x:+n[u-2],y:+n[u-1]}:u-4===r?i[3]=i[2]:r||(i[0]={x:+n[r],y:+n[r+1]}),f.push(["C",(-i[0].x+6*i[1].x+i[2].x)/6,(-i[0].y+6*i[1].y+i[2].y)/6,(i[1].x+6*i[2].x-i[3].x)/6,(i[1].y+6*i[2].y-i[3].y)/6,i[2].x,i[2].y]);return f}function f(n,t,i,r){return[n,t,i,r,i,r]}function y(n,t,i,r,u,f){var e=1/3,o=2/3;return[e*n+o*i,e*t+o*r,e*u+o*i,e*f+o*r,u,f]}function e(n,t,i,r,u,f,e,o,s){var h;s==null&&(s=1);s=s>1?1:s<0?0:s;var c=s/2,w=[-.1252,.1252,-.3678,.3678,-.5873,.5873,-.7699,.7699,-.9041,.9041,-.9816,.9816],l=0,b=[.2491,.2491,.2335,.2335,.2032,.2032,.1601,.1601,.1069,.1069,.0472,.0472];for(h=0;h<12;h++){var a=c*w[h]+c,v=p(a,n,i,u,e),y=p(a,t,r,f,o),k=v*v+y*y;l+=b[h]*Math.sqrt(k)}return c*l}function rt(n,t,i,r,u,f,o,s,h){if(!(h<0)&&!(e(n,t,i,r,u,f,o,s)<h)){for(var v=1,a=v/2,c=v-a,l=e(n,t,i,r,u,f,o,s,c);Math.abs(l-h)>.01;)a/=2,c+=(l<h?1:-1)*a,l=e(n,t,i,r,u,f,o,s,c);return c}}function p(n,t,i,r,u){var f=-3*t+9*i-9*r+3*u,e=n*f+6*t-12*i+6*r;return n*e-3*t+3*i}function w(){for(var i,t=new Array(arguments.length),n=0;n<t.length;++n)t[n]=arguments[n];for(n=t.length,i="";n--;)i+=t[n]===Object(t[n])?JSON.stringify(t[n]):t[n];return i}var i=n("../core/core"),r=n("../core/constants");i.Font=function(n){this.parent=n;this.cache={};this.font=undefined};i.Font.prototype.list=function(){throw"not yet implemented";};i.Font.prototype.textBounds=function(n,t,i,r,u){var f;if(t=t!==undefined?t:0,i=i!==undefined?i:0,r=r||this.parent._renderer._textSize,f=this.cache[w("textBounds",n,t,i,r)],!f){var e=[],o=[],l=this,h=this._scale(r),s,c,a,v;this.font.forEachGlyph(n,t,i,r,u,function(n,t,i){e.push(t);o.push(i);var u=n.getMetrics();n.name!=="space"?(e.push(t+u.xMax*h),o.push(i+-u.yMin*h),o.push(i+-u.yMax*h)):e.push(t+l.font.charToGlyph(" ").advanceWidth*l._scale(r))});s=Math.max(0,Math.min.apply(null,e));c=Math.max(0,Math.min.apply(null,o));a=Math.max(0,Math.max.apply(null,e));v=Math.max(0,Math.max.apply(null,o));f={x:s,y:c,h:v-c,w:a-s,advance:s-t};this.cache[w("textBounds",n,t,i,r)]=f}return f};i.Font.prototype.textToPoints=function(n,t,i,r,u){var l=0,a=[],h=this._getGlyphs(n),f,v,c,o,s,e;for(r=r||this.parent._renderer._textSize,f=0;f<h.length;f++){for(v=h[f].getPath(t,i,r),c=d(v.commands),o=0;o<c.length;o++)for(s=b(c[o],u),e=0;e<s.length;e++)s[e].x+=l,a.push(s[e]);l+=h[f].advanceWidth*this._scale(r)}return a};i.Font.prototype._getGlyphs=function(n){return this.font.stringToGlyphs(n)};i.Font.prototype._getPath=function(n,t,i,r){var u=this.parent,e=u._renderer.drawingContext,f=this._handleAlignment(u,e,n,t,i);return this.font.getPath(n,f.x,f.y,u._renderer._textSize,r)};i.Font.prototype._getPathData=function(n,t,i,r){var u=3;return typeof n=="string"&&arguments.length>2?n=this._getPath(n,t,i,r):typeof t=="object"&&(r=t),r&&typeof r.decimals=="number"&&(u=r.decimals),n.toPathData(u)};i.Font.prototype._getSVG=function(n,t,i,r){var u=3;return typeof n=="string"&&arguments.length>2?n=this._getPath(n,t,i,r):typeof t=="object"&&(r=t),r&&(typeof r.decimals=="number"&&(u=r.decimals),typeof r.strokeWidth=="number"&&(n.strokeWidth=r.strokeWidth),typeof r.fill!="undefined"&&(n.fill=r.fill),typeof r.stroke!="undefined"&&(n.stroke=r.stroke)),n.toSVG(u)};i.Font.prototype._renderPath=function(n,t,i,u){var h,o=u&&u.renderer||this.parent._renderer,e=o.drawingContext,s,f;for(h=typeof n=="object"&&n.commands?n.commands:this._getPath(n,t,i,o._textSize,u).commands,e.beginPath(),s=0;s<h.length;s+=1)f=h[s],f.type==="M"?e.moveTo(f.x,f.y):f.type==="L"?e.lineTo(f.x,f.y):f.type==="C"?e.bezierCurveTo(f.x1,f.y1,f.x2,f.y2,f.x,f.y):f.type==="Q"?e.quadraticCurveTo(f.x1,f.y1,f.x,f.y):f.type==="Z"&&e.closePath();return o._doStroke&&o._strokeSet&&e.stroke(),o._doFill&&(e.fillStyle=o._fillSet?e.fillStyle:r._DEFAULT_TEXT_FILL,e.fill()),this};i.Font.prototype._textWidth=function(n,t){if(n===" ")return this.font.charToGlyph(" ").advanceWidth*this._scale(t);var i=this.textBounds(n,0,0,t);return i.w+i.advance};i.Font.prototype._textAscent=function(n){return this.font.ascender*this._scale(n)};i.Font.prototype._textDescent=function(n){return-this.font.descender*this._scale(n)};i.Font.prototype._scale=function(n){return 1/this.font.unitsPerEm*(n||this.parent._renderer._textSize)};i.Font.prototype._handleAlignment=function(n,t,i,u,f){var o=this._textWidth(i),h=this._textAscent(),e=this._textDescent(),s=h+e;return t.textAlign===r.CENTER?u-=o/2:t.textAlign===r.RIGHT&&(u-=o),t.textBaseline===r.TOP?f+=s:t.textBaseline===r._CTX_MIDDLE?f+=s/2-e:t.textBaseline===r.BOTTOM&&(f-=e),{x:u,y:f}};t.exports=i.Font},{"../core/constants":47,"../core/core":48}],83:[function(n,t){"use strict";var i=n("../core/core");i.prototype.append=function(n,t){return n.push(t),n};i.prototype.arrayCopy=function(n,t,i,r,u){var e,f;typeof u!="undefined"?(f=Math.min(u,n.length),e=r,n=n.slice(t,f+t)):(typeof i!="undefined"?(f=i,f=Math.min(f,n.length)):f=n.length,e=0,i=t,n=n.slice(0,f));Array.prototype.splice.apply(i,[e,f].concat(n))};i.prototype.concat=function(n,t){return n.concat(t)};i.prototype.reverse=function(n){return n.reverse()};i.prototype.shorten=function(n){return n.pop(),n};i.prototype.shuffle=function(n,t){var f=ArrayBuffer&&ArrayBuffer.isView&&ArrayBuffer.isView(n),r,u,i;for(n=t||f?n:n.slice(),i=n.length;i>1;)r=Math.random()*i|0,u=n[--i],n[i]=n[r],n[r]=u;return n};i.prototype.sort=function(n,t){var i=t?n.slice(0,Math.min(t,n.length)):n,r=t?n.slice(Math.min(t,n.length)):[];return i=typeof i[0]=="string"?i.sort():i.sort(function(n,t){return n-t}),i.concat(r)};i.prototype.splice=function(n,t,i){return Array.prototype.splice.apply(n,[i,0].concat(t)),n};i.prototype.subset=function(n,t,i){return typeof i!="undefined"?n.slice(t,t+i):n.slice(t,n.length)};t.exports=i},{"../core/core":48}],84:[function(n,t){"use strict";var i=n("../core/core");i.prototype.float=function(n){return parseFloat(n)};i.prototype.int=function(n,t){return typeof n=="string"?(t=t||10,parseInt(n,t)):typeof n=="number"?n|0:typeof n=="boolean"?n?1:0:n instanceof Array?n.map(function(n){return i.prototype.int(n,t)}):void 0};i.prototype.str=function(n){return n instanceof Array?n.map(i.prototype.str):String(n)};i.prototype.boolean=function(n){return typeof n=="number"?n!==0:typeof n=="string"?n.toLowerCase()==="true":typeof n=="boolean"?n:n instanceof Array?n.map(i.prototype.boolean):void 0};i.prototype.byte=function(n){var t=i.prototype.int(n,10);return typeof t=="number"?(t+128)%256-128:t instanceof Array?t.map(i.prototype.byte):void 0};i.prototype.char=function(n){if(typeof n!="number"||isNaN(n)){if(n instanceof Array)return n.map(i.prototype.char);if(typeof n=="string")return i.prototype.char(parseInt(n,10))}else return String.fromCharCode(n)};i.prototype.unchar=function(n){return typeof n=="string"&&n.length===1?n.charCodeAt(0):n instanceof Array?n.map(i.prototype.unchar):void 0};i.prototype.hex=function(n,t){if(t=t===undefined||t===null?t=8:t,n instanceof Array)return n.map(function(n){return i.prototype.hex(n,t)});if(typeof n=="number"){n<0&&(n=4294967295+n+1);for(var r=Number(n).toString(16).toUpperCase();r.length<t;)r="0"+r;return r.length>=t&&(r=r.substring(r.length-t,r.length)),r}};i.prototype.unhex=function(n){return n instanceof Array?n.map(i.prototype.unhex):parseInt("0x"+n,16)};t.exports=i},{"../core/core":48}],85:[function(n,t){"use strict";function r(){var u=arguments[0],c=u<0,i=c?u.toString().substring(1):u.toString(),r=i.indexOf("."),f=r!==-1?i.substring(0,r):i,t=r!==-1?i.substring(r+1):"",n=c?"-":"",e,o,s,h;if(arguments.length===3){for(e="",(r!==-1||arguments[2]-t.length>0)&&(e="."),t.length>arguments[2]&&(t=t.substring(0,arguments[2])),o=0;o<arguments[1]-f.length;o++)n+="0";for(n+=f,n+=e,n+=t,s=0;s<arguments[2]-t.length;s++)n+="0";return n}for(h=0;h<Math.max(arguments[1]-f.length,0);h++)n+="0";return n+i}function u(){var i=arguments[0].toString(),t=i.indexOf("."),n=t!==-1?i.substring(t):"",r=t!==-1?i.substring(0,t):i,f,u;if(r=r.toString().replace(/\B(?=(\d{3})+(?!\d))/g,","),arguments[1]===0)n="";else if(arguments[1]!==undefined)if(arguments[1]>n.length)for(n+=t===-1?".":"",f=arguments[1]-n.length+1,u=0;u<f;u++)n+="0";else n=n.substring(0,arguments[1]+1);return r+n}function f(){return parseFloat(arguments[0])>0?"+"+arguments[0].toString():arguments[0].toString()}function e(){return parseFloat(arguments[0])>0?" "+arguments[0].toString():arguments[0].toString()}var i=n("../core/core");i.prototype.join=function(n,t){return n.join(t)};i.prototype.match=function(n,t){return n.match(t)};i.prototype.matchAll=function(n,t){for(var r=new RegExp(t,"g"),i=r.exec(n),u=[];i!==null;)u.push(i),i=r.exec(n);return u};i.prototype.nf=function(){var n,t,i;return arguments[0]instanceof Array?(n=arguments[1],t=arguments[2],arguments[0].map(function(i){return r(i,n,t)})):(i=Object.prototype.toString.call(arguments[0]),i==="[object Arguments]"?arguments[0].length===3?this.nf(arguments[0][0],arguments[0][1],arguments[0][2]):arguments[0].length===2?this.nf(arguments[0][0],arguments[0][1]):this.nf(arguments[0][0]):r.apply(this,arguments))};i.prototype.nfc=function(){if(arguments[0]instanceof Array){var n=arguments[1];return arguments[0].map(function(t){return u(t,n)})}return u.apply(this,arguments)};i.prototype.nfp=function(){var n=this.nf.apply(this,arguments);return n instanceof Array?n.map(f):f(n)};i.prototype.nfs=function(){var n=this.nf.apply(this,arguments);return n instanceof Array?n.map(e):e(n)};i.prototype.split=function(n,t){return n.split(t)};i.prototype.splitTokens=function(){var r,t,i,n;return n=arguments[1],arguments.length>1?(i=/\]/g.exec(n),t=/\[/g.exec(n),t&&i?(n=n.slice(0,i.index)+n.slice(i.index+1),t=/\[/g.exec(n),n=n.slice(0,t.index)+n.slice(t.index+1),r=new RegExp("[\\["+n+"\\]]","g")):i?(n=n.slice(0,i.index)+n.slice(i.index+1),r=new RegExp("["+n+"\\]]","g")):t?(n=n.slice(0,t.index)+n.slice(t.index+1),r=new RegExp("["+n+"\\[]","g")):r=new RegExp("["+n+"]","g")):r=/\s/g,arguments[0].split(r).filter(function(n){return n})};i.prototype.trim=function(n){return n instanceof Array?n.map(this.trim):n.trim()};t.exports=i},{"../core/core":48}],86:[function(n,t){"use strict";var i=n("../core/core");i.prototype.day=function(){return(new Date).getDate()};i.prototype.hour=function(){return(new Date).getHours()};i.prototype.minute=function(){return(new Date).getMinutes()};i.prototype.millis=function(){return window.performance.now()};i.prototype.month=function(){return(new Date).getMonth()+1};i.prototype.second=function(){return(new Date).getSeconds()};i.prototype.year=function(){return(new Date).getFullYear()};t.exports=i},{"../core/core":48}]},{},[39])(39)});