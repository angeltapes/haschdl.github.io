function Colour(n,t){if(this.type=n,this.values=t,this.values.length<4)throw"Bad value";}Colour.RGBA=0;Colour.XYZA=1;Colour.HSVA=2;Colour.LABA=3;Colour.LAST_COLOURSPACE=3;Colour.fromString=function(n){n.toLowerCase()in Colour.CssColours&&(n=Colour.CssColours[n.toLowerCase()]);var i,r,u,f,t=/\#([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])([0-9a-f][0-9a-f])/i.exec(n);return t!==null?(i=parseInt(t[1],16)/255,r=parseInt(t[2],16)/255,u=parseInt(t[3],16)/255,f=1):(t=/rgba\( *([0-9]+) *, *([0-9]+) *, *([0-9]+) *, *([0-9\.]+) *\)/.exec(n),t!==null?(i=parseFloat(t[1])/255,r=parseFloat(t[2])/255,u=parseFloat(t[3])/255,f=parseFloat(t[4])):(i=1,r=0,u=1,f=1)),new Colour(Colour.RGBA,[i,r,u,f])};Colour.prototype={toString:function(){function t(n){return n=Math.round(n*255),n<16?"0"+n.toString(16):n.toString(16)}var n=this.convertTo(Colour.RGBA);return n.values[3]===1?"#"+t(n.values[0])+t(n.values[1])+t(n.values[2]):"rgba("+Math.round(n.values[0]*255)+","+Math.round(n.values[1]*255)+","+Math.round(n.values[2]*255)+","+n.values[3]+")"},convertTo:function(n){return Colour.converters[this.type][n](this)},distanceTo:function(n){if(n.type!==this.type&&(n=n.convertTo(this.type)),this.type===Colour.HSVA){var t=this.values[0],i=n.values[0],r;return r=t>i?Math.min(t-i,i-t+360):Math.min(i-t,t-i+360),r/=360,Math.pow(r*r+(this.values[1]-n.values[1])*(this.values[1]-n.values[1])+(this.values[2]-n.values[2])*(this.values[2]-n.values[2]),.5)}return Math.pow((this.values[0]-n.values[0])*(this.values[0]-n.values[0])+(this.values[1]-n.values[1])*(this.values[1]-n.values[1])+(this.values[2]-n.values[2])*(this.values[2]-n.values[2]),.5)}},function(){function i(n){var e=n.values[0],o=n.values[1],t=n.values[2];e<0&&(e+=360);var l=Math.floor(e/60)%6,c=e/60-Math.floor(e/60),f=t*(1-o),s=t*(1-c*o),h=t*(1-(1-c)*o),i,r,u;switch(l){case 0:i=t;r=h;u=f;break;case 1:i=s;r=t;u=f;break;case 2:i=f;r=t;u=h;break;case 3:i=f;r=s;u=t;break;case 4:i=h;r=f;u=t;break;case 5:i=t;r=f;u=s}return new Colour(Colour.RGBA,[i,r,u,n.values[3]])}function e(n){var i,o,s,r=n.values[0],u=n.values[1],f=n.values[2],t=Math.max(r,u,f),e=Math.min(r,u,f);return t===e?i=0:t===r?i=(60*(u-f)/(t-e)+360)%360:t===u?i=60*(f-r)/(t-e)+120:t===f&&(i=60*(r-u)/(t-e)+240),o=t===0?0:1-e/t,s=t,new Colour(Colour.HSVA,[i,o,s,n.values[3]])}function o(t){function i(n){return n>6/29*(6/29)*(6/29)?Math.pow(n,1/3):1/3*(29/6)*(29/6)*n+4/29}var u=i(t.values[0]/n.X),r=i(t.values[1]/n.Y),f=i(t.values[2]/n.Z);return new Colour(Colour.LABA,[116*r-16,500*(u-r),200*(r-f),t.values[3]])}function r(t){var r=(t.values[0]+16)/116,u=r+t.values[1]/500,f=r-t.values[2]/200,i=6/29,e,o,s;return o=r>i?n.Y*r*r*r:(r-16/116)*3*i*i*n.Y,e=u>i?n.X*u*u*u:(u-16/116)*3*i*i*n.X,s=f>i?n.Z*f*f*f:(f-16/116)*3*i*i*n.Z,new Colour(Colour.XYZA,[e,o,s,t.values[3]])}function u(n){for(var t=[],i=0;i<3;i++)t[i]=n.values[i]<=.04045?n.values[i]/12.92:Math.pow((n.values[i]+.055)/1.055,2.4);return new Colour(Colour.XYZA,[.4124*t[0]+.3576*t[1]+.1805*t[2],.2126*t[0]+.7152*t[1]+.0722*t[2],.0193*t[0]+.1192*t[1]+.9505*t[2],n.values[3]])}function f(n){var i=[],r=[],t;for(i[0]=3.241*n.values[0]-1.5374*n.values[1]-.4986*n.values[2],i[1]=-.9692*n.values[0]+1.876*n.values[1]+.0416*n.values[2],i[2]=.0556*n.values[0]-.204*n.values[1]+1.057*n.values[2],t=0;t<3;t++)r[t]=i[t]<=.0031308?12.92*i[t]:1.055*Math.pow(i[t],1/2.4)-.055;return r[3]=n.values[3],new Colour(Colour.RGBA,r)}function t(n){return new Colour(n.type,n.values.concat())}function s(n){return o(u(n))}function c(n){return f(r(n))}function h(n){return e(f(n))}function l(n){return u(i(n))}function a(n){return s(i(n))}function v(n){return h(r(n))}var n={X:.9505,Y:1,Z:1.089};Colour.converters=[[t,u,e,s],[f,t,h,o],[i,l,t,a],[c,r,v,t]]}();Colour.CssColours={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};